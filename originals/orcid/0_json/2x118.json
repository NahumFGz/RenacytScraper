"{'pageref': 'renacyt_profile', 'startedDateTime': '2023-12-02T18:14:59.341-05:00', 'request': {'method': 'GET', 'url': 'https://orcid.org/384.3064f7f62bb883ff-en.js', 'httpVersion': 'HTTP/1.1', 'cookies': [{'name': 'OptanonConsent', 'value': 'isGpcEnabled=0&datestamp=Sat+Dec+02+2023+18%3A14%3A58+GMT-0500+(hora+est%C3%A1ndar+de+Per%C3%BA)&version=202310.2.0&browserGpcFlag=0&isIABGlobal=false&hosts=&consentId=e27f2a14-5788-4f8f-ab28-f01b797c1a03&interactionCount=0&landingPath=https%3A%2F%2Forcid.org%2F0000-0002-8301-5536&groups=C0001%3A1%2CC0003%3A0%2CC0002%3A0%2CC0004%3A0', 'comment': ''}, {'name': 'X-Mapping-fjhppofk', 'value': 'C9BF87EDFB3F654BC98D87552A592F57', 'comment': ''}, {'name': 'XSRF-TOKEN', 'value': '529b3deb-d3a8-4062-8b49-464a48682485', 'comment': ''}], 'headers': [{'name': 'Host', 'value': 'orcid.org'}, {'name': 'Connection', 'value': 'keep-alive'}, {'name': 'sec-ch-ua', 'value': '\"Google Chrome\";v=\"119\", \"Chromium\";v=\"119\", \"Not?A_Brand\";v=\"24\"'}, {'name': 'Origin', 'value': 'https://orcid.org'}, {'name': 'sec-ch-ua-mobile', 'value': '?0'}, {'name': 'User-Agent', 'value': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/119.0.0.0 Safari/537.36'}, {'name': 'sec-ch-ua-platform', 'value': '\"macOS\"'}, {'name': 'Accept', 'value': '*/*'}, {'name': 'Sec-Fetch-Site', 'value': 'same-origin'}, {'name': 'Sec-Fetch-Mode', 'value': 'cors'}, {'name': 'Sec-Fetch-Dest', 'value': 'script'}, {'name': 'Referer', 'value': 'https://orcid.org/0000-0002-8301-5536'}, {'name': 'Accept-Encoding', 'value': 'gzip, deflate, br'}, {'name': 'Accept-Language', 'value': 'es-419,es;q=0.9'}, {'name': 'Cookie', 'value': 'X-Mapping-fjhppofk=C9BF87EDFB3F654BC98D87552A592F57; OptanonConsent=isGpcEnabled=0&datestamp=Sat+Dec+02+2023+18%3A14%3A58+GMT-0500+(hora+est%C3%A1ndar+de+Per%C3%BA)&version=202310.2.0&browserGpcFlag=0&isIABGlobal=false&hosts=&consentId=e27f2a14-5788-4f8f-ab28-f01b797c1a03&interactionCount=0&landingPath=https%3A%2F%2Forcid.org%2F0000-0002-8301-5536&groups=C0001%3A1%2CC0003%3A0%2CC0002%3A0%2CC0004%3A0; XSRF-TOKEN=529b3deb-d3a8-4062-8b49-464a48682485'}], 'queryString': [], 'headersSize': 1049, 'bodySize': 0, 'comment': ''}, 'response': {'status': 200, 'statusText': 'OK', 'httpVersion': 'HTTP/1.1', 'cookies': [], 'headers': [{'name': 'Date', 'value': 'Sat, 02 Dec 2023 23:14:59 GMT'}, {'name': 'Content-Type', 'value': 'application/javascript'}, {'name': 'Transfer-Encoding', 'value': 'chunked'}, {'name': 'Connection', 'value': 'keep-alive'}, {'name': 'CF-Ray', 'value': '82f744f1fe3f4972-MIA'}, {'name': 'CF-Cache-Status', 'value': 'HIT'}, {'name': 'Age', 'value': '1277'}, {'name': 'Cache-Control', 'value': 'max-age=2678400'}, {'name': 'ETag', 'value': 'W/\"399779-1698781694000\"'}, {'name': 'Last-Modified', 'value': 'Tue, 31 Oct 2023 19:48:14 GMT'}, {'name': 'Vary', 'value': 'Accept-Encoding'}, {'name': 'Cf-Bgj', 'value': 'minify'}, {'name': 'x-frame-options', 'value': 'SAMEORIGIN'}, {'name': 'Server', 'value': 'cloudflare'}, {'name': 'Content-Encoding', 'value': 'gzip'}], 'content': {'size': 399779, 'mimeType': 'application/javascript', 'text': '(self.webpackChunkng_orcid=self.webpackChunkng_orcid||[]).push([[384],{65384:(gn,Re,g)=>{\"use strict\";g.r(Re),g.d(Re,{RecordModule:()=>Uu});var Z=g(87845),p=g(96814),d=g(56223),te=g(49241),A=g(94505),Te=g(29025),oe=g(94021),Q=g(26385),h=g(84187),y=g(30617),q=g(75120),de=g(16718),Je=g(11194),me=g(40965),Ee=g(11036),ne=g(81798),st=g(17217),lt=g(28877),ct=g(59778),dt=g(46946),pt=g(17954),ut=g(63977),fn=g(6492),Xe=g(18850),e=g(65879),Ye=g(30481),ie=g(6666);let gt=(()=>{var o;class _{constructor(){}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-copy-on-click\"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,\"p\"),e._uU(1,\"Copied\"),e.qZA())},styles:[\"[_nghost-%COMP%]{display:flex;justify-content:space-around}\"]}),_})();var ft=g(21865);let Ot=(()=>{var o;class _{constructor(t,i,r,a){this.contentLabel=t,this.window=i,this.document=r,this.snackBar=a}onClick(){const t=this.document.createRange();t.selectNodeContents(this.contentLabel.nativeElement);const r=this.window.getSelection();let a;r.removeAllRanges(),r.addRange(t);try{a=this.document.execCommand(\"copy\")}catch{a=!1}a&&this.openSnackBar()}openSnackBar(){this.snackBar.openFromComponent(gt,{duration:500})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(ie.m9),e.Y36(p.K0),e.Y36(ft.pl))},o.\\\\u0275dir=e.lG2({type:o,selectors:[[\"\",\"appCopyOnClick\",\"\"]],hostBindings:function(t,i){1&t&&e.NdJ(\"click\",function(){return i.onClick()})}}),_})();const Ct=[\"contentLabel\"];function Rt(o,_){1&o&&(e.TgZ(0,\"i\"),e.SDv(1,8),e.qZA())}function Tt(o,_){1&o&&(e.TgZ(0,\"i\"),e.SDv(1,9),e.qZA())}function mt(o,_){1&o&&(e.TgZ(0,\"i\"),e.SDv(1,10),e.qZA())}function Et(o,_){if(1&o&&(e.TgZ(0,\"span\",7),e._uU(1,\"\\\\n    \"),e.YNc(2,Rt,2,0,\"i\",3),e._uU(3,\"\\\\n    \"),e.YNc(4,Tt,2,0,\"i\",3),e._uU(5,\"\\\\n    \"),e.YNc(6,mt,2,0,\"i\",3),e._uU(7,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J(\"ngIf\",\"part-of\"===n.prefixTitle),e.xp6(2),e.Q6J(\"ngIf\",\"funded-by\"===n.prefixTitle),e.xp6(2),e.Q6J(\"ngIf\",\"version-of\"===n.prefixTitle)}}function St(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\u200e(\",n.detail,\")\\\\u200e\")}}function ht(o,_){if(1&o&&(e.TgZ(0,\"p\",11),e._uU(1),e.qZA()),2&o){const n=e.oxw(2);e.Q6J(\"matTooltipPosition\",\"above\"),e.xp6(1),e.hij(\"\\\\n    \",n.content,\"\\\\n  \")}}function Nt(o,_){if(1&o&&(e.TgZ(0,\"p\",12),e._uU(1),e.qZA()),2&o){const n=e.oxw(2);e.xp6(1),e.Oqu(n.content)}}function Mt(o,_){if(1&o&&(e.TgZ(0,\"a\",13),e._uU(1),e.qZA()),2&o){const n=e.oxw(2);e.s9C(\"href\",n.url,e.LSH),e.xp6(1),e.hij(\"\\\\n    \",n.content,\"\\\\n  \")}}const Pt=function(o,_,n){return{\"title-margin\":o,\"secondary-text\":_,\"no-bold\":n}};function bt(o,_){if(1&o&&(e.TgZ(0,\"div\",1),e._uU(1,\"\\\\n  \"),e.YNc(2,Et,8,3,\"span\",2),e._uU(3,\"\\\\n  \"),e.TgZ(4,\"span\"),e._uU(5),e.qZA(),e._uU(6,\"\\\\n  \"),e.YNc(7,St,2,1,\"ng-container\",3),e._uU(8,\"\\\\n  \"),e.YNc(9,ht,2,2,\"p\",4),e._uU(10,\"\\\\n  \"),e.YNc(11,Nt,2,1,\"p\",5),e._uU(12,\"\\\\n\\\\n  \"),e.YNc(13,Mt,2,2,\"a\",6),e._uU(14,\"\\\\n\"),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"ngClass\",e.kEZ(7,Pt,n.titleMargin,n.secondaryText,n.noBoldTitle)),e.xp6(2),e.Q6J(\"ngIf\",n.prefixTitle),e.xp6(3),e.Oqu(n.title),e.xp6(2),e.Q6J(\"ngIf\",n.detail),e.xp6(2),e.Q6J(\"ngIf\",!n.url&&n.copyOnClick),e.xp6(2),e.Q6J(\"ngIf\",!n.url&&!n.copyOnClick),e.xp6(2),e.Q6J(\"ngIf\",n.url)}}let qe=(()=>{var o;class _{set marginBotton(t){this._marginBotton=t}get marginBotton(){return this._marginBotton}set content(t){this._content=t}get content(){return this._content}set secondaryText(t){this._secondaryText=t,this._primaryText=!t}get secondaryText(){return this._secondaryText}constructor(){this.noBoldTitle=!1,this.copyOnClick=!1,this.titleMargin=!0,this._marginBotton=!0,this._secondaryText=!1,this._primaryText=!0}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-panel-data-line\"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ct,5),2&t){let r;e.iGM(r=e.CRH())&&(i.contentLabel=r.first)}},hostVars:6,hostBindings:function(t,i){2&t&&e.ekj(\"margin-botton\",i._marginBotton)(\"secondary-text\",i._secondaryText)(\"primary-text\",i._primaryText)},inputs:{noBoldTitle:\"noBoldTitle\",url:\"url\",title:\"title\",detail:\"detail\",copyOnClick:\"copyOnClick\",titleMargin:\"titleMargin\",prefixTitle:\"prefixTitle\",marginBotton:\"marginBotton\",content:\"content\",secondaryText:\"secondaryText\"},decls:2,vars:1,consts:function(){let n,t,i;return n=\"Part of\",t=\"Funded by\",i=\"Version of\",[[\"class\",\"orc-font-body-small\",3,\"ngClass\",4,\"ngIf\"],[1,\"orc-font-body-small\",3,\"ngClass\"],[\"class\",\"prefixTitle\",4,\"ngIf\"],[4,\"ngIf\"],[\"class\",\"mat-body-1\",\"appCopyOnClick\",\"\",\"matTooltip\",\"Click to Copy\",3,\"matTooltipPosition\",4,\"ngIf\"],[\"class\",\"mat-body-1\",4,\"ngIf\"],[\"class\",\"underline mat-body-1\",\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",3,\"href\",4,\"ngIf\"],[1,\"prefixTitle\"],n,t,i,[\"appCopyOnClick\",\"\",\"matTooltip\",\"Click to Copy\",1,\"mat-body-1\",3,\"matTooltipPosition\"],[1,\"mat-body-1\"],[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"underline\",\"mat-body-1\",3,\"href\"]]},template:function(t,i){1&t&&(e.YNc(0,bt,15,11,\"div\",0),e._uU(1,\"\\\\n\")),2&t&&e.Q6J(\"ngIf\",i.title)},dependencies:[p.mk,p.O5,Ye.Kd,Ot],styles:[\"h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{display:inline}[_nghost-%COMP%]{display:block}.prefixTitle[_ngcontent-%COMP%]{display:inline}.prefixTitle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:3px}h5.no-bold[_ngcontent-%COMP%]{font-weight:400}\"]}),_})();function At(o,_){if(1&o&&(e.ynx(0),e._UZ(1,\"app-panel-data-line\",1),e.ALo(2,\"uppercase\"),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.s9C(\"title\",e.lcZ(2,8,n.externalIdentifierType.value+\":\")),e.Q6J(\"prefixTitle\",null==n||null==n.relationship?null:n.relationship.value)(\"content\",(null==n.externalIdentifierId?null:n.externalIdentifierId.value)||t.undefinedIdLabel)(\"url\",(null==n.normalizedUrl?null:n.normalizedUrl.value)||(null==n.url?null:n.url.value))(\"titleMargin\",!1)(\"secondaryText\",!0)(\"marginBotton\",!1)(\"noBoldTitle\",t.noBoldTitle)}}let fe=(()=>{var o;class _{constructor(){this.noBoldTitle=!1,this.undefinedIdLabel=\"undefined id\"}ngOnInit(){}getExternalIdentifiers(){var i;const t=[];if((null==(i=this.externalIdentifiers)?void 0:i.length)>0){const r=this.externalIdentifiers.filter(l=>{var c;return\"doi\"===(null==(c=l.externalIdentifierType)?void 0:c.value)}),a=this.externalIdentifiers.filter(l=>{var c;return\"source-work-id\"===(null==(c=l.externalIdentifierType)?void 0:c.value)}),s=this.externalIdentifiers.filter(l=>{var c,u;return\"doi\"!==(null==(c=l.externalIdentifierType)?void 0:c.value)&&\"source-work-id\"!==(null==(u=l.externalIdentifierType)?void 0:u.value)});t.push(...r,...a,...s)}else this.externalIdentifier&&(this.externalIdentifiers=Array.of(this.externalIdentifier));return t}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-display-external-ids\"]],inputs:{externalIdentifiers:\"externalIdentifiers\",noBoldTitle:\"noBoldTitle\",externalIdentifier:\"externalIdentifier\"},decls:1,vars:1,consts:[[4,\"ngFor\",\"ngForOf\"],[3,\"prefixTitle\",\"title\",\"content\",\"url\",\"titleMargin\",\"secondaryText\",\"marginBotton\",\"noBoldTitle\"]],template:function(t,i){1&t&&e.YNc(0,At,3,10,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",i.getExternalIdentifiers())},dependencies:[p.sg,qe,p.gd]}),_})();var ze=g(11362),He=g(74191),On=g(34572),Cn=g(89188),_e=g(88165),I=g(34221),Se=g(51418),x=g(19352),Ve=g(17927),It=g(75222),k=g(88419),w=g(72079),Rn=g(95972),D=g(71142),H=g(6152),V=g(20553),Tn=g(6593),xt=g(25180);let yt=(()=>{var o;class _{constructor(t,i){this.meta=t,this._titleService=i,this.openGraphDataSet=!1,this.titleMeta=\"og:title\",this.descriptionMeta=\"og:description\",this.imageMeta=\"og:image\",this.typeMeta=\"og:type\",this.urlMeta=\"og:url\",this.firstNameMeta=\"profile:first_name\",this.lastNameMeta=\"profile:last_name\",this.usernameMeta=\"profile:username\",this.siteNameMeta=\"og:site_name\"}addOpenGraphData(t,i){var r,a,s,l;if(t.userInfo&&void 0!==t.names&&void 0!==t.userInfo&&!t.userInfo.RECORD_WITH_ISSUES&&(!this.openGraphDataSet||i.force)){this.removeOpenGraphData(),this.openGraphDataSet=!0;try{const{displayedNameWithId:c,displayedName:u}=this.getDisplayNames(t.names,t.userInfo.EFFECTIVE_USER_ORCID);return void 0!==c&&\"undefined\"!==c&&this._titleService.setDisplayName(c),this.meta.addTags([{property:this.titleMeta,content:c},{property:this.descriptionMeta,content:\"ORCID record for\"+\" \"+(u||c)+\". \"+\"ORCID provides an identifier for individuals to use with their name as they engage in research, scholarship, and innovation activities.\"},{property:this.typeMeta,content:\"profile\"},{property:this.urlMeta,content:\"https:\"+V.N.BASE_URL+t.userInfo.EFFECTIVE_USER_ORCID},{property:this.firstNameMeta,content:(null==(a=null==(r=t.names)?void 0:r.givenNames)?void 0:a.value)||\"\"},{property:this.lastNameMeta,content:(null==(l=null==(s=t.names)?void 0:s.familyName)?void 0:l.value)||\"\"},{property:this.usernameMeta,content:t.userInfo.EFFECTIVE_USER_ORCID},{property:this.siteNameMeta,content:\"ORCID\"},{property:this.imageMeta,content:\"https:\"+V.N.BASE_URL+\"assets/img/orcid-og-image.png\"}])}catch{this.openGraphDataSet=!1}}}getDisplayNames(t,i){var s,l,c;let r=\"\";null!=t&&t.creditName?r=t.creditName.value:null!=(s=null==t?void 0:t.givenNames)&&s.value&&null!=(l=null==t?void 0:t.familyName)&&l.value?r=`${t.givenNames.value} ${t.familyName.value}`:null!=(c=null==t?void 0:t.givenNames)&&c.value&&(r=`${t.givenNames.value}`),r=r.trim();let a=\"\";return a=\"\"!==r?`${r} (${i})`:`${i}`,{displayedNameWithId:a,displayedName:r}}removeOpenGraphData(){this.meta.removeTag(`property=\"${this.titleMeta}\"`),this.meta.removeTag(`property=\"${this.descriptionMeta}\"`),this.meta.removeTag(`property=\"${this.imageMeta}\"`),this.meta.removeTag(`property=\"${this.typeMeta}\"`),this.meta.removeTag(`property=\"${this.urlMeta}\"`),this.meta.removeTag(`property=\"${this.firstNameMeta}\"`),this.meta.removeTag(`property=\"${this.lastNameMeta}\"`),this.meta.removeTag(`property=\"${this.usernameMeta}\"`),this.meta.removeTag(`property=\"${this.siteNameMeta}\"`),this.openGraphDataSet=!1}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.LFG(Tn.h_),e.LFG(xt.y))},o.\\\\u0275prov=e.Yz7({token:o,factory:o.\\\\u0275fac,providedIn:\"root\"}),_})();var kt=g(31205),vt=g(79951),Dt=g.n(vt);let wt=(()=>{var o;class _{getNumberOfValidatedEmails(t){return{numberOfValidatedEmails:null==t?void 0:t.filter(i=>!0===i.verified).length,numberOfUnvalidatedEmails:null==t?void 0:t.filter(i=>!1===i.verified).length}}constructor(t){this.window=t}initializeHelpHero(t,i){var r,a,s,l,c,u;if(null!=t&&t.EFFECTIVE_USER_ORCID&&null!=(r=null==i?void 0:i.emails)&&r.emails&&null!=i&&i.names&&null!=i&&i.affiliations&&null!=i&&i.works&&!this.hlp&&!this.window.Cypress){this.modifyHelpHeroScriptOnCreate(),this.hlp=Dt()(V.N.HELP_HERO_ID);const O={numberOfValidatedEmails:this.getNumberOfValidatedEmails(null==(a=null==i?void 0:i.emails)?void 0:a.emails).numberOfValidatedEmails,numberOfUnvalidatedEmails:this.getNumberOfValidatedEmails(null==(s=null==i?void 0:i.emails)?void 0:s.emails).numberOfUnvalidatedEmails,givenNames:null==(l=i.names.givenNames)?void 0:l.value,familyName:null==(c=i.names.familyName)?void 0:c.value,publishedName:null==(u=i.names.creditName)?void 0:u.value,orcid:t.EFFECTIVE_USER_ORCID,isDelegated:t.EFFECTIVE_USER_ORCID!==t.REAL_USER_ORCID,hasAffiliations:!!this.affiliationsCount(i.affiliations),hasWorks:!!this.worksCount(i.works),displayName:this.getDisplayNames(i.names)};this.hlp.identify(t.EFFECTIVE_USER_ORCID,O)}}modifyHelpHeroScriptOnCreate(){new MutationObserver((i,r)=>{const a=document.getElementById(\"helphero-dom\");if(a)return this.handleHelpHeroChanges(a),void r.disconnect()}).observe(document,{childList:!0,subtree:!0})}handleHelpHeroChanges(t){this.window.document.querySelector(\"app-root\").insertAdjacentElement(\"beforebegin\",t),t.setAttribute(\"aria-hidden\",\"true\")}affiliationsCount(t){return t.reduce((i,r)=>i+r.affiliationGroup.length,0)}worksCount(t){return t.totalGroups}getDisplayNames(t){var r,a,s;let i=\"\";return null!=t&&t.creditName?i=t.creditName.value:null!=(r=null==t?void 0:t.givenNames)&&r.value&&null!=(a=null==t?void 0:t.familyName)&&a.value?i=`${t.givenNames.value} ${t.familyName.value}`:null!=(s=null==t?void 0:t.givenNames)&&s.value&&(i=`${t.givenNames.value}`),i=i.trim(),i}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.LFG(ie.m9))},o.\\\\u0275prov=e.Yz7({token:o,factory:o.\\\\u0275fac,providedIn:\"root\"}),_})();var j=g(12160),re=g(23738),Lt=g(54699);let $t=(()=>{var o;class _{constructor(){this.scripts=[]}load(t){return new Lt.y(i=>{const r=this.scripts.find(a=>a.name===t.name);if(r)i.next(r),i.complete();else{this.scripts=[...this.scripts,t];const a=document.createElement(\"script\");a.type=\"text/javascript\",a.src=t.src,a.onload=()=>{t.loaded=!0,i.next(t),i.complete()},a.onerror=s=>{i.error(\"Couldn\\'t load script \"+t.src)},document.getElementsByTagName(\"head\")[0].appendChild(a)}})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275prov=e.Yz7({token:o,factory:o.\\\\u0275fac,providedIn:\"root\"}),_})();var Ut=g(97734),we=g(96124);let Zt=(()=>{var o;class _{constructor(t,i){this.doc=t,this._router=i,this.init()}init(){this._router.events.pipe((0,Ut.h)(t=>t instanceof _e.m2),(0,we.U)(t=>t)).subscribe(t=>{(null!=t&&t.url.startsWith(\"/my-orcid\")||!I.Rs.test(null==t?void 0:t.url))&&this.removeCanonicalUrl()})}setCanonicalUrl(t){this.removeCanonicalUrl();let i=\"https:\"+V.N.BASE_URL+(V.N.BASE_URL.endsWith(\"/\")?t:\"/\"+t),r=this.doc.createElement(\"link\");r.setAttribute(\"rel\",\"canonical\"),r.setAttribute(\"href\",i),this.doc.head.appendChild(r)}removeCanonicalUrl(){this.doc.head.querySelectorAll(\"link\").forEach(t=>{let i=t.getAttribute(\"rel\");i&&\"canonical\"==i&&t.parentNode.removeChild(t)})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.LFG(p.K0),e.LFG(_e.F0))},o.\\\\u0275prov=e.Yz7({token:o,factory:o.\\\\u0275fac,providedIn:\"root\"}),_})();var Wt=g(88568);function Ft(o,_){1&o&&(e.TgZ(0,\"div\",3),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"a\",4),e.SDv(3,5),e.qZA(),e._uU(4,\"\\\\n    \"),e.qZA())}let Gt=(()=>{var o;class _{constructor(t){this.labelStatistics=\"statistics\",t.getTogglz().subscribe(i=>{this.togglz=i})}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(re.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-statistics\"]],decls:8,vars:2,consts:function(){let n;return n=\"How many people are using ORCID?\",[[1,\"statics\",\"container\"],[1,\"row\"],[\"class\",\"row middle mat-caption\",4,\"ngIf\"],[1,\"row\",\"middle\",\"mat-caption\"],[\"href\",\"https://info.orcid.org/orcid-statistics/\",\"target\",\"_blank\",\"rel\",\"noopener noreferrer\"],n]},template:function(t,i){1&t&&(e.TgZ(0,\"section\",0),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"div\",1),e._uU(3,\"\\\\n    \"),e.YNc(4,Ft,5,0,\"div\",2),e._uU(5,\"\\\\n  \"),e.qZA(),e._uU(6,\"\\\\n\"),e.qZA(),e._uU(7,\"\\\\n\")),2&t&&(e.uIk(\"aria-label\",i.labelStatistics),e.xp6(4),e.Q6J(\"ngIf\",i.togglz))},dependencies:[p.O5],styles:[\".statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{text-align:left;display:block;margin-bottom:8px}[dir=rtl]   [_nghost-%COMP%]   .statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{text-align:right}.columns-8   [_nghost-%COMP%]   .statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%], .columns-4   [_nghost-%COMP%]   .statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{text-align:left;margin-bottom:4px;margin-top:4px}[dir=rtl]   .columns-8   [_nghost-%COMP%]   .statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%], [dir=rtl]   .columns-4   [_nghost-%COMP%]   .statics[_ngcontent-%COMP%]   .mat-caption[_ngcontent-%COMP%]{text-align:right}\"]}),_})();var Kt=g(2211),Le=g(6990),J=g(27599),Bt=g(15017),$e=g(45192),ae=g(38649),Ue=g(90421),se=g(73720),Qt=g(5345),mn=g(36598);const Jt=[[[\"\",\"title\",\"\"]],[[\"\",\"content\",\"\"]]],Xt=function(o,_){return{\"orc-font-body-small\":o,\"orc-font-small-print\":_}},Yt=[\"[title]\",\"[content]\"];let qt=(()=>{var o;class _{constructor(t){this.icon=\"info\",this.$destroy=new w.xQ,t.get().pipe((0,x.R)(this.$destroy)).subscribe(i=>{this.isMobile=i.columns4||i.columns8})}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-warning-message\"]],inputs:{icon:\"icon\"},ngContentSelectors:Yt,decls:9,vars:5,consts:[[1,\"container-text-and-icon\",3,\"ngClass\"],[1,\"col\"],[1,\"text-container\"]],template:function(t,i){1&t&&(e.F$t(Jt),e.TgZ(0,\"div\",0)(1,\"div\",1)(2,\"mat-icon\"),e._uU(3),e.qZA()(),e.TgZ(4,\"div\",2)(5,\"strong\"),e.Hsn(6),e.qZA(),e.TgZ(7,\"p\"),e.Hsn(8,1),e.qZA()()()),2&t&&(e.Q6J(\"ngClass\",e.WLB(2,Xt,!i.isMobile,i.isMobile)),e.xp6(3),e.Oqu(i.icon))},dependencies:[p.mk,y.Hw],styles:[\".container-text-and-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row}.container-text-and-icon[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container-text-and-icon[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;margin-top:4px}[_nghost-%COMP%]{border:1px solid;padding:14px;width:100%}\",\"[_nghost-%COMP%]{border-color:#ff9c00!important}.container-text-and-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9c00!important}\"]}),_})();var zt=g(70773);const Ht=function(){return[\"/signin\"]};function Vt(o,_){if(1&o&&(e.TgZ(0,\"div\",4)(1,\"mat-icon\",5),e._uU(2,\"account_circle\"),e.qZA(),e.TgZ(3,\"p\"),e.SDv(4,6),e.qZA(),e.TgZ(5,\"a\",7),e.SDv(6,8),e.qZA()()),2&o){const n=e.oxw();e.xp6(1),e.uIk(\"aria-label\",null==n.userRecord||null==n.userRecord.userInfo?null:n.userRecord.userInfo.EFFECTIVE_USER_ORCID),e.xp6(2),e.uIk(\"aria-label\",n.labelIsThisYou),e.xp6(2),e.Q6J(\"routerLink\",e.DdM(4,Ht)),e.uIk(\"aria-label\",(n.ariaLabelName?n.ariaLabelName:null==n.userRecord||null==n.userRecord.userInfo?null:n.userRecord.userInfo.EFFECTIVE_USER_ORCID)+\" \"+n.labelSignInToStart)}}function jt(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",9)(1,\"button\",10),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.printRecord())}),e.TgZ(2,\"mat-icon\",11),e._uU(3,\" print\"),e.qZA(),e.ynx(4),e.SDv(5,12),e.BQk(),e.qZA()()}if(2&o){const n=e.oxw();e.xp6(1),e.uIk(\"aria-label\",n.labelPrintableVersion)}}function eo(o,_){1&o&&e._UZ(0,\"mat-divider\")}let no=(()=>{var o;class _{constructor(t,i){this.window=t,this.labelPrintableVersion=\"View printable version (Opens of a different tab)\",this.labelIsThisYou=\"Is this you?\",this.labelSignInToStart=\"Is this you?\"+\" \"+\"Sign in to start editing\",this.$destroy=new w.xQ,this.showPrintButton=!1,this.showIsThisYouButton=!1,i.get().pipe((0,x.R)(this.$destroy)).subscribe(r=>{this.platform=r})}ngOnInit(){}ngOnDestroy(){this.$destroy.next()}printRecord(){var t,i;this.window.open(V.N.BASE_URL+(null==(i=null==(t=this.userRecord)?void 0:t.userInfo)?void 0:i.EFFECTIVE_USER_ORCID)+\"/print\")}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(ie.m9),e.Y36(D.tu))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-top-bar-actions\"]],inputs:{userRecord:\"userRecord\",ariaLabelName:\"ariaLabelName\",userStatus:\"userStatus\",isPublicRecord:\"isPublicRecord\",showPrintButton:\"showPrintButton\",showIsThisYouButton:\"showIsThisYouButton\"},decls:4,vars:3,consts:function(){let n,t,i;return n=\"Is this you?\",t=\"Sign in to start editing\",i=\"Printable version\",[[1,\"container\"],[\"class\",\"is-this-you orc-font-body-small\",4,\"ngIf\"],[\"class\",\"my-orcid-icons\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"is-this-you\",\"orc-font-body-small\"],[1,\"large-material-icon\"],n,[1,\"underline\",3,\"routerLink\"],t,[1,\"my-orcid-icons\"],[\"mat-icon-button\",\"\",1,\"orc-font-small-print\",3,\"click\"],[\"fontSet\",\"material-icons-outlined\",1,\"icon\"],i]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0),e.YNc(1,Vt,7,5,\"div\",1),e.YNc(2,jt,6,1,\"div\",2),e.qZA(),e.YNc(3,eo,1,0,\"mat-divider\",3)),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",i.isPublicRecord&&!(null!=i.userStatus&&i.userStatus.loggedIn)&&!i.showPrintButton),e.xp6(1),e.Q6J(\"ngIf\",!i.showIsThisYouButton),e.xp6(1),e.Q6J(\"ngIf\",!i.platform.columns12))},dependencies:[p.O5,_e.rH,y.Hw,A.eB,Q.d],styles:[\".container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0;margin:0 0 16px}.container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}.container[_ngcontent-%COMP%]   .is-this-you[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.container[_ngcontent-%COMP%]   .is-this-you[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;margin-inline-end:4px}.container[_ngcontent-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]{width:100%;text-align:right}.container[_ngcontent-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto;margin-right:40px;padding-right:3px}.container[_ngcontent-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:20px;margin-right:6px}.container[_ngcontent-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.container[_ngcontent-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{border-radius:0}.columns-4   [_nghost-%COMP%]   .container[_ngcontent-%COMP%], .columns-8   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;margin-bottom:-10px}.columns-4   [_nghost-%COMP%]   .is-this-you[_ngcontent-%COMP%], .columns-8   [_nghost-%COMP%]   .is-this-you[_ngcontent-%COMP%]{width:auto;margin-top:16px;margin-bottom:32px}.columns-4   [_nghost-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%], .columns-8   [_nghost-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.columns-4   [_nghost-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .columns-8   [_nghost-%COMP%]   .my-orcid-icons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.columns-4   [_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%], .columns-8   [_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}[_nghost-%COMP%]{width:100%}\"]}),_})();function to(o,_){1&o&&(e.ynx(0),e.SDv(1,1),e.BQk())}function oo(o,_){1&o&&e._UZ(0,\"br\")}function io(o,_){1&o&&(e.ynx(0),e.SDv(1,2),e.BQk())}function _o(o,_){if(1&o&&(e.TgZ(0,\"p\"),e._uU(1,\"\\\\n    \"),e.ynx(2),e.SDv(3,3),e.BQk(),e._uU(4,\"\\\\n    \"),e.TgZ(5,\"a\",4),e._uU(6),e.qZA(),e._uU(7,\"\\\\n    \"),e.ynx(8),e.SDv(9,5),e.BQk(),e._uU(10,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(5),e.Q6J(\"href\",n.userInfo.PRIMARY_RECORD,e.LSH),e.xp6(1),e.Oqu(\"https:\"+n.baseUrl+n.userInfo.PRIMARY_RECORD)}}function ro(o,_){if(1&o&&(e.TgZ(0,\"mat-error\"),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"mat-icon\"),e._uU(3,\"error\"),e.qZA(),e._uU(4,\"\\\\n  \"),e.YNc(5,to,2,0,\"ng-container\",0),e._uU(6,\"\\\\n  \"),e.YNc(7,oo,1,0,\"br\",0),e._uU(8,\"\\\\n  \"),e.YNc(9,io,2,0,\"ng-container\",0),e._uU(10,\"\\\\n\\\\n  \"),e.YNc(11,_o,11,2,\"p\",0),e._uU(12,\"\\\\n\"),e.qZA()),2&o){const n=e.oxw();e.xp6(5),e.Q6J(\"ngIf\",\"true\"===n.userInfo.IS_DEACTIVATED&&!n.userInfo.PRIMARY_RECORD),e.xp6(2),e.Q6J(\"ngIf\",\"true\"===n.userInfo.IS_DEACTIVATED&&!n.userInfo.PRIMARY_RECORD&&\"true\"===n.userInfo.IS_LOCKED),e.xp6(2),e.Q6J(\"ngIf\",\"true\"===n.userInfo.IS_LOCKED),e.xp6(2),e.Q6J(\"ngIf\",n.userInfo.PRIMARY_RECORD)}}let ao=(()=>{var o;class _{constructor(t){this._record=t,this.$destroy=new w.xQ,this.baseUrl=V.N.BASE_URL}ngOnInit(){this._record.getRecord({publicRecordId:this.isPublicRecord||void 0}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.userInfo=null==t?void 0:t.userInfo})}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(H.B))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-top-bar-record-issues\"]],inputs:{isPublicRecord:\"isPublicRecord\"},decls:2,vars:1,consts:function(){let n,t,i,r;return n=\"This ORCID Record is deactivated\",t=\"This ORCID Record is locked\",i=\"This account has been deprecated, please see account\",r=\"for the latest information\",[[4,\"ngIf\"],n,t,i,[3,\"href\"],r]},template:function(t,i){1&t&&(e.YNc(0,ro,13,4,\"mat-error\",0),e._uU(1,\"\\\\n\")),2&t&&e.Q6J(\"ngIf\",null==i.userInfo?null:i.userInfo.RECORD_WITH_ISSUES)},dependencies:[p.O5,y.Hw,h.nI],styles:[\"mat-error[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:30px}mat-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}\"]}),_})();var X=g(83362);function so(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",5)}function lo(o,_){if(1&o&&e._UZ(0,\"app-top-bar-actions\",6),2&o){const n=e.oxw();e.Q6J(\"ariaLabelName\",n.ariaLabelName)(\"userRecord\",n.userRecord)(\"userStatus\",n.userStatus)(\"isPublicRecord\",n.isPublicRecord)(\"showPrintButton\",!n.platform.columns12)}}function co(o,_){1&o&&(e.TgZ(0,\"app-warning-message\"),e._uU(1,\"\\\\n    \"),e.ynx(2,9),e.SDv(3,10),e.BQk(),e._uU(4,\"\\\\n    \"),e.ynx(5,11)(6),e.SDv(7,12),e.BQk(),e._uU(8,\"\\\\n      \"),e.TgZ(9,\"a\",13),e.SDv(10,14),e.qZA(),e._uU(11,\"\\\\n      \"),e.ynx(12),e.SDv(13,15),e.BQk(),e._uU(14,\"\\\\n    \"),e.BQk(),e._uU(15,\"\\\\n  \"),e.qZA())}function po(o,_){if(1&o&&(e.TgZ(0,\"h1\",25),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"span\",26),e.SDv(3,27),e.qZA(),e._uU(4,\"\\\\n            \"),e.TgZ(5,\"p\",28),e._uU(6,\"\\\\n              \"),e.TgZ(7,\"b\",29),e._uU(8),e.qZA(),e._uU(9,\"\\\\n            \"),e.qZA(),e._uU(10,\"\\\\n          \"),e.qZA()),2&o){const n=e.oxw(3);e.xp6(8),e.hij(\"\\\\n                \",n.creditName,\"\\\\n              \")}}function uo(o,_){if(1&o&&(e.TgZ(0,\"app-panel-element\",33),e._uU(1,\"\\\\n              \"),e.TgZ(2,\"p\",34),e._uU(3),e.qZA(),e._uU(4,\"\\\\n            \"),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"visibility\",n.visibility.visibility),e.xp6(3),e.hij(\"\\\\n                \",n.content,\"\\\\n              \")}}function go(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.TgZ(2,\"div\",30),e._uU(3,\"\\\\n            \"),e.TgZ(4,\"span\",22),e.SDv(5,31),e.qZA(),e._uU(6,\"\\\\n            \"),e.YNc(7,uo,5,2,\"app-panel-element\",32),e._uU(8,\"\\\\n          \"),e.qZA(),e._uU(9,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(7),e.Q6J(\"ngForOf\",n.userRecord.otherNames.otherNames)}}function fo(o,_){if(1&o&&(e.TgZ(0,\"section\",16),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-panel\",17),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h2\",18),e.SDv(5,19),e.qZA(),e._uU(6,\"\\\\n      \"),e.TgZ(7,\"app-panel-data\"),e._uU(8,\"\\\\n        \"),e.TgZ(9,\"app-panel-element\",20),e._uU(10,\"\\\\n          \"),e.YNc(11,po,11,1,\"h1\",21),e._uU(12,\"\\\\n          \"),e.TgZ(13,\"span\",22),e.SDv(14,23),e.qZA(),e._uU(15,\"\\\\n          \"),e.TgZ(16,\"div\",24),e._uU(17),e.qZA(),e._uU(18,\"\\\\n        \"),e.qZA(),e._uU(19,\"\\\\n        \"),e.YNc(20,go,10,1,\"ng-container\",4),e._uU(21,\"\\\\n      \"),e.qZA(),e._uU(22,\"\\\\n    \"),e.qZA(),e._uU(23,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.uIk(\"aria-label\",n.regionNames),e.xp6(2),e.Q6J(\"isPublicRecord\",n.isPublicRecord)(\"elements\",n.userRecord.names.givenNames)(\"editModalComponent\",n.modalNameComponent)(\"userRecord\",n.userRecord)(\"type\",\"top-bar\")(\"id\",null==n.userInfo?null:n.userInfo.EFFECTIVE_USER_ORCID)(\"names\",!0),e.xp6(7),e.Q6J(\"visibility\",n.userRecord.names.visibility.visibility),e.xp6(2),e.Q6J(\"ngIf\",n.creditName),e.xp6(6),e.hij(\"\\\\n            \",n.givenNames+\" \"+n.familyName,\"\\\\n          \"),e.xp6(3),e.Q6J(\"ngIf\",(null==n.userRecord||null==n.userRecord.otherNames||null==n.userRecord.otherNames.otherNames?null:n.userRecord.otherNames.otherNames.length)>0)}}function Oo(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\"),e._uU(1,\"\\\\n        \"),e.TgZ(2,\"app-panel-element\"),e._uU(3,\"\\\\n          \"),e._UZ(4,\"span\",39),e._uU(5,\"\\\\n        \"),e.qZA(),e._uU(6,\"\\\\n      \"),e.qZA()),2&o){const n=e.oxw(3);e.xp6(4),e.Q6J(\"innerText\",n.userRecord.biography.biography.value)}}function Co(o,_){if(1&o&&(e.TgZ(0,\"section\",35),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-panel\",36),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h2\",37),e.SDv(5,38),e.qZA(),e._uU(6,\"\\\\n      \"),e.YNc(7,Oo,7,1,\"app-panel-data\",4),e._uU(8,\"\\\\n    \"),e.qZA(),e._uU(9,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.uIk(\"aria-label\",n.regionBiography),e.xp6(2),e.Q6J(\"elements\",n.userRecord.biography.biography)(\"editModalComponent\",n.modalBiographyComponent)(\"userRecord\",n.userRecord)(\"type\",\"top-bar\")(\"visibility\",n.userRecord.biography.visibility.visibility)(\"editableVisibilityControl\",!0),e.xp6(5),e.Q6J(\"ngIf\",!!n.userRecord.biography.biography)}}function Ro(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n  \"),e.YNc(2,co,16,0,\"app-warning-message\",4),e._uU(3,\"\\\\n\\\\n  \"),e.YNc(4,fo,24,12,\"section\",7),e._uU(5,\"\\\\n  \"),e.YNc(6,Co,10,8,\"section\",8),e._uU(7,\"\\\\n\"),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",\"true\"===(null==n.userInfo?null:n.userInfo.LOCKED)),e.xp6(2),e.Q6J(\"ngIf\",null==n.userRecord?null:n.userRecord.names),e.xp6(2),e.Q6J(\"ngIf\",null==n.userRecord?null:n.userRecord.biography)}}function To(o,_){if(1&o&&(e.TgZ(0,\"div\",49),e._uU(1,\"\\\\n          \"),e.TgZ(2,\"div\",50),e.SDv(3,51),e.qZA(),e._uU(4,\"\\\\n          \"),e.TgZ(5,\"h1\",52),e._uU(6),e.qZA(),e._uU(7,\"\\\\n        \"),e.qZA()),2&o){const n=e.oxw(3);e.xp6(6),e.Oqu(n.creditName)}}function mo(o,_){if(1&o&&(e.TgZ(0,\"div\",49),e._uU(1,\"\\\\n          \"),e.TgZ(2,\"div\",50),e.SDv(3,53),e.qZA(),e._uU(4,\"\\\\n          \"),e.TgZ(5,\"h1\",52),e._uU(6),e.qZA(),e._uU(7,\"\\\\n        \"),e.qZA()),2&o){const n=e.oxw(3);e.xp6(6),e.hij(\"\\\\n            \",n.givenNames+\" \"+n.familyName,\"\\\\n          \")}}function Eo(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(4);e.xp6(1),e.hij(\"\\\\n                  \",n.givenNames+\" \",\"\\\\n                \")}}const So=function(o,_,n){return{col:o,\"row mobile\":_,\"names-extended\":n}};function ho(o,_){if(1&o&&(e.TgZ(0,\"div\",54),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"div\",55),e._uU(3,\"\\\\n              \"),e.TgZ(4,\"div\",22),e.SDv(5,56),e.qZA(),e._uU(6,\"\\\\n              \"),e.TgZ(7,\"div\",57),e._uU(8,\"\\\\n                \"),e.YNc(9,Eo,2,1,\"ng-container\",4),e._uU(10),e.qZA(),e._uU(11,\"\\\\n            \"),e.qZA(),e._uU(12,\"\\\\n          \"),e.qZA()),2&o){const n=e.oxw(3);e.Q6J(\"ngClass\",e.kEZ(3,So,n.platform.columns12,!n.platform.columns12,n.expandedContent)),e.xp6(9),e.Q6J(\"ngIf\",n.givenNames),e.xp6(1),e.hij(\"\\\\n                \",n.familyName,\"\\\\n              \")}}function No(o,_){if(1&o&&(e.TgZ(0,\"p\",57),e._uU(1),e.qZA()),2&o){const n=e.oxw(4);e.xp6(1),e.hij(\"\\\\n                    \",n.getOtherNamesUnique(null==n.userRecord.otherNames?null:n.userRecord.otherNames.otherNames),\"\\\\n                  \")}}function Mo(o,_){if(1&o&&(e.TgZ(0,\"app-panel-element-source\",71),e.ALo(1,\"monthDayYearDateToString\"),e._uU(2,\"\\\\n                      \"),e.qZA()),2&o){const n=e.oxw(2),i=n.$implicit;e.Q6J(\"isLastItem\",n.last)(\"name\",i.sourceName||i.source)(\"date\",e.lcZ(1,4,i.createdDate))(\"assertion\",i.assertionOriginName||i.assertionOriginOrcid)}}function Po(o,_){if(1&o&&(e.TgZ(0,\"div\",68),e._uU(1,\"\\\\n                      \"),e.TgZ(2,\"div\",69),e._uU(3,\"\\\\n                        \"),e.TgZ(4,\"b\",57),e._uU(5),e.qZA(),e._uU(6,\"\\\\n                      \"),e.qZA(),e._uU(7,\"\\\\n                      \"),e.YNc(8,Mo,3,6,\"app-panel-element-source\",70),e._uU(9,\"\\\\n                    \"),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(5),e.hij(\"\\\\n                          \",n.content,\"\\\\n                        \"),e.xp6(3),e.Q6J(\"ngIf\",!0)}}function bo(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n                    \"),e.YNc(2,Po,10,2,\"div\",67),e._uU(3,\"\\\\n                  \"),e.BQk()),2&o){const n=e.oxw(4);e.xp6(2),e.Q6J(\"ngIf\",n.expandedContent)}}const Ao=function(o,_,n){return{col:o,\"row mobile\":_,\"other-names-no-border\":n}},Io=function(o){return{\"other-names-extended\":o}};function xo(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",58),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"div\",59),e._uU(3,\"\\\\n              \"),e.TgZ(4,\"div\",60),e._uU(5,\"\\\\n                \"),e.TgZ(6,\"div\",61),e._uU(7,\"\\\\n                  \"),e.TgZ(8,\"div\",62),e.SDv(9,63),e.qZA(),e._uU(10,\"\\\\n                  \"),e.YNc(11,No,2,1,\"p\",64),e._uU(12,\"\\\\n                  \"),e.YNc(13,bo,4,1,\"ng-container\",65),e._uU(14,\"\\\\n                \"),e.qZA(),e._uU(15,\"\\\\n              \"),e.qZA(),e._uU(16,\"\\\\n              \"),e.TgZ(17,\"div\"),e._uU(18,\"\\\\n                \"),e.TgZ(19,\"app-panel-expand-buttons\",66),e.NdJ(\"toggle\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.collapse())}),e.qZA(),e._uU(20,\"\\\\n              \"),e.qZA(),e._uU(21,\"\\\\n            \"),e.qZA(),e._uU(22,\"\\\\n          \"),e.qZA()}if(2&o){const n=e.oxw(3);e.Q6J(\"ngClass\",e.kEZ(5,Ao,n.platform.columns12,!n.platform.columns12,n.expandedContent)),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(9,Io,n.expandedContent)),e.xp6(9),e.Q6J(\"ngIf\",!n.expandedContent),e.xp6(2),e.Q6J(\"ngForOf\",null==n.userRecord.otherNames?null:n.userRecord.otherNames.otherNames),e.xp6(6),e.Q6J(\"openState\",n.expandedContent)}}function yo(o,_){if(1&o&&(e.TgZ(0,\"section\",43),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"div\",44),e._uU(3,\"\\\\n        \"),e.YNc(4,To,8,1,\"div\",45),e._uU(5,\"\\\\n        \"),e.YNc(6,mo,8,1,\"div\",45),e._uU(7,\"\\\\n        \"),e.TgZ(8,\"div\",46),e._uU(9,\"\\\\n          \"),e.YNc(10,ho,13,7,\"div\",47),e._uU(11,\"\\\\n          \"),e.YNc(12,xo,23,11,\"div\",48),e._uU(13,\"\\\\n        \"),e.qZA(),e._uU(14,\"\\\\n      \"),e.qZA(),e._uU(15,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw(2);e.Q6J(\"id\",\"names\"),e.uIk(\"aria-label\",n.regionNames),e.xp6(4),e.Q6J(\"ngIf\",n.creditName),e.xp6(2),e.Q6J(\"ngIf\",!n.creditName&&(n.givenNames||n.familyName)),e.xp6(4),e.Q6J(\"ngIf\",n.creditName),e.xp6(2),e.Q6J(\"ngIf\",(null==n.userRecord.otherNames?null:n.userRecord.otherNames.otherNames.length)>0)}}function ko(o,_){if(1&o&&e._UZ(0,\"app-top-bar-actions\",72),2&o){const n=e.oxw(2);e.Q6J(\"ariaLabelName\",n.ariaLabelName)(\"userRecord\",n.userRecord)(\"userStatus\",n.userStatus)(\"isPublicRecord\",n.isPublicRecord)(\"showIsThisYouButton\",!0)}}function vo(o,_){if(1&o&&(e.TgZ(0,\"section\",43),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"div\",73),e._uU(3,\"\\\\n        \"),e.TgZ(4,\"h2\",74),e.SDv(5,75),e.qZA(),e._uU(6,\"\\\\n        \"),e._UZ(7,\"p\",76),e._uU(8,\"\\\\n      \"),e.qZA(),e._uU(9,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw(2);e.Q6J(\"id\",\"biography\"),e.uIk(\"aria-label\",n.regionBiography),e.xp6(7),e.Q6J(\"innerText\",n.userRecord.biography.biography.value)}}const Do=function(o){return{mobile:o}};function wo(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"div\",40),e._uU(3,\"\\\\n    \"),e.YNc(4,yo,16,6,\"section\",41),e._uU(5,\"\\\\n\\\\n    \"),e.YNc(6,ko,1,5,\"app-top-bar-actions\",42),e._uU(7,\"\\\\n\\\\n    \"),e.YNc(8,vo,10,3,\"section\",41),e._uU(9,\"\\\\n  \"),e.qZA(),e._uU(10,\"\\\\n\"),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngClass\",e.VKq(4,Do,!n.platform.columns12)),e.xp6(2),e.Q6J(\"ngIf\",(null==n.userRecord?null:n.userRecord.names)||(null==n.userRecord?null:n.userRecord.otherNames)),e.xp6(2),e.Q6J(\"ngIf\",!n.recordWithIssues&&!n.platform.columns12),e.xp6(2),e.Q6J(\"ngIf\",null==n.userRecord||null==n.userRecord.biography?null:n.userRecord.biography.biography)}}let Lo=(()=>{var o;class _{constructor(t,i,r,a,s,l){this._user=r,this._record=a,this._recordEmails=s,this._verificationEmailModalService=l,this.$destroy=new w.xQ,this.modalNameComponent=Cn.Q,this.modalBiographyComponent=On.D,this.givenNames=\"\",this.familyName=\"\",this.creditName=\"\",this.expandedContent=!1,this.loadingUserRecord=!0,this.regionNames=\"Names\",this.regionBiography=\"Biography\",i.get().pipe((0,x.R)(this.$destroy)).subscribe(c=>{this.platform=c,this.platform.queryParameters.hasOwnProperty(\"justRegistered\")&&(this.justRegistered=!0),this.platform.queryParameters.hasOwnProperty(\"emailVerified\")&&(this.emailVerified=!0)}),r.getUserSession().pipe((0,x.R)(this.$destroy)).subscribe(c=>{this.userStatus=c})}ngOnInit(){this._record.getRecord({publicRecordId:this.isPublicRecord||void 0}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{var i,r;this.recordWithIssues=null==(i=null==t?void 0:t.userInfo)?void 0:i.RECORD_WITH_ISSUES,this.userRecord=t,this.userInfo=null==t?void 0:t.userInfo,(0,Le.isEmpty)(null==(r=this.userRecord)?void 0:r.names)||(this.setNames(),this.getAriaLabelName())})}setNames(){var t,i,r,a,s,l;this.givenNames=null!=(i=null==(t=this.userRecord)?void 0:t.names)&&i.givenNames?this.userRecord.names.givenNames.value:\"\",this.familyName=null!=(a=null==(r=this.userRecord)?void 0:r.names)&&a.familyName?this.userRecord.names.familyName.value:\"\",this.creditName=null!=(l=null==(s=this.userRecord)?void 0:s.names)&&l.creditName?this.userRecord.names.creditName.value:\"\"}getAriaLabelName(){var t,i,r,a,s,l,c,u,O,f,R,T,E,C,N,M,L,W,F,G,B,b;null!=(t=this.userRecord)&&t.names&&(null!=(a=null==(r=null==(i=this.userRecord)?void 0:i.names)?void 0:r.creditName)&&a.value?this.ariaLabelName=null==(c=null==(l=null==(s=this.userRecord)?void 0:s.names)?void 0:l.creditName)?void 0:c.value:(null!=(f=null==(O=null==(u=this.userRecord)?void 0:u.names)?void 0:O.givenNames)&&f.value&&(this.ariaLabelName=null==(E=null==(T=null==(R=this.userRecord)?void 0:R.names)?void 0:T.givenNames)?void 0:E.value),null!=(M=null==(N=null==(C=this.userRecord)?void 0:C.names)?void 0:N.familyName)&&M.value&&(this.ariaLabelName=this.ariaLabelName?this.ariaLabelName+\" \"+(null==(F=null==(W=null==(L=this.userRecord)?void 0:L.names)?void 0:W.familyName)?void 0:F.value):null==(b=null==(B=null==(G=this.userRecord)?void 0:G.names)?void 0:B.familyName)?void 0:b.value)))}getOtherNamesUnique(t){return t.map(i=>i.content).filter(function(i,r,a){return a.map(s=>s.toLowerCase().trim()).indexOf(i.toLowerCase().trim())===r}).join(\", \")}resendVerificationEmailModal(t){this._verificationEmailModalService.openVerificationEmailModal(t)}collapse(){this.expandedContent=!this.expandedContent}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.on),e.Y36(D.tu),e.Y36(j.KD),e.Y36(H.B),e.Y36(Bt.o),e.Y36($e.n))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-top-bar\"]],inputs:{isPublicRecord:\"isPublicRecord\",loadingUserRecord:\"loadingUserRecord\"},decls:13,vars:6,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E;return n=\"Your account has been locked\",t=\"Please contact\",i=\"ORCID support\",r=\"if you believe this account was locked in error.\",a=\"Names\",s=\"Name\",l=\"Published name\",c=\"Also known as\",u=\"Biography\",O=\"Published name\",f=\"Name\",R=\"Name\",T=\"Also known as\",E=\"Biography\",[[\"mode\",\"indeterminate\",\"color\",\"accent\",4,\"ngIf\"],[3,\"isPublicRecord\"],[3,\"ariaLabelName\",\"userRecord\",\"userStatus\",\"isPublicRecord\",\"showPrintButton\",4,\"ngIf\"],[3,\"emailVerified\"],[4,\"ngIf\"],[\"mode\",\"indeterminate\",\"color\",\"accent\"],[3,\"ariaLabelName\",\"userRecord\",\"userStatus\",\"isPublicRecord\",\"showPrintButton\"],[\"id\",\"names\",\"role\",\"region\",4,\"ngIf\"],[\"id\",\"biography\",\"role\",\"region\",4,\"ngIf\"],[\"title\",\"\"],n,[\"content\",\"\"],t,[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",\"href\",\"https://support.orcid.org/\",1,\"underline\"],i,r,[\"id\",\"names\",\"role\",\"region\"],[\"panelId\",\"research-top-bar\",\"id\",\"names-panel\",3,\"isPublicRecord\",\"elements\",\"editModalComponent\",\"userRecord\",\"type\",\"id\",\"names\"],[\"header\",\"\",1,\"names-header\",\"orc-font-body\"],a,[3,\"visibility\"],[\"class\",\"name\",4,\"ngIf\"],[1,\"mat-caption\",\"description\"],s,[\"id\",\"givenAndFamilyNames\",1,\"mat-body-1\"],[1,\"name\"],[1,\"mat-caption\"],l,[1,\"mat-card-title\",\"published-name\"],[\"id\",\"publishedName\"],[1,\"other-names-container\"],c,[\"class\",\"other-names\",3,\"visibility\",4,\"ngFor\",\"ngForOf\"],[1,\"other-names\",3,\"visibility\"],[1,\"mat-body-1\",\"other-names\"],[\"id\",\"biography\",\"role\",\"region\"],[\"panelId\",\"top-bar-2\",\"id\",\"biography-panel\",3,\"elements\",\"editModalComponent\",\"userRecord\",\"type\",\"visibility\",\"editableVisibilityControl\"],[\"header\",\"\",1,\"biography-header\",\"orc-font-body\"],u,[\"id\",\"biography-value\",1,\"mat-body-1\",3,\"innerText\"],[1,\"public-container\",3,\"ngClass\"],[\"role\",\"region\",3,\"id\",4,\"ngIf\"],[3,\"ariaLabelName\",\"userRecord\",\"userStatus\",\"isPublicRecord\",\"showIsThisYouButton\",4,\"ngIf\"],[\"role\",\"region\",3,\"id\"],[1,\"row\",\"names-container\"],[\"class\",\"published-name\",4,\"ngIf\"],[1,\"row\",\"names-wrapper\"],[\"class\",\"names\",3,\"ngClass\",4,\"ngIf\"],[\"class\",\"other-names\",3,\"ngClass\",4,\"ngIf\"],[1,\"published-name\"],[1,\"row\",\"mat-caption\",\"description\"],O,[1,\"name\",\"orc-font-heading-small\"],f,[1,\"names\",3,\"ngClass\"],[1,\"names-content\"],R,[1,\"orc-font-body-small\"],[1,\"other-names\",3,\"ngClass\"],[1,\"row\",\"space-between\",3,\"ngClass\"],[1,\"col\",\"l10\",\"mat-caption\",\"other-names-wrapper\"],[1,\"other-names-content\"],[1,\"description\"],T,[\"class\",\"orc-font-body-small\",4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"],[\"panelType\",\"top-bar\",\"panelId\",\"also-know-as\",3,\"openState\",\"toggle\"],[\"class\",\"row other-name\",4,\"ngIf\"],[1,\"row\",\"other-name\"],[1,\"row\"],[3,\"isLastItem\",\"name\",\"date\",\"assertion\",4,\"ngIf\"],[3,\"isLastItem\",\"name\",\"date\",\"assertion\"],[3,\"ariaLabelName\",\"userRecord\",\"userStatus\",\"isPublicRecord\",\"showIsThisYouButton\"],[1,\"biography-container\"],[1,\"biography-header\",\"orc-font-body\"],E,[1,\"orc-font-body-small\",3,\"innerText\"]]},template:function(t,i){1&t&&(e.YNc(0,so,1,0,\"mat-progress-bar\",0),e._uU(1,\"\\\\n\"),e._UZ(2,\"app-top-bar-record-issues\",1),e._uU(3,\"\\\\n\\\\n\"),e.YNc(4,lo,1,5,\"app-top-bar-actions\",2),e._uU(5,\"\\\\n\\\\n\"),e._UZ(6,\"app-top-bar-verification-email\",3),e._uU(7,\"\\\\n\\\\n\"),e.YNc(8,Ro,8,3,\"ng-container\",4),e._uU(9,\"\\\\n\\\\n\"),e._uU(10,\"\\\\n\\\\n\"),e.YNc(11,wo,11,6,\"ng-container\",4),e._uU(12,\"\\\\n\")),2&t&&(e.Q6J(\"ngIf\",i.loadingUserRecord),e.xp6(2),e.Q6J(\"isPublicRecord\",i.isPublicRecord),e.xp6(2),e.Q6J(\"ngIf\",!i.recordWithIssues),e.xp6(2),e.Q6J(\"emailVerified\",i.emailVerified),e.xp6(2),e.Q6J(\"ngIf\",!i.isPublicRecord&&!i.recordWithIssues),e.xp6(3),e.Q6J(\"ngIf\",i.isPublicRecord&&!i.recordWithIssues))},dependencies:[p.mk,p.sg,p.O5,ae.y,Ue.N,se.j,Qt.K,mn.Q,me.eI,qt,zt.R,no,ao,X.r],styles:[\"[_nghost-%COMP%]{width:100%;box-sizing:border-box}section[_ngcontent-%COMP%]{width:100%}app-panel[_ngcontent-%COMP%]{width:100%;margin-top:16px}app-panel[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], app-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}app-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .published-name[_ngcontent-%COMP%]{margin-bottom:18px}app-panel[_ngcontent-%COMP%]   .other-names-container[_ngcontent-%COMP%]{margin-top:18px}app-panel[_ngcontent-%COMP%]   .other-names-container[_ngcontent-%COMP%]   .other-names[_ngcontent-%COMP%]{margin-bottom:0}app-top-bar-actions[_ngcontent-%COMP%]{margin-top:16px}.orc-font-body[_ngcontent-%COMP%]{margin:unset}.public-container[_ngcontent-%COMP%]{width:100%}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-header[_ngcontent-%COMP%]{margin-top:0}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]{display:inline-flex;flex-wrap:wrap;gap:16px}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .names[_ngcontent-%COMP%]{min-height:64px;width:calc(50% - 8px);padding:16px;border:solid 1px;border-radius:4px}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .names[_ngcontent-%COMP%]   .names-content[_ngcontent-%COMP%]{display:block}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .names-extended[_ngcontent-%COMP%]{height:auto}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .names.mobile[_ngcontent-%COMP%]{height:auto!important;width:100%!important;margin-left:0!important}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names[_ngcontent-%COMP%]{position:relative;min-height:64px;width:calc(50% - 8px);border:solid 1px;border-radius:4px;padding:0}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names[_ngcontent-%COMP%]   .other-names-extended[_ngcontent-%COMP%]{position:absolute;left:0;right:0;height:auto!important;overflow:hidden;-moz-transition:height .45s;z-index:2;-webkit-transition:height .45s;border:solid 1px;border-radius:4px}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-no-border[_ngcontent-%COMP%]{border:unset!important;border-radius:unset!important}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names.mobile[_ngcontent-%COMP%]{width:100%!important;margin-top:1em;margin-right:0!important}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%!important}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-wrapper[_ngcontent-%COMP%]{padding:16px}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-wrapper[_ngcontent-%COMP%]   .other-names-content[_ngcontent-%COMP%]{display:block}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-wrapper[_ngcontent-%COMP%]   .other-name[_ngcontent-%COMP%]{margin-bottom:10px}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-wrapper[_ngcontent-%COMP%]   .other-name[_ngcontent-%COMP%]:last-child{margin-bottom:0}.public-container[_ngcontent-%COMP%]   .biography-container[_ngcontent-%COMP%]{margin-top:1em}.public-container[_ngcontent-%COMP%]   .biography-container[_ngcontent-%COMP%]   .biography-header[_ngcontent-%COMP%]{margin:0}.public-container[_ngcontent-%COMP%]   .biography-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow-wrap:break-word}\",\".published-name[_ngcontent-%COMP%]{color:#000000e6}.description[_ngcontent-%COMP%]{color:#0009}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .names[_ngcontent-%COMP%], .public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names[_ngcontent-%COMP%]{border-color:#d4e7a1}.public-container[_ngcontent-%COMP%]   .names-container[_ngcontent-%COMP%]   .names-wrapper[_ngcontent-%COMP%]   .other-names-extended[_ngcontent-%COMP%]{background-color:#fff;border-color:#7faa26!important}\"]}),_})();const En=[\"*\",\"*\",\"*\",\"*\"];let $o=(()=>{var o;class _{constructor(){}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-main\"]],ngContentSelectors:En,decls:4,vars:0,template:function(t,i){1&t&&(e.F$t(En),e.Hsn(0,0,[\"selector\",\"app-top-bar\"]),e.Hsn(1,1,[\"selector\",\"app-work-stack-group\"]),e.Hsn(2,2,[\"selector\",\"app-affiliations\"]),e.Hsn(3,3,[\"selector\",\"app-fundings\"]))},styles:[\"[_nghost-%COMP%]{display:flex;flex-direction:column}\"]}),_})();var K=g(42679),Ze=g(46018),Sn=g(82777),je=g(81981);function en(){return window.location.hostname.startsWith(\"qa.orcid.org\")}let Uo=(()=>{var o;class _{transform(t,i){return\"employment\"==t?\"Add employment\":\"professional-activities\"==t?\"Add a professional activity\":\"education\"==t||\"qualification\"==t?\"Add education or qualification\":\"distinction\"==t||\"invited-position\"==t?\"Add invited position or distinction\":\"membership\"==t||\"service\"==t?\"Add membership or service\":\"funding\"==t?\"Add funding\":\"works\"==t?\"Add a work\":\"Add\"}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"appPanelsAddAriaLabel\",type:o,pure:!0}),_})(),Zo=(()=>{var o;class _{transform(t,i){let r=\"\";return i&&(r=\" \"+\"(Disabled)\"),\"employment\"===t?\"Sort your employment\"+r:\"professional-activities\"===t?\"Sort your professional activities\"+r:\"education\"===t||\"qualification\"===t?\"Sort your education and qualifications\"+r:\"distinction\"===t||\"invited-position\"===t?\"Sort your invited positions and distinctions\"+r:\"membership\"===t||\"service\"===t?\"Sort your membership and services\"+r:\"funding\"===t?\"Sort your funding\"+r:\"works\"===t?\"Sort your works\"+r:\"peer-review\"===t?\"Sort your peer reviews\"+r:\"research-resources\"===t?\"Sort your research resources\"+r:\"Sort\"+r}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"appPanelsSortAriaLabel\",type:o,pure:!0}),_})(),Wo=(()=>{var o;class _{transform(t,i){switch(t){case\"title\":return Fo(i);case\"start\":return Go(i);case\"end\":return Ko(i);case\"date\":return Qo(i);case\"type\":return Bo(i);case\"source\":return Jo(i);case\"order\":return \"Sort peer review by Publication/Grant title\"}}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"appPanelsSortByAriaLabel\",type:o,pure:!0}),_})();const Fo=o=>{switch(o){case\"employment\":return \"Sort employment by title\";case\"professional-activities\":return \"Sort professional activities by title\";case\"education\":case\"qualification\":return \"Sort education and qualifications by title\";case\"distinction\":case\"invited-position\":return \"Sort invited positions and distinction by title\";case\"membership\":case\"service\":return \"Sort membership and service by title\";case\"funding\":return \"Sort funding by title\";case\"works\":return \"Sort works by title\";case\"research-resources\":return \"Sort research resources by title\"}},Go=o=>{switch(o){case\"employment\":return \"Sort employment by start date\";case\"professional-activities\":return \"Sort professional activities by start date\";case\"education\":case\"qualification\":return \"Sort education and qualifications by start date\";case\"distinction\":case\"invited-position\":return \"Sort invited positions and distinction by start date\";case\"membership\":case\"service\":return \"Sort membership and service by start date\"}},Ko=o=>{switch(o){case\"employment\":return \"Sort employment by end date\";case\"professional-activities\":return \"Sort professional activities by end date\";case\"education\":case\"qualification\":return \"Sort education and qualifications by end date\";case\"distinction\":case\"invited-position\":return \"Sort invited positions and distinction by end date\";case\"membership\":case\"service\":return \"Sort membership and service by end date\"}},Bo=o=>{switch(o){case\"professional-activities\":return \"Sort professional activities by type\";case\"funding\":return \"Sort funding by type\";case\"works\":return \"Sort works by type\"}},Qo=o=>{switch(o){case\"funding\":return \"Sort funding by date\";case\"works\":return \"Sort works by date\";case\"research-resources\":return \"Sort research resources by date\"}},Jo=o=>{switch(o){case\"employment\":return \"Sort employment by source\";case\"education\":case\"qualification\":return \"Sort education and qualifications by source\";case\"professional-activities\":return \"Sort professional activities by source\";case\"funding\":return \"Sort funding by source\";case\"works\":return \"Sort works by source\"}};let Xo=(()=>{var o;class _{constructor(){this.SortOrderTypeLabel={title:\"Title\",start:\"Start\",end:\"End\",date:\"Date\",type:\"Type\",order:\"Publication/Grant title\",source:\"Source\"}}transform(t){return this.SortOrderTypeLabel[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"sortLabel\",type:o,pure:!0}),_})();function Yo(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"span\",12),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.collapse())}),e._uU(1),e.ynx(2),e.SDv(3,13),e.BQk(),e._uU(4),e.qZA()}if(2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"(\",n.currentAmount,\" \"),e.xp6(3),e.hij(\" \",n.total,\")\")}}function qo(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"span\",12),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.collapse())}),e._uU(1),e.qZA()}if(2&o){const n=e.oxw(3);e.xp6(1),e.hij(\" (\",n.currentAmount,\") \")}}function zo(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\"(0)\"),e.qZA())}function Ho(o,_){1&o&&e._UZ(0,\"span\")}function Vo(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Yo,5,2,\"span\",11),e.YNc(2,qo,2,1,\"span\",11),e.YNc(3,zo,2,0,\"span\",9),e.YNc(4,Ho,1,0,\"span\",9),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",n.currentAmount&&n.total&&n.currentAmount!==n.total),e.xp6(1),e.Q6J(\"ngIf\",n.currentAmount&&!n.total||0!==n.currentAmount&&n.currentAmount===n.total),e.xp6(1),e.Q6J(\"ngIf\",!n.currentAmount&&0==n.total||!n.currentAmount&&!n.total),e.xp6(1),e.Q6J(\"ngIf\",!n.currentAmount&&0!==n.currentAmount)}}function jo(o,_){1&o&&(e.ynx(0),e.SDv(1,15),e.BQk())}function ei(o,_){1&o&&(e.ynx(0),e.SDv(1,16),e.BQk())}function ni(o,_){1&o&&(e.ynx(0),e.SDv(1,17),e.BQk())}function ti(o,_){1&o&&(e.ynx(0),e.SDv(1,18),e.BQk())}function oi(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"span\"),e._uU(2),e.YNc(3,jo,2,0,\"ng-container\",9),e.YNc(4,ei,2,0,\"ng-container\",9),e._uU(5,\"\\\\xa0\"),e.ynx(6),e.SDv(7,14),e.BQk(),e._uU(8),e.YNc(9,ni,2,0,\"ng-container\",9),e.YNc(10,ti,2,0,\"ng-container\",9),e._uU(11,\") \"),e.qZA(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.hij(\" (\",n.reviewsNumber,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.reviewsNumber>1),e.xp6(1),e.Q6J(\"ngIf\",1===n.reviewsNumber),e.xp6(4),e.hij(\" \",n.currentAmount,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.currentAmount>1),e.xp6(1),e.Q6J(\"ngIf\",1===n.currentAmount)}}function ii(o,_){1&o&&(e.ynx(0),e.SDv(1,29),e.BQk())}function _i(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",27),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(i.type))}),e.ALo(1,\"appPanelsAddAriaLabel\"),e.TgZ(2,\"mat-icon\",28),e._uU(3,\" add_circle_outline \"),e.qZA(),e.YNc(4,ii,2,0,\"ng-container\",9),e.qZA()}if(2&o){const n=e.oxw(3);e.s9C(\"id\",\"cy-add-btn-\"+n.type),e.uIk(\"aria-label\",e.lcZ(1,3,n.type)),e.xp6(4),e.Q6J(\"ngIf\",!n.isMobile)}}function ri(o,_){1&o&&(e.ynx(0),e.SDv(1,32),e.BQk())}function ai(o,_){if(1&o&&(e.TgZ(0,\"button\",30),e.ALo(1,\"appPanelsAddAriaLabel\"),e.TgZ(2,\"mat-icon\",31),e._uU(3,\" add_circle_outline \"),e.qZA(),e.YNc(4,ri,2,0,\"ng-container\",9),e.qZA()),2&o){e.oxw();const n=e.MAs(4),t=e.oxw(2);e.s9C(\"id\",\"cy-menu-add-\"+t.type),e.Q6J(\"matMenuTriggerFor\",n),e.uIk(\"aria-label\",e.lcZ(1,4,t.type)),e.xp6(4),e.Q6J(\"ngIf\",!t.isMobile)}}function si(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"education\"))}),e.ynx(2),e.SDv(3,34),e.BQk(),e.qZA(),e.TgZ(4,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"qualification\"))}),e.ynx(5),e.SDv(6,35),e.BQk(),e.qZA(),e.BQk()}}function li(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"invited-position\"))}),e.TgZ(2,\"mat-icon\",36),e._uU(3,\"join_inner\"),e.qZA(),e.ynx(4),e.SDv(5,37),e.BQk(),e.qZA(),e.TgZ(6,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"distinction\"))}),e.TgZ(7,\"mat-icon\",36),e._uU(8,\"stars\"),e.qZA(),e.ynx(9),e.SDv(10,38),e.BQk(),e.qZA(),e.TgZ(11,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"membership\"))}),e.TgZ(12,\"mat-icon\",36),e._uU(13,\"card_membership\"),e.qZA(),e.ynx(14),e.SDv(15,39),e.BQk(),e.qZA(),e.TgZ(16,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"service\"))}),e.TgZ(17,\"mat-icon\",36),e._uU(18,\"badge\"),e.qZA(),e.ynx(19),e.SDv(20,40),e.BQk(),e.qZA(),e.BQk()}}function ci(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"invited-position\"))}),e.ynx(2),e.SDv(3,41),e.BQk(),e.qZA(),e.TgZ(4,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"distinction\"))}),e.ynx(5),e.SDv(6,42),e.BQk(),e.qZA(),e.BQk()}}function di(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"membership\"))}),e.ynx(2),e.SDv(3,43),e.BQk(),e.qZA(),e.TgZ(4,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"service\"))}),e.ynx(5),e.SDv(6,44),e.BQk(),e.qZA(),e.BQk()}}function pi(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"funding-search\"))}),e.ynx(2),e.SDv(3,45),e.BQk(),e.qZA(),e.TgZ(4,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(\"funding\"))}),e.ynx(5),e.SDv(6,46),e.BQk(),e.qZA(),e.BQk()}}function ui(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",48),e.NdJ(\"click\",function(){const r=e.CHM(n).$implicit,a=e.oxw(4);return e.KtG(a.add(\"works\",r.action))}),e._uU(1),e.qZA()}if(2&o){const n=_.$implicit;e.s9C(\"id\",n.id),e.xp6(1),e.hij(\" \",n.label,\" \")}}function gi(o,_){if(1&o&&(e.ynx(0),e.YNc(1,ui,2,2,\"button\",47),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J(\"ngForOf\",n.addMenuOptions)}}function fi(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"button\",33),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.add(i.type))}),e.ynx(2),e.SDv(3,49),e.BQk(),e.qZA(),e.BQk()}}function Oi(o,_){1&o&&(e.ynx(0),e.SDv(1,50),e.BQk())}function Ci(o,_){if(1&o&&(e.TgZ(0,\"mat-icon\",53),e._uU(1,\" north \"),e.qZA()),2&o){const n=e.oxw(4);e.uIk(\"aria-label\",n.ariaLabelAscending)}}function Ri(o,_){if(1&o&&(e.TgZ(0,\"mat-icon\",53),e._uU(1,\" south \"),e.qZA()),2&o){const n=e.oxw(4);e.uIk(\"aria-label\",n.ariaLabelDescending)}}function Ti(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",33),e.NdJ(\"click\",function(){const r=e.CHM(n).$implicit,a=e.oxw(3);return e.KtG(a.sortChange(r))}),e.ALo(1,\"appPanelsSortByAriaLabel\"),e.TgZ(2,\"div\",51),e._uU(3),e.ALo(4,\"sortLabel\"),e.qZA(),e.YNc(5,Ci,2,1,\"mat-icon\",52),e.YNc(6,Ri,2,1,\"mat-icon\",52),e.qZA()}if(2&o){const n=_.$implicit,t=e.oxw(3);e.uIk(\"aria-label\",e.xi3(1,4,n,t.type)),e.xp6(3),e.hij(\" \",e.lcZ(4,7,n),\" \"),e.xp6(2),e.Q6J(\"ngIf\",n===t.sortType&&\"asc\"===t.sortDirection),e.xp6(1),e.Q6J(\"ngIf\",n===t.sortType&&\"desc\"===t.sortDirection)}}function mi(o,_){if(1&o&&(e.TgZ(0,\"div\",19),e.YNc(1,_i,5,5,\"button\",20),e.YNc(2,ai,5,6,\"button\",21),e.TgZ(3,\"mat-menu\",null,22),e.YNc(5,si,7,0,\"ng-container\",9),e.YNc(6,li,21,0,\"ng-container\",9),e.YNc(7,ci,7,0,\"ng-container\",9),e.YNc(8,di,7,0,\"ng-container\",9),e.YNc(9,pi,7,0,\"ng-container\",9),e.YNc(10,gi,2,1,\"ng-container\",9),e.YNc(11,fi,4,0,\"ng-container\",9),e.qZA(),e.TgZ(12,\"button\",23),e.ALo(13,\"appPanelsSortAriaLabel\"),e.TgZ(14,\"mat-icon\",24),e._uU(15,\" sort \"),e.qZA(),e.YNc(16,Oi,2,0,\"ng-container\",9),e.qZA(),e.TgZ(17,\"mat-menu\",null,25),e.YNc(19,Ti,7,9,\"button\",26),e.qZA()()),2&o){const n=e.MAs(18),t=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",!t.isPublicRecord&&t.singleAddButton()),e.xp6(1),e.Q6J(\"ngIf\",!t.isPublicRecord&&t.multipleMatButton()&&(t.IS_QA||!t.IS_QA&&\"peer-review\"!==t.type)),e.xp6(3),e.Q6J(\"ngIf\",\"education\"===t.type||\"qualification\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",t.professionalActivitiesTogglz&&\"professional-activities\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",!t.professionalActivitiesTogglz&&\"invited-position\"===t.type||\"distinction\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",!t.professionalActivitiesTogglz&&\"membership\"===t.type||\"service\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"funding\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"works\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"peer-review\"===t.type),e.xp6(1),e.Q6J(\"matMenuTriggerFor\",n)(\"disabled\",!t.currentAmount&&!t.total),e.uIk(\"aria-label\",e.xi3(13,14,t.type,!t.currentAmount&&!t.total)),e.xp6(4),e.Q6J(\"ngIf\",!t.isMobile),e.xp6(3),e.Q6J(\"ngForOf\",t.sortTypes)}}const Ei=function(o){return{\"sub-peer-review\":o}};function Si(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",4)(1,\"div\",5)(2,\"app-panel-expand-buttons\",6),e.NdJ(\"toggle\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.collapse())}),e.qZA(),e.TgZ(3,\"div\",7),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.collapse())}),e.TgZ(4,\"h3\",8),e._uU(5),e.YNc(6,Vo,5,4,\"ng-container\",9),e.YNc(7,oi,12,6,\"ng-container\",9),e.qZA()()(),e.YNc(8,mi,20,17,\"div\",10),e.qZA()}if(2&o){const n=e.oxw();e.Q6J(\"ngClass\",e.VKq(7,Ei,\"sub-peer-review\"===n.type)),e.xp6(2),e.Q6J(\"openState\",n.expandedContent)(\"panelType\",n.type),e.xp6(3),e.hij(\" \",n.title,\" \"),e.xp6(1),e.Q6J(\"ngIf\",\"peer-review\"!==n.type),e.xp6(1),e.Q6J(\"ngIf\",\"peer-review\"===n.type&&0!==n.currentAmount),e.xp6(1),e.Q6J(\"ngIf\",\"sub-peer-review\"!==n.type)}}function hi(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",54)}function Ni(o,_){1&o&&(e.TgZ(0,\"div\",55),e.Hsn(1),e.qZA())}const Mi=[\"*\"];let he=(()=>{var o;class _{constructor(t,i,r,a){this._dialog=t,this._platform=i,this._verificationEmailModalService=r,this._togglz=a,this.loading=!1,this.expandedContent=!0,this.expandedContentChange=new e.vpe,this.type=\"activities\",this.isPublicRecord=!1,this.selectable=!1,this.sortTypes=[\"title\",\"start\",\"end\"],this.sortType=\"end\",this.sortDirection=\"desc\",this.defaultDirection=\"asc\",this.sort=new e.vpe,this.addEvent=new e.vpe,this.addMenuOptions=[],this.labelAddButton=\"Sort Items\",this.labelExportButton=\"Export Items\",this.labelSortButton=\"Add Item\",this.professionalActivitiesTogglz=!1,this.ariaLabelAscending=\"Ascending\",this.ariaLabelDescending=\"Descending\"}add(t,i){const r=this.addMenuOptions.find(a=>a.action===i);if(r&&r.modal)this.openModal(r.modal,{...r,type:r.type});else switch(t){case\"employment\":case\"education\":case\"qualification\":case\"invited-position\":case\"distinction\":case\"membership\":case\"service\":this.openModal(Xe.X,{type:t});break;case\"peer-review\":this.openModal(He.G);break;case\"funding\":this.openModal(ze.e);break;case\"funding-search\":this.openModal(Sn.D);break;case\"works-search\":this.openModal(je.z)}}openModal(t,i){var a,s,l;const r=null==(l=null==(s=null==(a=this.userRecord)?void 0:a.emails)?void 0:s.emails)?void 0:l.find(c=>c.primary);r&&!r.verified?this._verificationEmailModalService.openVerificationEmailModal(r.value):this._platform.get().pipe((0,k.P)()).subscribe(c=>{let u;u=this._dialog.open(t,{width:\"850px\",maxWidth:c.tabletOrHandset?\"99%\":\"80vw\",ariaLabel:(0,I.Xw)(t,null==i?void 0:i.type)}),u.componentInstance.type=null==i?void 0:i.type,u.componentInstance.userRecord=this.userRecord})}sortChange(t){this.sortType===t&&\"asc\"===this.sortDirection?this.sortDirection=\"desc\":this.sortType===t&&\"desc\"===this.sortDirection?this.sortDirection=\"asc\":this.sortType!==t&&(this.sortDirection=this.defaultDirection,this.sortType=t),this.sort.next({direction:this.sortDirection,type:this.sortType})}collapse(){this.expandedContent=!this.expandedContent,this.expandedContentChange.emit(this.expandedContent)}multipleMatButton(){return\"education\"===this.type||\"invited-position\"===this.type||\"membership\"===this.type||\"funding\"===this.type||\"works\"===this.type||\"peer-review\"===this.type||\"professional-activities\"===this.type}singleAddButton(){return\"employment\"===this.type}ngOnInit(){this._platform.get().subscribe(t=>{this.isMobile=t.columns4||t.columns8}),this.IS_QA=en()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.on),e.Y36(D.tu),e.Y36($e.n),e.Y36(re.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-panels\"]],inputs:{loading:\"loading\",expandedContent:\"expandedContent\",title:\"title\",type:\"type\",userRecord:\"userRecord\",currentAmount:\"currentAmount\",total:\"total\",isPublicRecord:\"isPublicRecord\",selectable:\"selectable\",sortTypes:\"sortTypes\",sortType:\"sortType\",sortDirection:\"sortDirection\",defaultDirection:\"defaultDirection\",reviewsNumber:\"reviewsNumber\",addMenuOptions:\"addMenuOptions\",labelAddButton:\"labelAddButton\",labelExportButton:\"labelExportButton\",labelSortButton:\"labelSortButton\",professionalActivitiesTogglz:\"professionalActivitiesTogglz\"},outputs:{expandedContentChange:\"expandedContentChange\",sort:\"sort\",addEvent:\"addEvent\"},ngContentSelectors:Mi,decls:4,vars:3,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E,C,N,M,L,W,F,G,B;return n=\"of\",t=\"for\",i=\"reviews\",r=\"review\",a=\"publications/grants\",s=\"publication/grant\",l=\"Add\",c=\"Add\",u=\"Add Education\",O=\"Add Qualification\",f=\"Add Invited Position\",R=\"Add Distinction\",T=\"Add Membership\",E=\"Add Service\",C=\"Add Invited Position\",N=\"Add Distinction\",M=\"Add Membership\",L=\"Add Service\",W=\"Search & link\",F=\"Add manually\",G=\"Search & link\",B=\"Sort\",[[1,\"col\",\"s4\",\"m8\",\"l12\",\"no-gutters\"],[\"class\",\"header-container\",3,\"ngClass\",4,\"ngIf\"],[\"mode\",\"indeterminate\",\"color\",\"accent\",4,\"ngIf\"],[\"class\",\"col s4 m8 l12 content no-gutters\",4,\"ngIf\"],[1,\"header-container\",3,\"ngClass\"],[1,\"inline-initial-side\"],[3,\"openState\",\"panelType\",\"toggle\"],[1,\"text-container\",\"clickable\",3,\"click\"],[1,\"activity-header\",\"orc-font-body-large\"],[4,\"ngIf\"],[\"class\",\"controls\",4,\"ngIf\"],[\"class\",\"clickable\",3,\"click\",4,\"ngIf\"],[1,\"clickable\",3,\"click\"],n,t,i,r,a,s,[1,\"controls\"],[\"mat-button\",\"\",\"class\",\"orc-font-body-small add\",3,\"id\",\"click\",4,\"ngIf\"],[\"mat-button\",\"\",\"class\",\"orc-font-body-small add\",3,\"matMenuTriggerFor\",\"id\",4,\"ngIf\"],[\"menuAdd\",\"matMenu\"],[\"mat-button\",\"\",1,\"orc-font-body-small\",3,\"matMenuTriggerFor\",\"disabled\"],[1,\"large-material-icon\"],[\"menu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"mat-button\",\"\",1,\"orc-font-body-small\",\"add\",3,\"id\",\"click\"],[\"id\",\"add-button\",1,\"large-material-icon\"],l,[\"mat-button\",\"\",1,\"orc-font-body-small\",\"add\",3,\"matMenuTriggerFor\",\"id\"],[1,\"large-material-icon\",\"add-button-multiple\"],c,[\"mat-menu-item\",\"\",3,\"click\"],u,O,[1,\"material-icons-outlined\"],f,R,T,E,C,N,M,L,W,F,[\"mat-menu-item\",\"\",3,\"id\",\"click\",4,\"ngFor\",\"ngForOf\"],[\"mat-menu-item\",\"\",3,\"id\",\"click\"],G,B,[1,\"padding-right\"],[\"aria-hidden\",\"false\",\"class\",\"sort\",4,\"ngIf\"],[\"aria-hidden\",\"false\",1,\"sort\"],[\"mode\",\"indeterminate\",\"color\",\"accent\"],[1,\"col\",\"s4\",\"m8\",\"l12\",\"content\",\"no-gutters\"]]},template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,\"div\",0),e.YNc(1,Si,9,9,\"div\",1),e.qZA(),e.YNc(2,hi,1,0,\"mat-progress-bar\",2),e.YNc(3,Ni,2,0,\"div\",3)),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",i.IS_QA||\"peer-review\"!==i.type||\"peer-review\"===i.type&&i.currentAmount>0),e.xp6(1),e.Q6J(\"ngIf\",i.loading),e.xp6(1),e.Q6J(\"ngIf\",i.expandedContent))},dependencies:[p.mk,p.sg,p.O5,y.Hw,A.eB,de.W0,de.tN,de.D8,me.eI,mn.Q,Uo,Zo,Wo,Xo],styles:[\"[_nghost-%COMP%]{margin-bottom:30px}.header-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center;min-height:56px;padding-inline-start:8px;padding-inline-end:16px;border-radius:4px}.header-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .inline-initial-side[_ngcontent-%COMP%]{max-width:100%;display:flex;flex-direction:row;align-items:center}.header-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .inline-initial-side[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:3px}.header-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .inline-initial-side[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-inline-end:4px}.header-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .inline-initial-side[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]{margin-bottom:5px;margin-top:5px}.header-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .header-container[_ngcontent-%COMP%]   .inline-initial-side[_ngcontent-%COMP%]   .text-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.header-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex}.header-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40px;font-weight:400;padding:0 6px}.header-container[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;height:32px;width:32px;margin-right:8px;margin-bottom:2px}.header-container[_ngcontent-%COMP%], .sub-peer-review[_ngcontent-%COMP%]{border:solid 1px}.sort[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:0}.clickable[_ngcontent-%COMP%]{cursor:pointer}.activity-header[_ngcontent-%COMP%]{margin:0}.padding-right[_ngcontent-%COMP%]{padding-right:40px}\",\"[_nghost-%COMP%]   .header-container[_ngcontent-%COMP%]{background-color:#447405;color:#fff}[_nghost-%COMP%]   .white-header-container[_ngcontent-%COMP%]{border-color:#bdbdbd!important;background-color:#fafafa}[_nghost-%COMP%]   .sub-peer-review[_ngcontent-%COMP%]{border-color:#bdbdbd!important;background-color:#bdbdbd!important;color:#000000de}\"]}),_})();var Pi=g(49193),bi=g(23291),nn=g(75340),z=g(77226),We=g(60759),tn=g(28325),on=g(45081),$=g(69831),U=g(72331),Y=g(42544);function Ai(o,_){1&o&&(e.ynx(0),e.SDv(1,16),e.BQk())}function Ii(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ynx(2),e.SDv(3,17),e.BQk()()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\" (\",n.selectedItems.length,\") \")}}const xi=function(){return{standalone:!0}};function yi(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",10)(1,\"div\",10)(2,\"p\")(3,\"mat-checkbox\",14),e.NdJ(\"change\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.updateCheckAll())})(\"ngModelChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.selectAll=i)}),e.YNc(4,Ai,2,0,\"ng-container\",15),e.YNc(5,Ii,4,1,\"ng-container\",15),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(3),e.Q6J(\"ngModel\",n.selectAll)(\"ngModelOptions\",e.DdM(4,xi)),e.xp6(1),e.Q6J(\"ngIf\",0===n.selectedItems.length),e.xp6(1),e.Q6J(\"ngIf\",n.selectedItems.length>0)}}function ki(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",null==n||null==n.affiliationName?null:n.affiliationName.value,\" \")}}function vi(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",null==n||null==n.fundingTitle||null==n.fundingTitle.title?null:n.fundingTitle.title.value,\" \")}}function Di(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",null==n?null:n.title,\" \")}}function wi(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",null==n||null==n.title?null:n.title.value,\" \")}}function Li(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\")(2,\"span\",26),e.ynx(3),e.SDv(4,27),e.BQk(),e._uU(5),e.ALo(6,\"monthDayYearDateToString\"),e.qZA(),e.TgZ(7,\"span\",26),e.ynx(8),e.SDv(9,28),e.BQk(),e.TgZ(10,\"span\",29),e._uU(11),e.qZA()(),e.TgZ(12,\"span\"),e.ynx(13),e.SDv(14,30),e.BQk(),e.TgZ(15,\"span\",29),e._uU(16),e.qZA()()(),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(5),e.hij(\" \",e.lcZ(6,3,null==n?null:n.completionDate),\" \"),e.xp6(6),e.hij(\" \",n.type.value,\"\"),e.xp6(5),e.hij(\" \",n.role.value,\" \")}}function $i(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,31),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid),\" \")}}function Ui(o,_){1&o&&e._UZ(0,\"br\")}const hn=function(o){return{mobile:o}};function Zi(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Ui,1,0,\"br\",15),e.TgZ(2,\"strong\",32),e.SDv(3,33),e.qZA(),e._uU(4),e.ALo(5,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",t.isMobile),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(5,hn,t.isMobile)),e.xp6(2),e.hij(\": \",e.lcZ(5,3,n.createdDate),\" \")}}function Wi(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"div\",21)(2,\"div\",10)(3,\"mat-checkbox\",22),e.NdJ(\"change\",function(){const r=e.CHM(n).$implicit,a=e.oxw(2);return e.KtG(a.updateCheck(\"research-resources\"===a.type?r.putCode:r.putCode.value))}),e.TgZ(4,\"h2\",23),e.YNc(5,ki,2,1,\"ng-container\",15),e.YNc(6,vi,2,1,\"ng-container\",15),e.YNc(7,Di,2,1,\"ng-container\",15),e.YNc(8,wi,2,1,\"ng-container\",15),e.YNc(9,Li,17,5,\"ng-container\",15),e.qZA()()(),e.TgZ(10,\"div\",24)(11,\"strong\"),e.SDv(12,25),e.qZA(),e._uU(13,\": \"),e.YNc(14,$i,4,1,\"ng-container\",15),e._uU(15),e.YNc(16,Zi,6,7,\"ng-container\",15),e.qZA()(),e._UZ(17,\"mat-divider\",10),e.BQk()}if(2&o){const n=_.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J(\"formGroupName\",\"research-resources\"===t.type?n.putCode:n.putCode.value),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(10,hn,t.isMobile)),e.xp6(1),e.Q6J(\"ngIf\",t.isAffiliation()),e.xp6(1),e.Q6J(\"ngIf\",\"funding\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"research-resources\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"works\"===t.type),e.xp6(1),e.Q6J(\"ngIf\",\"peer-review\"===t.type),e.xp6(5),e.Q6J(\"ngIf\",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid)),e.xp6(1),e.hij(\" \",n.sourceName||n.source,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.createdDate)}}function Fi(o,_){1&o&&(e.TgZ(0,\"div\",34)(1,\"mat-icon\"),e._uU(2,\"error\"),e.qZA(),e.ynx(3),e.SDv(4,35),e.BQk(),e.qZA())}function Gi(o,_){if(1&o&&(e.TgZ(0,\"div\",18),e.YNc(1,Wi,18,12,\"ng-container\",19),e.YNc(2,Fi,5,0,\"div\",20),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"formGroup\",n.deleteForm),e.xp6(1),e.Q6J(\"ngForOf\",n.items),e.xp6(1),e.Q6J(\"ngIf\",!n.item&&0===n.items.length)}}const Ki=function(o,_){return{\"orc-font-body-small\":o,\"orc-font-small-print\":_}};let Nn=(()=>{var o;class _{constructor(t,i,r,a,s,l,c,u,O){this.dialogRef=t,this._changeDetectorRef=i,this._platform=r,this._recordAffiliationService=a,this._recordFundingsService=s,this._recordWorksService=l,this._recordResearchResourceService=c,this._recordPeerReviewService=u,this._snackBar=O,this.$destroy=new w.xQ,this.type=\"activities\",this.putCodes=[],this.loadingItems=!1,this.items=[],this.selectedItems=[]}ngOnInit(){var i;this.deleteForm=new d.nJ({});const t={};this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(r=>{this.isMobile=r.columns4||r.columns8}),this.item&&0===(null==(i=this.putCodes)?void 0:i.length)&&(this.items.push(this.item),this.items.forEach(r=>{var a;t[(null==(a=null==r?void 0:r.putCode)?void 0:a.value)||r.putCode]=new d.nJ({checked:new d.p4(!1)})}),this.deleteForm=new d.nJ(t)),this.putCodes.length>0&&(this.loadingItems=!0,this._recordWorksService.getWorksInfo(this.putCodes).subscribe(r=>{r.forEach(a=>{this.items.push(a),t[a.putCode.value]=new d.nJ({checked:new d.p4(!1)})}),this.deleteForm=new d.nJ(t),this.loadingItems=!1}))}saveEvent(){const t=[];let i=\"\";this.items.forEach((r,a)=>{var s;null!=(s=this.deleteForm.value[\"research-resources\"===this.type?r.putCode:r.putCode.value])&&s.checked&&(i=\"research-resources\"===this.type?r.putCode:r.putCode.value,this.items.length>1&&t.push(i))}),i||t.length>0?this.delete(0===t.length?i:t):this._snackBar.showValidationError(\"You haven\\\\u2019t selected any items to delete.\",\"Please review and fix the issue\")}delete(t){switch(this.type){case\"employment\":case\"education\":case\"qualification\":case\"invited-position\":case\"distinction\":case\"membership\":case\"service\":this._recordAffiliationService.delete(t).pipe((0,k.P)()).subscribe(()=>{this.closeEvent()});break;case\"funding\":this._recordFundingsService.delete(t).pipe((0,k.P)()).subscribe(()=>{this.closeEvent()});break;case\"works\":this._recordWorksService.delete(t).pipe((0,k.P)()).subscribe(()=>{this.closeEvent()});break;case\"research-resources\":this._recordResearchResourceService.delete(t).pipe((0,k.P)()).subscribe(()=>{this.closeEvent()});break;case\"peer-review\":this._recordPeerReviewService.delete(t).pipe((0,k.P)()).subscribe(()=>{this.closeEvent()})}}isAffiliation(){return\"employment\"===this.type||\"education\"===this.type||\"qualification\"===this.type||\"invited-position\"===this.type||\"distinction\"===this.type||\"membership\"===this.type||\"service\"===this.type}updateCheckAll(){this.selectedItems=[],this.putCodes.forEach(t=>{this.selectAll&&this.selectedItems.push(t),this.deleteForm.patchValue({[t]:{checked:!!this.selectAll}})}),this._changeDetectorRef.detectChanges()}updateCheck(t){this.selectedItems.includes(t)?this.selectedItems=this.selectedItems.filter(i=>i!==t):this.selectedItems.push(t)}closeEvent(){this.dialogRef.close()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.hV),e.Y36(e.sBO),e.Y36(D.tu),e.Y36(Ze.l),e.Y36(nn.i),e.Y36(z.Y),e.Y36(We.y),e.Y36(tn.b),e.Y36(on.o))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-modal-delete-items\"]],inputs:{type:\"type\",item:\"item\",putCodes:\"putCodes\"},decls:25,vars:10,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E;return n=\"Delete items\",t=\"Delete selected items\",i=\"Cancel\",r=\"Deleting items permanently removes them from your ORCID record. Please review the items selected for deletion.\",a=\"Selected items to delete\",s=\"Select all\",l=\"Selected\",c=\"Source\",u=\"Review date:\",O=\"Type:\",f=\"Role:\",R=\"via\",T=\"Added\",E=\"No items selected.\",[[3,\"loading\",\"noSidebar\"],n,[\"mat-raised-button\",\"\",\"color\",\"warn\",\"id\",\"delete-button\",3,\"disabled\",\"click\"],t,[\"mat-stroked-button\",\"\",\"color\",\"primary\",\"id\",\"cancel-button\",3,\"click\"],i,[1,\"info\",3,\"ngClass\"],[1,\"col\"],[1,\"col\",\"l11\",\"m6\",\"s3\"],r,[1,\"row\"],a,[\"class\",\"row\",4,\"ngIf\"],[\"class\",\"row\",3,\"formGroup\",4,\"ngIf\"],[3,\"ngModel\",\"ngModelOptions\",\"change\",\"ngModelChange\"],[4,\"ngIf\"],s,l,[1,\"row\",3,\"formGroup\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"no-info orc-font-body-small\",4,\"ngIf\"],[1,\"row\",\"affiliation-info\",3,\"formGroupName\"],[\"formControlName\",\"checked\",1,\"text-wrap\",3,\"change\"],[1,\"orc-font-body\",\"title\",3,\"ngClass\"],[1,\"details\",\"orc-font-body-small\"],c,[1,\"peer-review\"],u,O,[1,\"capitalize\"],f,R,[1,\"added\",3,\"ngClass\"],T,[1,\"no-info\",\"orc-font-body-small\"],E]},template:function(t,i){1&t&&(e.TgZ(0,\"app-modal\",0)(1,\"app-modal-header\"),e.ynx(2),e.SDv(3,1),e.BQk(),e.qZA(),e.TgZ(4,\"app-modal-footer\")(5,\"button\",2),e.NdJ(\"click\",function(){return i.saveEvent()}),e.ynx(6),e.SDv(7,3),e.BQk(),e.qZA(),e.TgZ(8,\"button\",4),e.NdJ(\"click\",function(){return i.closeEvent()}),e.SDv(9,5),e.qZA()(),e.TgZ(10,\"div\",6)(11,\"div\",7)(12,\"mat-icon\"),e._uU(13,\"info\"),e.qZA()(),e.TgZ(14,\"div\",8)(15,\"p\"),e.SDv(16,9),e.qZA()()(),e.TgZ(17,\"div\",10)(18,\"h3\"),e.ynx(19),e.SDv(20,11),e.BQk(),e._uU(21),e.qZA(),e.YNc(22,yi,6,5,\"div\",12),e._UZ(23,\"mat-divider\",10),e.YNc(24,Gi,3,3,\"div\",13),e.qZA()()),2&t&&(e.Q6J(\"loading\",i.loadingItems)(\"noSidebar\",!0),e.xp6(5),e.Q6J(\"disabled\",i.loadingItems),e.xp6(5),e.Q6J(\"ngClass\",e.WLB(7,Ki,!i.isMobile,i.isMobile)),e.xp6(11),e.hij(\" (\",i.selectedItems.length,\") \"),e.xp6(1),e.Q6J(\"ngIf\",i.items.length>1),e.xp6(2),e.Q6J(\"ngIf\",i.deleteForm&&!i.loadingItems))},dependencies:[p.mk,p.sg,p.O5,d.JJ,d.JL,d.On,d.sg,d.u,d.x0,y.Hw,A.eB,$.z,U.R,Y.Y,Q.d,oe.FC,X.r],styles:[\".title[_ngcontent-%COMP%]{overflow:hidden}mat-checkbox.text-wrap[_ngcontent-%COMP%]     label.mat-checkbox-layout{white-space:normal;word-break:normal;overflow-wrap:anywhere}.title.mobile[_ngcontent-%COMP%]{width:14em}.info[_ngcontent-%COMP%]{display:flex;padding:16px;margin-top:16px;border:solid 2px;border-radius:4px}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.affiliation-info[_ngcontent-%COMP%]{margin-bottom:16px}.affiliation-info[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{margin-left:24px}.affiliation-info[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{margin-left:16px}.affiliation-info[_ngcontent-%COMP%]   .added.mobile[_ngcontent-%COMP%]{margin-inline-start:0}.peer-review[_ngcontent-%COMP%]{margin-inline-end:40px}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.no-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}\",\".info[_ngcontent-%COMP%]{border-color:#ff9c00!important}.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9c00!important}\"]}),_})();var pe=g(80792),v=g(60988);function Bi(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"mat-icon\",8),e._UZ(3,\"img\",9),e._uU(4,\"\\\\n            \"),e.qZA(),e._uU(5,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(2),e.uIk(\"aria-label\",n.selftAssertedSource)}}function Qi(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"mat-icon\",10),e._uU(3,\"check_circle\"),e.qZA(),e._uU(4,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(2),e.uIk(\"aria-label\",n.validatedSourceAriaLabel)}}function Ji(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.YNc(2,Bi,6,1,\"ng-container\",3),e._uU(3,\"\\\\n          \"),e.YNc(4,Qi,5,1,\"ng-container\",3),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J(\"ngIf\",n.assertionOriginOrcid||n.recordOnDisplayIsTheSource&&!n.assertionOriginClientId),e.xp6(2),e.Q6J(\"ngIf\",n.assertionOriginClientId||!n.recordOnDisplayIsTheSource&&!n.assertionOriginOrcid)}}function Xi(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,11),e.qZA(),e._uU(4,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\n            \",n.assertionOriginName||n.assertionOriginOrcid,\"\\\\n            \")}}function Yi(o,_){if(1&o&&(e.TgZ(0,\"div\",6),e._uU(1,\"\\\\n        \"),e.TgZ(2,\"strong\"),e.SDv(3,7),e.qZA(),e._uU(4,\":\\\\n        \"),e.YNc(5,Ji,5,2,\"ng-container\",3),e._uU(6,\"\\\\n        \"),e.TgZ(7,\"div\"),e._uU(8,\"\\\\n          \"),e.YNc(9,Xi,5,1,\"ng-container\",3),e._uU(10),e.qZA(),e._uU(11,\"\\\\n      \"),e.qZA()),2&o){const n=e.oxw();e.xp6(5),e.Q6J(\"ngIf\",void 0!==n.recordOnDisplayIsTheSource),e.xp6(4),e.Q6J(\"ngIf\",n.assertionOriginName||n.assertionOriginOrcid),e.xp6(1),e.hij(\"\\\\n          \",n.sourceName,\"\\\\n        \")}}function qi(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,14),e.qZA(),e._uU(4,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\n            \",n.assertionOriginName||n.assertionOriginOrcid,\"\\\\n            \")}}function zi(o,_){if(1&o){const n=e.EpF();e.ynx(0),e._uU(1,\"\\\\n        \"),e.TgZ(2,\"strong\"),e.SDv(3,12),e.qZA(),e.ynx(4),e._uU(5,\": \"),e.BQk(),e.TgZ(6,\"a\",13),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.clickDisplayAsTopPanelOfTheStack())}),e._uU(7,\"\\\\n          \"),e.YNc(8,qi,5,1,\"ng-container\",3),e._uU(9),e.qZA(),e._uU(10,\"\\\\n      \"),e.BQk()}if(2&o){const n=e.oxw();e.xp6(8),e.Q6J(\"ngIf\",n.assertionOriginName||n.assertionOriginOrcid),e.xp6(1),e.hij(\"\\\\n          \",n.sourceName,\"\")}}function Hi(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",13),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.toggleStackMode())}),e._uU(1,\"\\\\n          (\"),e.ynx(2),e.SDv(3,19),e.BQk(),e._uU(4),e.qZA()}if(2&o){const n=e.oxw(2);e.uIk(\"aria-label\",n.openOtherSources),e.xp6(4),e.hij(\"\\\\n          \",n.stackLength,\")\\\\u200e\\\\n        \")}}function Vi(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",13),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.toggleStackMode())}),e._uU(1,\"\\\\n          \"),e.ynx(2),e.SDv(3,20),e.BQk(),e._uU(4,\"\\\\n        \"),e.qZA()}if(2&o){const n=e.oxw(2);e.uIk(\"aria-label\",n.closeOtherSources)}}function ji(o,_){if(1&o&&(e.TgZ(0,\"div\",15),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"i\",16),e._uU(3,\" grade \"),e.qZA(),e._uU(4,\"\\\\n      \"),e.TgZ(5,\"div\"),e._uU(6,\"\\\\n        \"),e.ynx(7),e.SDv(8,17),e.BQk(),e._uU(9,\"\\\\n        \"),e.YNc(10,Hi,5,2,\"a\",18),e._uU(11,\"\\\\n        \"),e.YNc(12,Vi,5,1,\"a\",18),e._uU(13,\"\\\\n      \"),e.qZA(),e._uU(14,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw();e.xp6(10),e.Q6J(\"ngIf\",!n.displayTheStack&&n.stackLength>1),e.xp6(2),e.Q6J(\"ngIf\",n.stackLength>1&&n.displayTheStack)}}function e_(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",13),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.clickMakePrimary())}),e._uU(1,\"\\\\n        Make preferred source\\\\n      \"),e.qZA()}}function n_(o,_){if(1&o&&(e.TgZ(0,\"div\",15),e._uU(1,\"\\\\n      \"),e.YNc(2,e_,2,0,\"a\",18),e._uU(3,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",n.stackLength>1)}}function t_(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",23),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.delete())}),e.ALo(1,\"appPanelActivityActionAriaLabel\"),e._uU(2,\"\\\\n      \"),e.TgZ(3,\"mat-icon\",24),e._uU(4,\"\\\\n        delete_outline\\\\n      \"),e.qZA(),e._uU(5,\"\\\\n    \"),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J(\"matTooltip\",n.labelDeleteButton),e.uIk(\"aria-label\",e.Dn7(1,2,n.type,\"delete\",n.panelTitle))}}function o_(o,_){if(1&o&&(e.TgZ(0,\"div\",21),e._uU(1,\"\\\\n    \"),e.YNc(2,t_,6,6,\"button\",22),e._uU(3,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",n.stackLength>1&&n.displayTheStack||1===n.stackLength)}}const i_=function(o){return{\"margin-top-2\":o}};let Ne=(()=>{var o;class _{set item(t){this._item=t,this.calculateVerifiedStatus()}get item(){return this._item}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackChange.emit(t)}get displayTheStack(){return this._displayTheStack}set userRecord(t){this._userRecord=t,this.calculateVerifiedStatus()}get userRecord(){return this._userRecord}constructor(t,i,r,a){this._verificationEmailModalService=t,this._dialog=i,this._platformInfo=r,this._activityAction=a,this.closeOtherSources=\"Hide all sources for\",this.openOtherSources=\"Show all sources for\",this.validatedSourceAriaLabel=\"Validated source\",this.selftAssertedSource=\"Self-asserted source\",this.isPreferred=!0,this.displayTheStackChange=new e.vpe,this.makePrimary=new e.vpe,this.clickableSource=!0,this.topPanelOfTheStackModeChange=new e.vpe,this.labelDeleteButton=\"Delete\",this._platformInfo.get().subscribe(s=>{this.isHandset=s.handset})}ngOnInit(){this.panelTitle||(this.panelTitle=\"\");const i=`${this._activityAction.transform(this.type,null,null)} ${this.panelTitle}`;this.closeOtherSources+=i,this.openOtherSources+=i,this.calculateVerifiedStatus()}calculateVerifiedStatus(){var i,r,a,s;const t=this.isPublicRecord||(null==(r=null==(i=this.userRecord)?void 0:i.userInfo)?void 0:r.EFFECTIVE_USER_ORCID);\"string\"==typeof t&&null!=(a=this.item)&&a.source&&(this.recordOnDisplayIsTheSource=t===(null==(s=this.item)?void 0:s.source))}toggleStackMode(){this.stackLength>1&&(this.displayTheStack=!this.displayTheStack)}clickMakePrimary(){this.makePrimary.next()}clickDisplayAsTopPanelOfTheStack(){this.topPanelOfTheStackModeChange.next()}delete(){var i,r,a;const t=null==(a=null==(r=null==(i=this.userRecord)?void 0:i.emails)?void 0:r.emails)?void 0:a.find(s=>s.primary);t&&!t.verified?this._verificationEmailModalService.openVerificationEmailModal(t.value):this._platformInfo.get().pipe((0,k.P)()).subscribe(s=>{let l;l=this._dialog.open(Nn,{width:\"850px\",maxWidth:s.tabletOrHandset?\"99%\":\"80vw\"}),l.componentInstance.type=this.type,l.componentInstance.item=this.item})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36($e.n),e.Y36(J.on),e.Y36(D.tu),e.Y36(pe.Q))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-panel-source\"]],inputs:{isPublicRecord:\"isPublicRecord\",isPreferred:\"isPreferred\",source:\"source\",sourceName:\"sourceName\",assertionOriginOrcid:\"assertionOriginOrcid\",assertionOriginName:\"assertionOriginName\",assertionOriginClientId:\"assertionOriginClientId\",stackLength:\"stackLength\",type:\"type\",item:\"item\",displayTheStack:\"displayTheStack\",topPanelOfTheStackMode:\"topPanelOfTheStackMode\",clickableSource:\"clickableSource\",userRecord:\"userRecord\",panelTitle:\"panelTitle\"},outputs:{displayTheStackChange:\"displayTheStackChange\",makePrimary:\"makePrimary\",topPanelOfTheStackModeChange:\"topPanelOfTheStackModeChange\"},decls:21,vars:8,consts:function(){let n,t,i,r,a,s,l;return n=\"Source\",t=\"via\",i=\"Source\",r=\"via\",a=\"Preferred source\",s=\"of\",l=\"(Close other sources)\",[[1,\"panel-footer\",3,\"ngClass\"],[1,\"source-items\"],[\"class\",\"source-title\",4,\"ngIf\"],[4,\"ngIf\"],[\"class\",\"preferred-source\",4,\"ngIf\"],[\"align-end\",\"\",4,\"ngIf\"],[1,\"source-title\"],n,[\"aria-hidden\",\"false\"],[\"src\",\"./assets/vectors/profile-not-verified.svg\"],[\"aria-hidden\",\"false\",1,\"verified\"],t,i,[3,\"click\"],r,[1,\"preferred-source\"],[1,\"material-icons\"],a,[3,\"click\",4,\"ngIf\"],s,l,[\"align-end\",\"\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\",4,\"ngIf\"],[\"mat-icon-button\",\"\",3,\"matTooltip\",\"click\"],[1,\"large-material-icon\",\"delete-button\"]]},template:function(t,i){1&t&&(e.TgZ(0,\"app-panel-data\",0),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"div\",1),e._uU(3,\"\\\\n    \"),e.TgZ(4,\"div\"),e._uU(5,\"\\\\n      \"),e._uU(6,\"\\\\n      \"),e.YNc(7,Yi,12,3,\"div\",2),e._uU(8,\"\\\\n      \"),e._uU(9,\"\\\\n      \"),e.YNc(10,zi,11,2,\"ng-container\",3),e._uU(11,\"\\\\n    \"),e.qZA(),e._uU(12,\"\\\\n    \"),e.YNc(13,ji,15,2,\"div\",4),e._uU(14,\"\\\\n\\\\n    \"),e.YNc(15,n_,4,1,\"div\",4),e._uU(16,\"\\\\n  \"),e.qZA(),e._uU(17,\"\\\\n  \"),e.YNc(18,o_,4,1,\"div\",5),e._uU(19,\"\\\\n\"),e.qZA(),e._uU(20,\"\\\\n\")),2&t&&(e.Q6J(\"ngClass\",e.VKq(6,i_,!i.displayTheStack)),e.xp6(7),e.Q6J(\"ngIf\",i.topPanelOfTheStackMode||!i.clickableSource),e.xp6(3),e.Q6J(\"ngIf\",!i.topPanelOfTheStackMode&&i.clickableSource),e.xp6(3),e.Q6J(\"ngIf\",i.isPreferred&&i.stackLength>1),e.xp6(2),e.Q6J(\"ngIf\",!i.isPreferred&&i.stackLength>1&&!i.isPublicRecord),e.xp6(3),e.Q6J(\"ngIf\",!i.isPublicRecord))},dependencies:[p.mk,p.O5,y.Hw,A.eB,Ye.Kd,v.t,se.j,pe.Q],styles:[\"app-panel-data[_ngcontent-%COMP%]     .panel-data-container{align-items:center}.panel-footer[_ngcontent-%COMP%], .panel-footer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:8px 8px 8px 16px}.preferred-source[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-inline-start:20px;align-items:center}.source-items[_ngcontent-%COMP%]{display:flex;align-items:center}.columns-8   [_nghost-%COMP%]   .source-items[_ngcontent-%COMP%], .columns-4   [_nghost-%COMP%]   .source-items[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.columns-8   [_nghost-%COMP%]   .source-items[_ngcontent-%COMP%]   .preferred-source[_ngcontent-%COMP%], .columns-4   [_nghost-%COMP%]   .source-items[_ngcontent-%COMP%]   .preferred-source[_ngcontent-%COMP%]{margin-inline-start:0px;align-items:center}.source-title[_ngcontent-%COMP%]{display:flex;align-items:center}.source-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px;align-items:center;display:flex;justify-content:center}.source-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}\",\".verified[_ngcontent-%COMP%]{color:#a6ce39}.not-verified[_ngcontent-%COMP%]{color:#8ec2db}\"]}),_})();const __=[[[\"h3\"]],[[\"div\"]]],r_=[\"h3\",\"div\"];let Fe=(()=>{var o;class _{constructor(){}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-display-attribute\"]],inputs:{title:\"title\",content:\"content\"},ngContentSelectors:r_,decls:5,vars:0,consts:[[1,\"title-container\"]],template:function(t,i){1&t&&(e.F$t(__),e.TgZ(0,\"div\")(1,\"div\",0),e.Hsn(2),e.qZA(),e.TgZ(3,\"div\",0),e.Hsn(4,1),e.qZA()())},styles:[\"app-display-attribute .title-container>h3{margin:0}[_nghost-%COMP%]{display:block;margin-bottom:15px;word-break:break-word}\"]}),_})(),a_=(()=>{var o;class _{transform(t,i){let r=\"\";return t&&(r+=t.city?t.city:\"\",r+=t.region?t.city?\", \"+t.region:t.region:\"\",r+=t.country?r?\", \"+t.country:t.country:\"\"),r}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"cityRegionCountry\",type:o,pure:!0}),_})(),s_=(()=>{var o;class _{transform(t){return RegExp(I.ur).test(t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"isUrlWithProtocol\",type:o,pure:!0}),_})(),l_=(()=>{var o;class _{transform(t,i){if(i)return this.isUrl(i)?i:this.getLink(t,i)}isUrl(t){return RegExp(I.ur).test(t)}getLink(t,i){switch(t.toUpperCase()){case\"TEST\":return\"https://orcid.org/\"+i;case\"GRID\":case\"ROR\":return i;case\"ISNI\":return\"https://isni.org/isni/\"+i.replace(I.Ow,\"\");case\"LINKEDIN\":return\"https://www.linkedin.com/company/\"+i;case\"WIKIDATA\":return\"https://wikidata.org/wiki/\"+i;default:return\"\"}}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"organizationLink\",type:o,pure:!0}),_})();function c_(o,_){1&o&&(e.ynx(0),e._uU(1,\":\"),e.BQk())}function d_(o,_){if(1&o&&(e.TgZ(0,\"a\",7),e.ALo(1,\"organizationLink\"),e._uU(2),e.qZA()),2&o){const n=e.oxw(2);e.s9C(\"href\",e.xi3(1,2,n.orgDisambiguated.sourceType,n.orgDisambiguated.sourceId),e.LSH),e.xp6(2),e.hij(\"\\\\n          \",n.orgDisambiguated.sourceId,\"\\\\n        \")}}function p_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\n          \",null==n.orgDisambiguated?null:n.orgDisambiguated.sourceId,\"\\\\n        \")}}function u_(o,_){1&o&&(e.ynx(0),e._uU(1,\":\"),e.BQk())}function g_(o,_){if(1&o&&(e.TgZ(0,\"a\",8),e._uU(1),e.qZA()),2&o){const n=e.oxw(2);e.Q6J(\"href\",null==n.orgDisambiguated?null:n.orgDisambiguated.url,e.LSH),e.xp6(1),e.hij(\"\\\\n        \",null==n.orgDisambiguated?null:n.orgDisambiguated.url,\"\\\\n      \")}}function f_(o,_){if(1&o&&(e.TgZ(0,\"a\",7),e.ALo(1,\"organizationLink\"),e._uU(2),e.qZA()),2&o){const n=e.oxw().$implicit;e.s9C(\"href\",e.xi3(1,2,n.identifierType,n.preferred),e.LSH),e.xp6(2),e.hij(\"\\\\n        \",n.preferred,\"\\\\n      \")}}function O_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\"\\\\n        \",n.preferred,\"\\\\n      \")}}function C_(o,_){1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.TgZ(2,\"span\"),e._uU(3,\" (\"),e.qZA(),e.TgZ(4,\"span\"),e.SDv(5,13),e.qZA(),e.TgZ(6,\"span\"),e._uU(7,\")\"),e.qZA(),e.BQk())}function R_(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\", \"),e.qZA())}function T_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n)}}function m_(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"a\",7),e.ALo(3,\"organizationLink\"),e._uU(4),e.qZA(),e._uU(5,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(2).$implicit,t=e.oxw().$implicit;e.xp6(2),e.s9C(\"href\",e.xi3(3,2,t.identifierType,n),e.LSH),e.xp6(2),e.hij(\"\\\\n              \",n,\"\\\\n            \")}}function E_(o,_){if(1&o&&(e.TgZ(0,\"a\",7),e._uU(1),e.qZA()),2&o){const n=e.oxw(3).$implicit;e.s9C(\"href\",n,e.LSH),e.xp6(1),e.hij(\"\\\\n              \",n,\"\\\\n            \")}}function S_(o,_){if(1&o&&(e.YNc(0,E_,2,2,\"a\",5),e.ALo(1,\"isUrlWithProtocol\")),2&o){const n=e.oxw(2).$implicit;e.Q6J(\"ngIf\",e.lcZ(1,1,n))}}function h_(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\",\\\\n          \"),e.qZA())}function N_(o,_){if(1&o&&(e.ynx(0),e.YNc(1,T_,2,1,\"ng-container\",4),e.ALo(2,\"isUrlWithProtocol\"),e.ALo(3,\"organizationLink\"),e.YNc(4,m_,6,5,\"ng-container\",14),e.ALo(5,\"organizationLink\"),e._uU(6,\"\\\\n          \"),e.YNc(7,S_,2,3,\"ng-template\",null,15,e.W1O),e._uU(9,\"\\\\n          \"),e.YNc(10,h_,2,0,\"span\",4),e._uU(11,\"\\\\n        \"),e.BQk()),2&o){const n=e.MAs(8),t=e.oxw(),i=t.$implicit,r=t.index,a=e.oxw().$implicit;e.xp6(1),e.Q6J(\"ngIf\",!e.lcZ(2,4,i)&&\"\"===e.xi3(3,6,a.identifierType,i)),e.xp6(3),e.Q6J(\"ngIf\",\"\"!==e.xi3(5,9,a.identifierType,i))(\"ngIfElse\",n),e.xp6(6),e.Q6J(\"ngIf\",a.all[r+1]&&a.all[r+1]!=a.preferred)}}function M_(o,_){if(1&o&&(e.ynx(0),e.YNc(1,N_,12,12,\"ng-container\",4),e._uU(2,\"\\\\n      \"),e.BQk()),2&o){const n=_.$implicit,t=e.oxw().$implicit;e.xp6(1),e.Q6J(\"ngIf\",n!=t.preferred)}}function P_(o,_){if(1&o&&(e.TgZ(0,\"div\",11),e._uU(1),e.YNc(2,f_,3,5,\"a\",5),e.ALo(3,\"isUrlWithProtocol\"),e.ALo(4,\"organizationLink\"),e._uU(5,\"\\\\n      \"),e.YNc(6,O_,2,1,\"ng-container\",4),e.ALo(7,\"isUrlWithProtocol\"),e.ALo(8,\"organizationLink\"),e._uU(9,\"\\\\n      \"),e.YNc(10,C_,8,0,\"ng-container\",4),e.YNc(11,R_,2,0,\"span\",4),e.YNc(12,M_,3,1,\"ng-container\",12),e._uU(13,\"\\\\n    \"),e.qZA()),2&o){const n=_.$implicit;e.xp6(1),e.hij(\"\\\\n      \",n.identifierType,\":\\\\n      \"),e.xp6(1),e.Q6J(\"ngIf\",e.lcZ(3,6,e.xi3(4,8,n.identifierType,n.preferred))),e.xp6(4),e.Q6J(\"ngIf\",!e.lcZ(7,11,e.xi3(8,13,n.identifierType,n.preferred))),e.xp6(4),e.Q6J(\"ngIf\",n.preferred),e.xp6(1),e.Q6J(\"ngIf\",n.preferred&&n.all.length>1),e.xp6(1),e.Q6J(\"ngForOf\",n.all)}}function b_(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",2),e._uU(3,\"\\\\n      \"),e.ynx(4),e.SDv(5,9),e.BQk(),e._uU(6),e.ALo(7,\"uppercase\"),e.qZA(),e._uU(8,\"\\\\n    \"),e.YNc(9,P_,14,16,\"div\",10),e._uU(10,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(6),e.hij(\"\\\\n      \",e.lcZ(7,2,n.orgDisambiguated.sourceType),\"\\\\n    \"),e.xp6(3),e.Q6J(\"ngForOf\",n.orgDisambiguated.orgDisambiguatedExternalIdentifiers)}}function A_(o,_){if(1&o&&(e.ynx(0,1),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n    \"),e.TgZ(4,\"h3\",2),e.SDv(5,3),e.qZA(),e._uU(6,\"\\\\n    \"),e.TgZ(7,\"div\"),e._uU(8,\"\\\\n      \"),e.TgZ(9,\"div\"),e._uU(10),e.YNc(11,c_,2,0,\"ng-container\",4),e._uU(12,\"\\\\n        \"),e.YNc(13,d_,3,5,\"a\",5),e.ALo(14,\"isUrlWithProtocol\"),e.ALo(15,\"organizationLink\"),e._uU(16,\"\\\\n        \"),e.YNc(17,p_,2,1,\"ng-container\",4),e.ALo(18,\"isUrlWithProtocol\"),e.ALo(19,\"organizationLink\"),e._uU(20,\"\\\\n      \"),e.qZA(),e._uU(21,\"\\\\n      \"),e.TgZ(22,\"div\"),e._uU(23),e.YNc(24,u_,2,0,\"ng-container\",4),e._uU(25),e.ALo(26,\"cityRegionCountry\"),e.qZA(),e._uU(27,\"\\\\n\\\\n      \"),e.YNc(28,g_,2,2,\"a\",6),e._uU(29,\"\\\\n    \"),e.qZA(),e._uU(30,\"\\\\n  \"),e.qZA(),e._uU(31,\"\\\\n\\\\n  \"),e.YNc(32,b_,11,4,\"app-display-attribute\",4),e._uU(33,\"\\\\n\"),e.BQk()),2&o){const n=e.oxw();e.xp6(10),e.hij(\"\\\\n        \",null==n.orgDisambiguated?null:n.orgDisambiguated.sourceType,\"\"),e.xp6(1),e.Q6J(\"ngIf\",n.orgDisambiguated.sourceType&&n.orgDisambiguated.sourceId),e.xp6(2),e.Q6J(\"ngIf\",e.lcZ(14,9,e.xi3(15,11,n.orgDisambiguated.sourceType,n.orgDisambiguated.sourceId))),e.xp6(4),e.Q6J(\"ngIf\",!e.lcZ(18,14,e.xi3(19,16,n.orgDisambiguated.sourceType,n.orgDisambiguated.sourceId))),e.xp6(6),e.hij(\"\\\\n        \",null==n.orgDisambiguated?null:n.orgDisambiguated.value,\"\"),e.xp6(1),e.Q6J(\"ngIf\",null==n.orgDisambiguated?null:n.orgDisambiguated.value),e.xp6(1),e.hij(\"\\\\n        \",e.lcZ(26,19,n.orgDisambiguated),\"\\\\n      \"),e.xp6(3),e.Q6J(\"ngIf\",null==n.orgDisambiguated?null:n.orgDisambiguated.url),e.xp6(4),e.Q6J(\"ngIf\",(null==n.orgDisambiguated||null==n.orgDisambiguated.orgDisambiguatedExternalIdentifiers?null:n.orgDisambiguated.orgDisambiguatedExternalIdentifiers.length)>0)}}let _n=(()=>{var o;class _{constructor(t){this._organizationsService=t}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(j.zT))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-org-identifier\"]],inputs:{orgDisambiguated:\"orgDisambiguated\"},decls:2,vars:1,consts:function(){let n,t,i;return n=\"Organization identifiers\",t=\"Other organization identifiers provided by\",i=\"preferred\",[[\"class\",\"margin-top-1\",4,\"ngIf\"],[1,\"margin-top-1\"],[1,\"orc-font-body-small\"],n,[4,\"ngIf\"],[\"class\",\"underline\",\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",3,\"href\",4,\"ngIf\"],[\"class\",\"underline\",\"target\",\"_blank\",\"rel\",\"noreferrer noopener\",3,\"href\",4,\"ngIf\"],[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"underline\",3,\"href\"],[\"target\",\"_blank\",\"rel\",\"noreferrer noopener\",1,\"underline\",3,\"href\"],t,[\"class\",\"padding-level-3\",4,\"ngFor\",\"ngForOf\"],[1,\"padding-level-3\"],[4,\"ngFor\",\"ngForOf\"],i,[4,\"ngIf\",\"ngIfElse\"],[\"plainUrl\",\"\"]]},template:function(t,i){1&t&&(e.YNc(0,A_,34,21,\"ng-container\",0),e._uU(1,\"\\\\n\")),2&t&&e.Q6J(\"ngIf\",i.orgDisambiguated)},dependencies:[p.sg,p.O5,Fe,p.gd,a_,s_,l_],styles:[\"a[_ngcontent-%COMP%]{display:inline-block}\"]}),_})();var Mn=g(8015);let rn=(()=>{var o;class _{transform(t){return RegExp(I.Oe).test(t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"isUrl\",type:o,pure:!0}),_})();function I_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,n.affiliation.endDate))}}function x_(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.ynx(2),e.SDv(3,8),e.BQk(),e._uU(4,\"\\\\n          \"),e.YNc(5,I_,3,3,\"ng-container\",2),e.BQk()),2&o){const n=e.oxw(2);e.xp6(5),e.Q6J(\"ngIf\",n.affiliation.endDate)}}function y_(o,_){1&o&&(e.ynx(0),e.SDv(1,9),e.BQk())}function k_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.YNc(3,x_,6,1,\"ng-container\",2),e._uU(4,\"\\\\n        \"),e.YNc(5,y_,2,0,\"ng-container\",2),e._uU(6,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.hij(\"\",e.lcZ(2,3,n.affiliation.startDate),\"\\\\n        \"),e.xp6(2),e.Q6J(\"ngIf\",n.showEndDateRange),e.xp6(2),e.Q6J(\"ngIf\",!n.affiliation.endDate.year&&\"distinction\"!==(null==n.affiliation.affiliationType?null:n.affiliation.affiliationType.value))}}function v_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\n          \",e.lcZ(2,1,n.affiliation.endDate),\"\\\\n        \")}}function D_(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.YNc(2,v_,3,3,\"ng-container\",2),e._uU(3,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",null==n.affiliation.endDate?null:n.affiliation.endDate.year)}}function w_(o,_){1&o&&(e.ynx(0),e._uU(1,\"\\\\n        |\\\\n      \"),e.BQk())}function L_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.hij(\"\\\\n        (\",n.affiliation.departmentName.value,\")\\\\n      \")}}function $_(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",10),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.affiliation))}),e.SDv(1,11),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,null==n.affiliation?null:n.affiliation.affiliationType.value,\"show\",null==n.affiliation||null==n.affiliation.affiliationName?null:n.affiliation.affiliationName.value))}}function U_(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",10),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.affiliation))}),e.SDv(1,12),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,null==n.affiliation?null:n.affiliation.affiliationType.value,\"hide\",null==n.affiliation||null==n.affiliation.affiliationName?null:n.affiliation.affiliationName.value))}}function Z_(o,_){if(1&o&&(e.TgZ(0,\"a\",20),e._uU(1),e.qZA()),2&o){const n=e.oxw(3);e.s9C(\"href\",n.affiliation.url.value,e.LSH),e.xp6(1),e.hij(\"\\\\n        \",n.affiliation.url.value,\"\\\\n      \")}}function W_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"\\\\n        \",n.affiliation.url.value,\"\\\\n      \")}}function F_(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",15),e.SDv(3,18),e.qZA(),e._uU(4,\"\\\\n\\\\n    \"),e.TgZ(5,\"div\"),e._uU(6,\"\\\\n      \"),e.YNc(7,Z_,2,2,\"a\",19),e.ALo(8,\"isUrl\"),e._uU(9,\"\\\\n      \"),e.YNc(10,W_,2,1,\"ng-container\",2),e.ALo(11,\"isUrl\"),e._uU(12,\"\\\\n    \"),e.qZA(),e._uU(13,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(7),e.Q6J(\"ngIf\",e.lcZ(8,2,null==n.affiliation.url?null:n.affiliation.url.value)),e.xp6(3),e.Q6J(\"ngIf\",!e.lcZ(11,4,null==n.affiliation.url?null:n.affiliation.url.value))}}function G_(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\",13),e._uU(1,\"\\\\n  \"),e._uU(2,\"\\\\n  \"),e._UZ(3,\"app-org-identifier\",14),e._uU(4,\"\\\\n\\\\n  \"),e._uU(5,\"\\\\n  \"),e.YNc(6,F_,14,6,\"app-display-attribute\",2),e._uU(7,\"\\\\n\\\\n  \"),e._uU(8,\"\\\\n  \"),e.TgZ(9,\"app-display-attribute\"),e._uU(10,\"\\\\n    \"),e.TgZ(11,\"h3\",15),e.SDv(12,16),e.qZA(),e._uU(13,\"\\\\n    \"),e.TgZ(14,\"div\"),e._uU(15),e.ALo(16,\"monthDayYearDateToString\"),e.qZA(),e._uU(17,\"\\\\n  \"),e.qZA(),e._uU(18,\"\\\\n\\\\n  \"),e._uU(19,\"\\\\n  \"),e.TgZ(20,\"app-display-attribute\"),e._uU(21,\"\\\\n    \"),e.TgZ(22,\"h3\",15),e.SDv(23,17),e.qZA(),e._uU(24,\"\\\\n    \"),e.TgZ(25,\"div\"),e._uU(26),e.ALo(27,\"monthDayYearDateToString\"),e.qZA(),e._uU(28,\"\\\\n  \"),e.qZA(),e._uU(29,\"\\\\n\"),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"borderBottom\",!0),e.xp6(3),e.Q6J(\"orgDisambiguated\",n.orgDisambiguated),e.xp6(3),e.Q6J(\"ngIf\",null==n.affiliation||null==n.affiliation.url?null:n.affiliation.url.value),e.xp6(9),e.hij(\"\\\\n      \",e.lcZ(16,5,null==n.affiliation?null:n.affiliation.createdDate),\"\\\\n    \"),e.xp6(11),e.Oqu(e.lcZ(27,7,null==n.affiliation?null:n.affiliation.lastModified))}}let K_=(()=>{var o;class _{set affiliation(t){this.showEndDateRange=this.isAffiliationEndDateRangeShown(t),this.affiliationValue=t}get affiliation(){return this.affiliationValue}constructor(){this.toggleDetails=new e.vpe,this.showEndDateRange=!0}ngOnInit(){}isAffiliationEndDateRangeShown(t){return!((null==t?void 0:t.affiliationType.value)===K.c4.distinction&&!t.endDate.year)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-affiliation\"]],inputs:{affiliation:\"affiliation\",panelDetailsState:\"panelDetailsState\",stackMode:\"stackMode\",orgDisambiguated:\"orgDisambiguated\"},outputs:{toggleDetails:\"toggleDetails\"},decls:35,vars:13,consts:function(){let n,t,i,r,a,s,l;return n=\"to\",t=\"present\",i=\"Show more detail\",r=\"Show less detail\",a=\"Added\",s=\"Last modified\",l=\"URL\",[[1,\"default-data-loaded\",\"orc-font-body-small\",3,\"borderBottom\"],[1,\"general-data\"],[4,\"ngIf\"],[1,\"type\"],[3,\"externalIdentifiers\"],[\"align-end\",\"\"],[\"class\",\"underline\",3,\"click\",4,\"ngIf\"],[3,\"borderBottom\",4,\"ngIf\"],n,t,[1,\"underline\",3,\"click\"],i,r,[3,\"borderBottom\"],[3,\"orgDisambiguated\"],[1,\"orc-font-body-small\"],a,s,l,[\"class\",\"underline\",\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",3,\"href\",4,\"ngIf\"],[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",1,\"underline\",3,\"href\"]]},template:function(t,i){1&t&&(e._uU(0,\"\\\\n\\\\n\"),e._uU(1,\"\\\\n\"),e.TgZ(2,\"app-panel-data\",0),e._uU(3,\"\\\\n  \"),e.TgZ(4,\"div\"),e._uU(5,\"\\\\n    \"),e.TgZ(6,\"div\",1),e._uU(7,\"\\\\n      \"),e.YNc(8,k_,7,5,\"ng-container\",2),e._uU(9,\"\\\\n      \"),e.YNc(10,D_,4,1,\"ng-container\",2),e._uU(11,\"\\\\n      \"),e.YNc(12,w_,2,0,\"ng-container\",2),e._uU(13),e.YNc(14,L_,2,1,\"ng-container\",2),e._uU(15,\"\\\\n    \"),e.qZA(),e._uU(16,\"\\\\n    \"),e.TgZ(17,\"div\",3),e._uU(18),e.ALo(19,\"affiliationTypeLabel\"),e.qZA(),e._uU(20,\"\\\\n    \"),e._UZ(21,\"app-display-external-ids\",4),e._uU(22,\"\\\\n  \"),e.qZA(),e._uU(23,\"\\\\n\\\\n  \"),e.TgZ(24,\"div\",5),e._uU(25,\"\\\\n    \"),e.YNc(26,$_,3,5,\"a\",6),e._uU(27,\"\\\\n    \"),e.YNc(28,U_,3,5,\"a\",6),e._uU(29,\"\\\\n  \"),e.qZA(),e._uU(30,\"\\\\n\"),e.qZA(),e._uU(31,\"\\\\n\\\\n\"),e._uU(32,\"\\\\n\"),e.YNc(33,G_,30,9,\"app-panel-data\",7),e._uU(34,\"\\\\n\")),2&t&&(e.xp6(2),e.Q6J(\"borderBottom\",!0),e.xp6(6),e.Q6J(\"ngIf\",null==i.affiliation||null==i.affiliation.startDate?null:i.affiliation.startDate.year),e.xp6(2),e.Q6J(\"ngIf\",!(null!=i.affiliation&&null!=i.affiliation.startDate&&i.affiliation.startDate.year)&&(null==i.affiliation?null:i.affiliation.endDate)),e.xp6(2),e.Q6J(\"ngIf\",((null==i.affiliation||null==i.affiliation.startDate?null:i.affiliation.startDate.year)||(null==i.affiliation||null==i.affiliation.endDate?null:i.affiliation.endDate.year))&&(null==i.affiliation||null==i.affiliation.roleTitle?null:i.affiliation.roleTitle.value)),e.xp6(1),e.hij(\"\\\\n      \",null==i.affiliation||null==i.affiliation.roleTitle?null:i.affiliation.roleTitle.value,\"\\\\n      \"),e.xp6(1),e.Q6J(\"ngIf\",null==i.affiliation||null==i.affiliation.departmentName?null:i.affiliation.departmentName.value),e.xp6(4),e.hij(\"\\\\n      \",e.lcZ(19,11,null==i.affiliation||null==i.affiliation.affiliationType?null:i.affiliation.affiliationType.value),\"\\\\n    \"),e.xp6(3),e.Q6J(\"externalIdentifiers\",null==i.affiliation?null:i.affiliation.affiliationExternalIdentifiers),e.xp6(5),e.Q6J(\"ngIf\",!(null!=i.panelDetailsState&&i.panelDetailsState.state)),e.xp6(2),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state),e.xp6(5),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state))},dependencies:[p.O5,se.j,v.t,fe,Fe,_n,X.r,Mn.V,rn,pe.Q],styles:[\"[_nghost-%COMP%]{width:100%}\"]}),_})();function B_(o,_){1&o&&(e.TgZ(0,\"mat-icon\",10),e._uU(1,\"join_inner\"),e.qZA())}function Q_(o,_){1&o&&(e.TgZ(0,\"mat-icon\",10),e._uU(1,\"stars\"),e.qZA())}function J_(o,_){1&o&&(e.TgZ(0,\"mat-icon\",10),e._uU(1,\"card_membership\"),e.qZA())}function X_(o,_){1&o&&(e.TgZ(0,\"mat-icon\",10),e._uU(1,\"badge\"),e.qZA())}function Y_(o,_){if(1&o&&(e.ynx(0),e.YNc(1,B_,2,0,\"mat-icon\",8),e.YNc(2,Q_,2,0,\"mat-icon\",8),e.YNc(3,J_,2,0,\"mat-icon\",8),e.YNc(4,X_,2,0,\"mat-icon\",8),e._UZ(5,\"div\",9),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J(\"ngIf\",\"invited-position\"===n.type),e.xp6(1),e.Q6J(\"ngIf\",\"distinction\"===n.type),e.xp6(1),e.Q6J(\"ngIf\",\"membership\"===n.type),e.xp6(1),e.Q6J(\"ngIf\",\"service\"===n.type)}}function q_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\" \",n.city.value,\", \")}}function z_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\" \",n.region.value,\", \")}}function H_(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\" \",n.country.value,\" \")}}function V_(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-affiliation\",11),e.NdJ(\"toggleDetails\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.toggleDetails(i))}),e.qZA()}if(2&o){const n=e.oxw(2).$implicit,t=e.oxw();e.Q6J(\"affiliation\",n)(\"panelDetailsState\",t.panelDetailsState[n.putCode.value])(\"orgDisambiguated\",t.orgDisambiguated[n.putCode.value])}}const j_=function(o){return{\"z-index\":o}},er=function(o){return{last:o}},nr=function(o){return{mobile:o}};function tr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",2),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)}),e.TgZ(1,\"div\",3),e.YNc(2,Y_,6,4,\"ng-container\",4),e.TgZ(3,\"h4\",5),e._uU(4),e.YNc(5,q_,2,1,\"ng-container\",4),e.YNc(6,z_,2,1,\"ng-container\",4),e.YNc(7,H_,2,1,\"ng-container\",4),e.qZA()(),e.YNc(8,V_,1,3,\"app-affiliation\",6),e.TgZ(9,\"app-panel-source\",7),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"makePrimary\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.makePrimaryCard(i))})(\"topPanelOfTheStackModeChange\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.changeTopPanelOfTheStack(i))}),e.qZA()()}if(2&o){const n=e.oxw(),t=n.index,i=n.$implicit,r=n.last,a=e.oxw();e.s9C(\"id\",\"cy-affiliation-\"+a.type+\"-\"+t),e.Q6J(\"userRecord\",a.userRecord)(\"elements\",i)(\"stackSiblings\",a.affiliationStack.affiliations)(\"editableVisibilityControl\",a.isPreferred(i))(\"editModalComponent\",a.modalAffiliationsComponent)(\"type\",a.type)(\"ngStyle\",e.VKq(37,j_,a.affiliationStack.affiliations.length-t))(\"ngClass\",e.VKq(39,er,r))(\"putCode\",i.putCode.value)(\"visibility\",a.affiliationStack.defaultAffiliation.visibility.visibility)(\"isPublicRecord\",a.isPublicRecord)(\"isUserSource\",i.userIsSource)(\"userVersionPresent\",a.affiliationStack.userVersionPresent)(\"displayTheStack\",a.displayTheStack)(\"hasExternalIds\",a.hasExternalIdentifiers)(\"panelTitle\",i.affiliationName.value),e.xp6(2),e.Q6J(\"ngIf\",a.professionalActivitiesTogglz),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(41,nr,a.isMobile)),e.xp6(1),e.hij(\" \",i.affiliationName.value,\": \"),e.xp6(1),e.Q6J(\"ngIf\",i.city.value),e.xp6(1),e.Q6J(\"ngIf\",i.region.value),e.xp6(1),e.Q6J(\"ngIf\",i.country.value),e.xp6(1),e.Q6J(\"ngIf\",a.stackPanelsDisplay[i.putCode.value].topPanelOfTheStack),e.xp6(1),e.Q6J(\"userRecord\",a.userRecord)(\"isPreferred\",a.isPreferred(i))(\"sourceName\",i.sourceName||i.source)(\"assertionOriginName\",i.assertionOriginName)(\"assertionOriginOrcid\",i.assertionOriginOrcid)(\"assertionOriginClientId\",i.assertionOriginClientId)(\"stackLength\",a.affiliationStack.affiliations.length)(\"displayTheStack\",a.displayTheStack)(\"topPanelOfTheStackMode\",a.stackPanelsDisplay[i.putCode.value].topPanelOfTheStack)(\"isPublicRecord\",a.isPublicRecord)(\"type\",a.type)(\"item\",i)(\"panelTitle\",i.affiliationName.value)}}function or(o,_){if(1&o&&(e.ynx(0),e.YNc(1,tr,10,43,\"app-panel\",1),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isPreferred(n)||t.displayTheStack)}}let ir=(()=>{var o;class _{set affiliationStack(t){this.hasExternalIdentifiers=!!t.externalIdentifiers.length,this._affiliationStack=t,this._affiliationStack.affiliations=this._affiliationStack.affiliations.map(i=>({...i,userIsSource:this.userIsSource(i)})),this.setAffiliationsInitialStates(t)}get affiliationStack(){return this._affiliationStack}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackClass=this._displayTheStack,this.setAffiliationsInitialStates(this.affiliationStack,!0)}get displayTheStack(){return this._displayTheStack}set userInfo(t){this._userInfo=t,this._affiliationStack.affiliations=this._affiliationStack.affiliations.map(i=>({...i,userIsSource:this.userIsSource(i)}))}get userInfo(){return this._userInfo}constructor(t,i,r,a){this._affiliationService=t,this._organizationsService=i,this._togglz=r,this._platform=a,this.$destroy=new w.xQ,this.displayTheStackClass=!1,this.isPublicRecord=null,this._displayTheStack=!1,this.professionalActivitiesTogglz=!1,this.orgDisambiguated={},this.stackPanelsDisplay={},this.panelDetailsState={},this.modalAffiliationsComponent=Xe.X}setAffiliationsInitialStates(t,i=!1){var r;1===(null==(r=t.affiliations)?void 0:r.length)&&this.displayTheStack&&(this.displayTheStack=!1),t.affiliations.forEach(a=>{this.setDefaultPanelsDisplay(a,i),this.setDefaultPanelDetailsState(a,i)})}setDefaultPanelDetailsState(t,i=!1){(void 0===this.panelDetailsState[t.putCode.value]||i)&&(this.panelDetailsState[t.putCode.value]={state:!1})}setDefaultPanelsDisplay(t,i=!1){(void 0===this.stackPanelsDisplay[t.putCode.value]||i)&&(this.stackPanelsDisplay[t.putCode.value]={topPanelOfTheStack:!!this.isPreferred(t)})}isPreferred(t){return!(!t||!this.affiliationStack)&&this.affiliationStack.defaultAffiliation.putCode.value===t.putCode.value}toggleDetails(t){const i=t.putCode.value;this.panelDetailsState[i].state=!this.panelDetailsState[i].state,this.panelDetailsState[i].state&&!this.orgDisambiguated[i]&&this.getMoreDetailsAndOrganizationDisambiguatedFromTheServer(t).subscribe(r=>{this.orgDisambiguated[i]=r[0]||null})}getMoreDetailsAndOrganizationDisambiguatedFromTheServer(t){const i=t.putCode.value;let r=(0,Pi.of)(!1);t.disambiguationSource&&(r=this._organizationsService.getOrgDisambiguated(t.disambiguationSource.value,t.disambiguatedAffiliationSourceId.value));const a=this._affiliationService.getAffiliationsDetails(t.affiliationType.value,i,{publicRecordId:this.isPublicRecord});return(0,bi.aj)([r,a]).pipe((0,k.P)())}makePrimaryCard(t){this._affiliationService.updatePreferredSource(t.putCode.value).subscribe()}changeTopPanelOfTheStack(t){Object.keys(this.stackPanelsDisplay).forEach(i=>{this.stackPanelsDisplay[i].topPanelOfTheStack=!1}),this.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack=!0}trackByAffiliationStack(t,i){return i.putCode.value}userIsSource(t){return!!this.userInfo&&t.source===this.userInfo.EFFECTIVE_USER_ORCID}ngOnInit(){this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(t=>this.isMobile=t.columns4||t.columns8)}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(Ze.l),e.Y36(j.zT),e.Y36(re.b),e.Y36(D.tu))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-affiliation-stack\"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj(\"display-the-stack\",i.displayTheStackClass)},inputs:{userRecord:\"userRecord\",isPublicRecord:\"isPublicRecord\",type:\"type\",affiliationStack:\"affiliationStack\",userInfo:\"userInfo\",professionalActivitiesTogglz:\"professionalActivitiesTogglz\"},decls:1,vars:2,consts:[[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"panelId\",\"affiliation-stack\",3,\"userRecord\",\"elements\",\"stackSiblings\",\"editableVisibilityControl\",\"editModalComponent\",\"type\",\"ngStyle\",\"ngClass\",\"putCode\",\"visibility\",\"isPublicRecord\",\"isUserSource\",\"userVersionPresent\",\"displayTheStack\",\"hasExternalIds\",\"id\",\"panelTitle\",\"displayTheStackChange\",4,\"ngIf\"],[\"panelId\",\"affiliation-stack\",3,\"userRecord\",\"elements\",\"stackSiblings\",\"editableVisibilityControl\",\"editModalComponent\",\"type\",\"ngStyle\",\"ngClass\",\"putCode\",\"visibility\",\"isPublicRecord\",\"isUserSource\",\"userVersionPresent\",\"displayTheStack\",\"hasExternalIds\",\"id\",\"panelTitle\",\"displayTheStackChange\"],[\"header\",\"\",1,\"affiliation-title\"],[4,\"ngIf\"],[1,\"orc-font-body\",3,\"ngClass\"],[3,\"affiliation\",\"panelDetailsState\",\"orgDisambiguated\",\"toggleDetails\",4,\"ngIf\"],[3,\"userRecord\",\"isPreferred\",\"sourceName\",\"assertionOriginName\",\"assertionOriginOrcid\",\"assertionOriginClientId\",\"stackLength\",\"displayTheStack\",\"topPanelOfTheStackMode\",\"isPublicRecord\",\"type\",\"item\",\"panelTitle\",\"displayTheStackChange\",\"makePrimary\",\"topPanelOfTheStackModeChange\"],[\"class\",\"material-icons-outlined\",4,\"ngIf\"],[1,\"vl\"],[1,\"material-icons-outlined\"],[3,\"affiliation\",\"panelDetailsState\",\"orgDisambiguated\",\"toggleDetails\"]],template:function(t,i){1&t&&e.YNc(0,or,2,1,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",null==i.affiliationStack?null:i.affiliationStack.affiliations)(\"ngForTrackBy\",i.trackByAffiliationStack)},dependencies:[p.mk,p.sg,p.O5,p.PC,ae.y,Ne,y.Hw,K_],styles:[\"[body][_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]{width:100%}.display-the-stack[_nghost-%COMP%]{border-style:solid;border-radius:4px;border-width:2px}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){display:block;position:relative}.affiliation-title[_ngcontent-%COMP%]{display:flex;align-items:center}.affiliation-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;padding-inline-end:16px}.affiliation-title[_ngcontent-%COMP%]   h4.mobile[_ngcontent-%COMP%]{max-width:calc(100% - 50px)}.affiliation-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px;flex-shrink:0}.affiliation-title[_ngcontent-%COMP%]   .vl[_ngcontent-%COMP%]{height:28px;margin-inline-start:8px;margin-inline-end:12px}\",\".display-the-stack[_nghost-%COMP%]{border-color:#212121}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){box-shadow:0 9px 5px #d6d6d6}.vl[_ngcontent-%COMP%]{border-left:2px solid #bdbdbd}\"]}),_})(),_r=(()=>{var o;class _{transform(t){switch(t){case\"EDUCATION\":return K.c4.education;case\"QUALIFICATION\":return K.c4.qualification;case\"MEMBERSHIP\":return K.c4.membership;case\"SERVICE\":return K.c4.service;case\"DISTINCTION\":return K.c4.distinction;case\"INVITED_POSITION\":return K.c4[\"invited-position\"]}}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"affiliationType\",type:o,pure:!0}),_})();function rr(o,_){if(1&o&&e._UZ(0,\"app-affiliation-stack\",7),2&o){const n=_.$implicit,t=e.oxw(4);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"affiliationStack\",n)(\"type\",t.affiliationType.employment)(\"userInfo\",t.userInfo)}}function ar(o,_){if(1&o&&(e.ynx(0),e.YNc(1,rr,1,5,\"app-affiliation-stack\",6),e.BQk()),2&o){const n=e.oxw().ngIf,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.affiliationGroup)(\"ngForTrackBy\",t.trackByAffiliationGroup)}}function sr(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"p\"),e.SDv(3,9),e.qZA(),e.TgZ(4,\"a\",10),e.SDv(5,11),e.qZA()(),e.BQk())}function lr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panels\",5),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContent.EMPLOYMENT=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.sortEvent(i,\"EMPLOYMENT\"))}),e.ALo(1,\"async\"),e.YNc(2,ar,2,2,\"ng-container\",1),e.YNc(3,sr,6,0,\"ng-container\",1),e.qZA()}if(2&o){const n=_.ngIf,t=e.oxw(2);e.Q6J(\"loading\",e.lcZ(1,11,t.$loading))(\"title\",t.affiliationTypeLabel(n.type))(\"type\",\"employment\")(\"userRecord\",t.userRecord)(\"currentAmount\",n.affiliationGroup.length)(\"expandedContent\",t.expandedContent.EMPLOYMENT)(\"isPublicRecord\",t.isPublicRecord)(\"sortTypes\",t.sortTypes)(\"sortType\",\"end\"),e.xp6(2),e.Q6J(\"ngIf\",n.affiliationGroup.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.affiliationGroup.length)}}function cr(o,_){if(1&o&&(e.TgZ(0,\"section\",3),e.YNc(1,lr,4,13,\"app-panels\",4),e.qZA()),2&o){const n=e.oxw();e.uIk(\"aria-label\",n.regionAffiliations),e.xp6(1),e.Q6J(\"ngIf\",n.getAffiliationType(\"EMPLOYMENT\"))}}function dr(o,_){if(1&o&&(e._UZ(0,\"app-affiliation-stack\",7),e.ALo(1,\"affiliationType\")),2&o){const n=_.$implicit,t=e.oxw(4);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"affiliationStack\",n)(\"type\",e.lcZ(1,5,n.affiliationType))(\"userInfo\",t.userInfo)}}function pr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,dr,2,7,\"app-affiliation-stack\",6),e.BQk()),2&o){const n=e.oxw().ngIf,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.affiliationGroup)(\"ngForTrackBy\",t.trackByAffiliationGroup)}}function ur(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"p\"),e.SDv(3,14),e.qZA(),e.TgZ(4,\"a\",15),e.SDv(5,16),e.qZA()(),e.BQk())}function gr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panels\",13),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContent.EDUCATION_AND_QUALIFICATION=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.sortEvent(i,\"EDUCATION_AND_QUALIFICATION\"))}),e.ALo(1,\"async\"),e.YNc(2,pr,2,2,\"ng-container\",1),e.YNc(3,ur,6,0,\"ng-container\",1),e.qZA()}if(2&o){const n=_.ngIf,t=e.oxw(2);e.Q6J(\"loading\",e.lcZ(1,11,t.$loading))(\"title\",t.affiliationTypeLabel(n.type))(\"type\",\"education\")(\"userRecord\",t.userRecord)(\"currentAmount\",n.affiliationGroup.length)(\"expandedContent\",t.expandedContent.EDUCATION_AND_QUALIFICATION)(\"isPublicRecord\",t.isPublicRecord)(\"sortTypes\",t.educationAndQualificationSortTypes)(\"sortType\",\"end\"),e.xp6(2),e.Q6J(\"ngIf\",n.affiliationGroup.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.affiliationGroup.length)}}function fr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,gr,4,13,\"app-panels\",12),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",n.getAffiliationType(\"EDUCATION_AND_QUALIFICATION\"))}}function Or(o,_){if(1&o&&(e._UZ(0,\"app-affiliation-stack\",7),e.ALo(1,\"affiliationType\")),2&o){const n=_.$implicit,t=e.oxw(4);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"affiliationStack\",n)(\"type\",e.lcZ(1,5,n.affiliationType))(\"userInfo\",t.userInfo)}}function Cr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Or,2,7,\"app-affiliation-stack\",6),e.BQk()),2&o){const n=e.oxw().ngIf,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.affiliationGroup)(\"ngForTrackBy\",t.trackByAffiliationGroup)}}function Rr(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"p\"),e.SDv(3,19),e.qZA(),e.TgZ(4,\"a\",20),e.SDv(5,21),e.qZA()(),e.BQk())}function Tr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panels\",18),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContent.INVITED_POSITION_AND_DISTINCTION=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.sortEvent(i,\"INVITED_POSITION_AND_DISTINCTION\"))}),e.ALo(1,\"async\"),e.YNc(2,Cr,2,2,\"ng-container\",1),e.YNc(3,Rr,6,0,\"ng-container\",1),e.qZA()}if(2&o){const n=_.ngIf,t=e.oxw(2);e.Q6J(\"loading\",e.lcZ(1,10,t.$loading))(\"title\",t.affiliationTypeLabel(n.type))(\"type\",\"invited-position\")(\"userRecord\",t.userRecord)(\"currentAmount\",n.affiliationGroup.length)(\"expandedContent\",t.expandedContent.INVITED_POSITION_AND_DISTINCTION)(\"isPublicRecord\",t.isPublicRecord)(\"sortType\",\"end\"),e.xp6(2),e.Q6J(\"ngIf\",n.affiliationGroup.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.affiliationGroup.length)}}function mr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Tr,4,12,\"app-panels\",17),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",n.getAffiliationType(\"INVITED_POSITION_AND_DISTINCTION\"))}}function Er(o,_){if(1&o&&(e._UZ(0,\"app-affiliation-stack\",7),e.ALo(1,\"affiliationType\")),2&o){const n=_.$implicit,t=e.oxw(4);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"affiliationStack\",n)(\"type\",e.lcZ(1,5,n.affiliationType))(\"userInfo\",t.userInfo)}}function Sr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Er,2,7,\"app-affiliation-stack\",6),e.BQk()),2&o){const n=e.oxw().ngIf,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.affiliationGroup)(\"ngForTrackBy\",t.trackByAffiliationGroup)}}function hr(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"p\"),e.SDv(3,24),e.qZA(),e.TgZ(4,\"a\",25),e.SDv(5,26),e.qZA()(),e.BQk())}function Nr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panels\",23),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContent.MEMBERSHIP_AND_SERVICE=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.sortEvent(i,\"MEMBERSHIP_AND_SERVICE\"))}),e.ALo(1,\"async\"),e.YNc(2,Sr,2,2,\"ng-container\",1),e.YNc(3,hr,6,0,\"ng-container\",1),e.qZA()}if(2&o){const n=_.ngIf,t=e.oxw(2);e.Q6J(\"loading\",e.lcZ(1,10,t.$loading))(\"title\",t.affiliationTypeLabel(n.type))(\"type\",\"membership\")(\"userRecord\",t.userRecord)(\"currentAmount\",n.affiliationGroup.length)(\"expandedContent\",t.expandedContent.MEMBERSHIP_AND_SERVICE)(\"isPublicRecord\",t.isPublicRecord)(\"sortType\",\"end\"),e.xp6(2),e.Q6J(\"ngIf\",n.affiliationGroup.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.affiliationGroup.length)}}function Mr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Nr,4,12,\"app-panels\",22),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",n.getAffiliationType(\"MEMBERSHIP_AND_SERVICE\"))}}function Pr(o,_){if(1&o&&(e._UZ(0,\"app-affiliation-stack\",30),e.ALo(1,\"affiliationType\")),2&o){const n=_.$implicit,t=e.oxw(4);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"affiliationStack\",n)(\"type\",e.lcZ(1,6,n.affiliationType))(\"userInfo\",t.userInfo)(\"professionalActivitiesTogglz\",t.professionalActivitiesTogglz)}}function br(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Pr,2,8,\"app-affiliation-stack\",29),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Q6J(\"ngForOf\",n.getAffiliationType(\"PROFESSIONAL_ACTIVITIES\").affiliationGroup)(\"ngForTrackBy\",n.trackByAffiliationGroup)}}function Ar(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"p\"),e.SDv(3,31),e.qZA(),e.TgZ(4,\"a\",25),e.SDv(5,32),e.qZA()(),e.BQk())}function Ir(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panels\",28),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContent.PROFESSIONAL_ACTIVITIES=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.sortEvent(i,\"PROFESSIONAL_ACTIVITIES\"))}),e.ALo(1,\"async\"),e.YNc(2,br,2,2,\"ng-container\",1),e.YNc(3,Ar,6,0,\"ng-container\",1),e.qZA()}if(2&o){const n=_.ngIf,t=e.oxw(2);e.Q6J(\"loading\",e.lcZ(1,11,t.$loading))(\"title\",t.affiliationTypeLabel(\"PROFESSIONAL_ACTIVITIES\"))(\"type\",\"professional-activities\")(\"userRecord\",t.userRecord)(\"currentAmount\",null==n||null==n.affiliationGroup?null:n.affiliationGroup.length)(\"expandedContent\",t.expandedContent.PROFESSIONAL_ACTIVITIES)(\"isPublicRecord\",t.isPublicRecord)(\"sortTypes\",t.professionalActivitiesSortTypes)(\"professionalActivitiesTogglz\",t.professionalActivitiesTogglz),e.xp6(2),e.Q6J(\"ngIf\",(null==n||null==n.affiliationGroup?null:n.affiliationGroup.length)>0),e.xp6(1),e.Q6J(\"ngIf\",0===(null==n||null==n.affiliationGroup?null:n.affiliationGroup.length))}}function xr(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Ir,4,13,\"app-panels\",27),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",n.getAffiliationType(\"PROFESSIONAL_ACTIVITIES\"))}}let yr=(()=>{var o;class _{constructor(t,i,r){this._record=t,this._recordAffiliationService=i,this._togglz=r,this.$destroy=new w.xQ,this.regionAffiliations=\"Affiliations\",this.regionProfessionalActivities=\"Professional activities\",this.labelAddEmploymentButton=\"Add Employment\",this.labelSortEmploymentButton=\"Sort Employments\",this.labelEducationAddButton=\"Add Education\",this.labelEducationSortButton=\"Sort Education\",this.labelInvitedAddButton=\"Add Invited Position\",this.labelInvitedSortButton=\"Sort Invited Positions\",this.labelMembershipAddButton=\"Add Membership\",this.labelMembershipSortButton=\"Sort Memberships\",this.userRecordContext={},this.isPublicRecord=null,this.total=new e.vpe,this.affiliationType=K.c4,this.expandedContentChange=new e.vpe,this.professionalActivitiesTogglz=!1,this.sortTypes=[\"title\",\"start\",\"end\"],this.professionalActivitiesSortTypes=[\"title\",\"type\",\"start\",\"end\"],this.educationAndQualificationSortTypes=[\"title\",\"start\",\"end\"]}ngOnInit(){this._togglz.getStateOf(\"PROFESSIONAL_ACTIVITIES\").pipe((0,Se.q)(1)).subscribe(t=>this.professionalActivitiesTogglz=t),this._togglz.getStateOf(\"SOURCE_SORTING\").pipe((0,Se.q)(1)).subscribe(t=>{t&&(this.sortTypes.push(\"source\"),this.professionalActivitiesSortTypes.push(\"source\"),this.educationAndQualificationSortTypes.push(\"source\"))}),this.$loading=this._recordAffiliationService.$loading,this._record.getRecord({publicRecordId:this.isPublicRecord}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{var i,r,a,s,l,c;(0,Le.isEmpty)(null==t?void 0:t.affiliations)||(this.userRecord=t,this.profileAffiliationUiGroups=this.userRecord.affiliations,this.affiliationsCount=(null==(i=this.getAffiliationType(\"EMPLOYMENT\"))?void 0:i.affiliationGroup.length)+(null==(r=this.getAffiliationType(\"EDUCATION_AND_QUALIFICATION\"))?void 0:r.affiliationGroup.length)+(null==(a=this.getAffiliationType(\"INVITED_POSITION_AND_DISTINCTION\"))?void 0:a.affiliationGroup.length)+(null==(s=this.getAffiliationType(\"MEMBERSHIP_AND_SERVICE\"))?void 0:s.affiliationGroup.length),this.total.emit(this.affiliationsCount),this.profileAffiliationUiGroups.find(O=>\"PROFESSIONAL_ACTIVITIES\"===O.type)||(this.profileAffiliationUiGroups.push({type:\"PROFESSIONAL_ACTIVITIES\",affiliationGroup:[...null==(l=this.getAffiliationType(\"INVITED_POSITION_AND_DISTINCTION\"))?void 0:l.affiliationGroup,...null==(c=this.getAffiliationType(\"MEMBERSHIP_AND_SERVICE\"))?void 0:c.affiliationGroup]}),this.sortEvent({type:\"end\",direction:\"desc\"},\"PROFESSIONAL_ACTIVITIES\")))})}trackByProfileAffiliationUiGroups(t,i){return i.type}trackByAffiliationGroup(t,i){return i.activePutCode}affiliationTypeLabel(t){switch(t){case K.dw.EMPLOYMENT:return \"Employment\";case K.dw.EDUCATION_AND_QUALIFICATION:return \"Education and qualifications\";case K.dw.INVITED_POSITION_AND_DISTINCTION:return \"Invited positions and distinctions\";case K.dw.MEMBERSHIP_AND_SERVICE:return \"Membership and service\";case K.dw.PROFESSIONAL_ACTIVITIES:return \"Professional activities\"}}getAffiliationType(t){if(this.profileAffiliationUiGroups)return this.profileAffiliationUiGroups.filter(i=>i.type===t)[0]}sortEvent(t,i){var r,a;this.userRecordContext.publicRecordId=this.isPublicRecord,this.userRecordContext.privateRecordId=null==(a=null==(r=this.userRecord)?void 0:r.userInfo)?void 0:a.EFFECTIVE_USER_ORCID,this.userRecordContext.sort=t.type,this.userRecordContext.sortAsc=\"asc\"===t.direction,this._recordAffiliationService.changeUserRecordContext(this.userRecordContext,i)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(H.B),e.Y36(Ze.l),e.Y36(re.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-affiliations\"]],inputs:{userInfo:\"userInfo\",isPublicRecord:\"isPublicRecord\",expandedContent:\"expandedContent\"},outputs:{total:\"total\",expandedContentChange:\"expandedContentChange\"},decls:6,vars:6,consts:function(){let n,t,i,r,a,s,l,c,u,O;return n=\"Add details of your current and previous employers.\",t=\"Learn more about adding employment information to your ORCID record\",i=\"Add details about where you have studied and educational or professional qualifications you have been awarded.\",r=\"Learn more about adding education or qualifications to your ORCID record\",a=\"Add details of invited positions you have held and awards or prizes you have received in recognition of your achievements.\",s=\"Learn more about adding invited positions or distinctions to your ORCID record\",l=\"Add details of society or association memberships and donations of time or other resources in the service of an organization.\",c=\"Learn more about adding a membership or service to your ORCID record\",u=\"Add the invited positions or memberships you have held, awards or prizes you have received, and donations of time and resources given in service of organizations or institutions.\",O=\"Learn more about adding professional activities to your ORCID record\",[[\"id\",\"affiliations\",\"role\",\"region\",4,\"ngIf\"],[4,\"ngIf\"],[\"role\",\"region\",\"id\",\"professional-activities\"],[\"id\",\"affiliations\",\"role\",\"region\"],[\"class\",\"row\",\"id\",\"cy-affiliation-employment\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"sortType\",\"expandedContentChange\",\"sort\",4,\"ngIf\"],[\"id\",\"cy-affiliation-employment\",1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"sortType\",\"expandedContentChange\",\"sort\"],[3,\"userRecord\",\"isPublicRecord\",\"affiliationStack\",\"type\",\"userInfo\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[3,\"userRecord\",\"isPublicRecord\",\"affiliationStack\",\"type\",\"userInfo\"],[1,\"orc-font-body-small\"],n,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006894834-Add-employment-information-to-your-ORCID-record\",1,\"underline\"],t,[\"s\",\"\",\"class\",\"row\",\"id\",\"cy-affiliation-education-and-qualification\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"sortType\",\"expandedContentChange\",\"sort\",4,\"ngIf\"],[\"s\",\"\",\"id\",\"cy-affiliation-education-and-qualification\",1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"sortType\",\"expandedContentChange\",\"sort\"],i,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006973933-Add-an-education-or-qualification-to-your-ORCID-record\",1,\"underline\"],r,[\"class\",\"row\",\"id\",\"cy-affiliation-invited-position-and-distinction\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortType\",\"expandedContentChange\",\"sort\",4,\"ngIf\"],[\"id\",\"cy-affiliation-invited-position-and-distinction\",1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortType\",\"expandedContentChange\",\"sort\"],a,[\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360008897654-Add-an-invited-position-or-distinction-to-your-ORCID-record\",1,\"underline\"],s,[\"class\",\"row\",\"id\",\"cy-affiliation-membership-and-service\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortType\",\"expandedContentChange\",\"sort\",4,\"ngIf\"],[\"id\",\"cy-affiliation-membership-and-service\",1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortType\",\"expandedContentChange\",\"sort\"],l,[\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360008897694-Add-a-membership-or-service-to-your-ORCID-record\",1,\"underline\"],c,[\"class\",\"row\",\"id\",\"cy-affiliation-professional-activities\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"professionalActivitiesTogglz\",\"expandedContentChange\",\"sort\",4,\"ngIf\"],[\"id\",\"cy-affiliation-professional-activities\",1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"expandedContent\",\"isPublicRecord\",\"sortTypes\",\"professionalActivitiesTogglz\",\"expandedContentChange\",\"sort\"],[3,\"userRecord\",\"isPublicRecord\",\"affiliationStack\",\"type\",\"userInfo\",\"professionalActivitiesTogglz\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[3,\"userRecord\",\"isPublicRecord\",\"affiliationStack\",\"type\",\"userInfo\",\"professionalActivitiesTogglz\"],u,O]},template:function(t,i){if(1&t&&(e.YNc(0,cr,2,2,\"section\",0),e.YNc(1,fr,2,1,\"ng-container\",1),e.TgZ(2,\"section\",2),e.YNc(3,mr,2,1,\"ng-container\",1),e.YNc(4,Mr,2,1,\"ng-container\",1),e.YNc(5,xr,2,1,\"ng-container\",1),e.qZA()),2&t){let r,a,s,l,c;e.Q6J(\"ngIf\",!(i.isPublicRecord&&0===(null==(r=i.getAffiliationType(\"EMPLOYMENT\"))||null==r.affiliationGroup?null:r.affiliationGroup.length))),e.xp6(1),e.Q6J(\"ngIf\",!(i.isPublicRecord&&0===(null==(a=i.getAffiliationType(\"EDUCATION_AND_QUALIFICATION\"))||null==a.affiliationGroup?null:a.affiliationGroup.length))),e.xp6(1),e.uIk(\"aria-label\",i.regionProfessionalActivities),e.xp6(1),e.Q6J(\"ngIf\",!(i.professionalActivitiesTogglz||i.isPublicRecord&&0===(null==(s=i.getAffiliationType(\"INVITED_POSITION_AND_DISTINCTION\"))||null==s.affiliationGroup?null:s.affiliationGroup.length))),e.xp6(1),e.Q6J(\"ngIf\",!(i.professionalActivitiesTogglz||i.isPublicRecord&&0===(null==(l=i.getAffiliationType(\"MEMBERSHIP_AND_SERVICE\"))||null==l.affiliationGroup?null:l.affiliationGroup.length))),e.xp6(1),e.Q6J(\"ngIf\",i.professionalActivitiesTogglz&&!(i.isPublicRecord&&0===(null==(c=i.getAffiliationType(\"PROFESSIONAL_ACTIVITIES\"))||null==c.affiliationGroup?null:c.affiliationGroup.length)))}},dependencies:[p.sg,p.O5,he,ir,p.Ov,_r],styles:[\"[_nghost-%COMP%]{width:100%}app-affiliation-stack[_ngcontent-%COMP%]{margin-top:24px}p[_ngcontent-%COMP%]{margin-bottom:0}\"]}),_})();var Pn=g(80528),Me=g(3471),m=g(67886);let bn=(()=>{var o;class _{transform(t,i){var a;let r=\"\";return t&&(void 0!==t.rolesAndSequences&&t.rolesAndSequences.length>0?t.rolesAndSequences.forEach((s,l)=>{r=this.addRoleAndSequence(r,s,t.rolesAndSequences.length,l)}):(t.contributorRole&&t.contributorRole.value&&(r=this.getContributionRoleByKey(t.contributorRole.value.toLowerCase()).translation),t.contributorSequence&&t.contributorSequence.value&&(r=this.addColon(r)+t.contributorSequence.value.toLowerCase())),(null==r?void 0:r.length)>0&&(r=\"(\"+r,null!=t&&t.orcid||null!=(a=null==t?void 0:t.contributorOrcid)&&a.path?r.endsWith(\", \")||(r+=\",\"):r+=\")\")),r}addComma(t){return(null==t?void 0:t.length)>0?t+\", \":t}addColon(t){return(null==t?void 0:t.length)>0?t+\": \":t}addRoleAndSequence(t,i,r,a){var u,O,f;const s=null==(u=null==i?void 0:i.contributorSequence)?void 0:u.toLowerCase(),l=null==(O=null==i?void 0:i.contributorRole)?void 0:O.toLowerCase();let c=l;return l&&(c=null==(f=this.getContributionRoleByKey(c))?void 0:f.translation),c&&s?t+this.addColon(c)+(r-1===a?s:this.addComma(s)):s&&!c?this.addSingleValue(t,s,r,a):c&&!s?this.addSingleValue(t,c,r,a):t}addSingleValue(t,i,r,a){return r-1===a?t+i:t+this.addComma(i)}getContributionRoleByKey(t){return m.tM.find(i=>i.key===t)||m.YM.find(i=>i.key===t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"contributorsPipe\",type:o,pure:!0}),_})(),An=(()=>{var o;class _{transform(t){return Me.Do[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordFundingTypesLabel\",type:o,pure:!0}),_})();function kr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,n.funding.endDate))}}function vr(o,_){1&o&&(e.ynx(0),e.SDv(1,8),e.BQk())}function Dr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.ynx(3),e.SDv(4,7),e.BQk(),e._uU(5,\"\\\\n        \"),e.YNc(6,kr,3,3,\"ng-container\",2),e._uU(7,\"\\\\n        \"),e.YNc(8,vr,2,0,\"ng-container\",2),e._uU(9,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.hij(\"\",e.lcZ(2,3,n.funding.startDate),\"\\\\n        \"),e.xp6(5),e.Q6J(\"ngIf\",null==n.funding?null:n.funding.endDate),e.xp6(2),e.Q6J(\"ngIf\",!(null!=n.funding&&null!=n.funding.endDate&&n.funding.endDate.year))}}function wr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\"\\\\n          \",e.lcZ(2,1,n.funding.endDate),\"\\\\n        \")}}function Lr(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.YNc(2,wr,3,3,\"ng-container\",2),e._uU(3,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",null==n.funding.endDate?null:n.funding.endDate.year)}}function $r(o,_){1&o&&(e.ynx(0),e._uU(1,\"\\\\n        |\\\\n      \"),e.BQk())}function Ur(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Oqu(null==n.funding.city?null:n.funding.city.value)}}function Zr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\", \",null==n.funding.region?null:n.funding.region.value,\"\")}}function Wr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\", \",null==n.funding.country?null:n.funding.country.value,\"\")}}function Fr(o,_){if(1&o&&(e.TgZ(0,\"div\"),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"div\"),e._uU(3),e.YNc(4,Ur,2,1,\"ng-container\",2),e.YNc(5,Zr,2,1,\"ng-container\",2),e.YNc(6,Wr,2,1,\"ng-container\",2),e._uU(7,\")\\\\n      \"),e.qZA(),e._uU(8,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw();e.xp6(3),e.hij(\"\\\\n        \",null==n.funding.fundingName?null:n.funding.fundingName.value,\"\\\\n        (\"),e.xp6(1),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.city?null:n.funding.city.value),e.xp6(1),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.region?null:n.funding.region.value),e.xp6(1),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.country?null:n.funding.country.value)}}function Gr(o,_){if(1&o&&(e.TgZ(0,\"div\"),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"span\"),e._uU(3,\" \"),e.ynx(4),e.SDv(5,9),e.BQk(),e._uU(6,\": \"),e.qZA(),e._uU(7,\"\\\\n      \"),e.TgZ(8,\"a\",10),e._uU(9),e.qZA(),e._uU(10,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw();e.xp6(8),e.s9C(\"href\",n.funding.url.value,e.LSH),e.xp6(1),e.hij(\"\\\\n        \",n.funding.url.value,\"\\\\n      \")}}function Kr(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",11),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.funding))}),e.SDv(1,12),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"funding\",\"show\",null==n.funding||null==n.funding.fundingTitle||null==n.funding.fundingTitle.title?null:n.funding.fundingTitle.title.value))}}function Br(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",11),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.funding))}),e.SDv(1,13),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"funding\",\"hide\",null==n.funding||null==n.funding.fundingTitle||null==n.funding.fundingTitle.title?null:n.funding.fundingTitle.title.value))}}function Qr(o,_){if(1&o&&(e.ynx(0,20),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h3\",17),e.SDv(5,21),e.qZA(),e._uU(6,\"\\\\n      \"),e.TgZ(7,\"div\"),e._uU(8),e.qZA(),e._uU(9,\"\\\\n    \"),e.qZA(),e._uU(10,\"\\\\n  \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(8),e.hij(\"\\\\n        \",n.funding.organizationDefinedFundingSubType.subtype.value,\"\\\\n      \")}}function Jr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.Oqu(n.funding.currencyCode.value)}}function Xr(o,_){if(1&o&&(e.ynx(0,20),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h3\",17),e.SDv(5,22),e.qZA(),e._uU(6,\"\\\\n      \"),e.TgZ(7,\"div\"),e._uU(8,\"\\\\n        \"),e.YNc(9,Jr,2,1,\"ng-container\",2),e._uU(10),e.qZA(),e._uU(11,\"\\\\n    \"),e.qZA(),e._uU(12,\"\\\\n  \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(9),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.currencyCode?null:n.funding.currencyCode.value),e.xp6(1),e.hij(\"\\\\n        \",n.funding.amount.value,\"\\\\n      \")}}function Yr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"\\\\n          (\",n.getLanguageValue(null==n.funding.fundingTitle.translatedTitle?null:n.funding.fundingTitle.translatedTitle.languageCode),\")\\\\n        \")}}function qr(o,_){if(1&o&&(e.ynx(0,20),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"div\",23),e._uU(5,\"\\\\n        \"),e.TgZ(6,\"span\",24),e._uU(7,\"\\\\n          \"),e.ynx(8),e.SDv(9,25),e.BQk(),e._uU(10,\"\\\\xa0\"),e.qZA(),e._uU(11,\"\\\\n        \"),e.YNc(12,Yr,2,1,\"ng-container\",2),e._uU(13,\"\\\\n      \"),e.qZA(),e._uU(14,\"\\\\n      \"),e.TgZ(15,\"div\"),e._uU(16),e.qZA(),e._uU(17,\"\\\\n    \"),e.qZA(),e._uU(18,\"\\\\n  \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(12),e.Q6J(\"ngIf\",null==n.funding.fundingTitle.translatedTitle?null:n.funding.fundingTitle.translatedTitle.languageCode),e.xp6(4),e.hij(\"\\\\n        \",n.funding.fundingTitle.translatedTitle.content,\"\\\\n      \")}}function zr(o,_){if(1&o&&(e.ynx(0,20),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h3\",17),e.SDv(5,26),e.qZA(),e._uU(6,\"\\\\n      \"),e._UZ(7,\"div\",27),e._uU(8,\"\\\\n    \"),e.qZA(),e._uU(9,\"\\\\n  \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(7),e.Q6J(\"innerText\",n.funding.description.value)}}function Hr(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.creditName.value)}}function Vr(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"a\",10),e._uU(3),e.qZA(),e._uU(4,\")\\\\n          \"),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(2),e.s9C(\"href\",n.uri.value,e.LSH),e.xp6(1),e.Oqu(n.orcid.value)}}function jr(o,_){if(1&o&&(e.TgZ(0,\"div\",30),e._uU(1,\"\\\\n          \"),e.YNc(2,Hr,2,1,\"ng-container\",2),e._uU(3),e.ALo(4,\"contributorsPipe\"),e.YNc(5,Vr,5,2,\"ng-container\",2),e._uU(6,\"\\\\n        \"),e.qZA()),2&o){const n=_.$implicit;e.xp6(2),e.Q6J(\"ngIf\",null==n||null==n.creditName?null:n.creditName.value),e.xp6(1),e.hij(\"\\\\n          \",e.lcZ(4,3,n),\"\\\\n          \"),e.xp6(2),e.Q6J(\"ngIf\",null==n?null:n.orcid)}}function ea(o,_){if(1&o&&(e.ynx(0,20),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"app-display-attribute\"),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"h3\",17),e.SDv(5,28),e.qZA(),e._uU(6,\"\\\\n      \"),e.TgZ(7,\"div\"),e._uU(8,\"\\\\n        \"),e.YNc(9,jr,7,5,\"div\",29),e._uU(10,\"\\\\n      \"),e.qZA(),e._uU(11,\"\\\\n    \"),e.qZA(),e._uU(12,\"\\\\n  \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(9),e.Q6J(\"ngForOf\",n.funding.contributors)}}function na(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\",14),e._uU(1,\"\\\\n  \"),e._UZ(2,\"app-org-identifier\",15),e._uU(3,\"\\\\n  \"),e._uU(4,\"\\\\n  \"),e.YNc(5,Qr,11,1,\"ng-container\",16),e._uU(6,\"\\\\n  \"),e._uU(7,\"\\\\n  \"),e.YNc(8,Xr,13,2,\"ng-container\",16),e._uU(9,\"\\\\n  \"),e._uU(10,\"\\\\n  \"),e.YNc(11,qr,19,2,\"ng-container\",16),e._uU(12,\"\\\\n  \"),e._uU(13,\"\\\\n  \"),e.YNc(14,zr,10,1,\"ng-container\",16),e._uU(15,\"\\\\n\\\\n  \"),e._uU(16,\"\\\\n  \"),e.YNc(17,ea,13,1,\"ng-container\",16),e._uU(18,\"\\\\n\\\\n  \"),e._uU(19,\"\\\\n  \"),e.TgZ(20,\"app-display-attribute\"),e._uU(21,\"\\\\n    \"),e.TgZ(22,\"h3\",17),e.SDv(23,18),e.qZA(),e._uU(24,\"\\\\n    \"),e.TgZ(25,\"div\"),e._uU(26),e.ALo(27,\"monthDayYearDateToString\"),e.qZA(),e._uU(28,\"\\\\n  \"),e.qZA(),e._uU(29,\"\\\\n\\\\n  \"),e._uU(30,\"\\\\n  \"),e.TgZ(31,\"app-display-attribute\"),e._uU(32,\"\\\\n    \"),e.TgZ(33,\"h3\",17),e.SDv(34,19),e.qZA(),e._uU(35,\"\\\\n    \"),e.TgZ(36,\"div\"),e._uU(37),e.ALo(38,\"monthDayYearDateToString\"),e.qZA(),e._uU(39,\"\\\\n  \"),e.qZA(),e._uU(40,\"\\\\n\"),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"borderBottom\",!0),e.xp6(2),e.Q6J(\"orgDisambiguated\",n.orgDisambiguated),e.xp6(3),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.organizationDefinedFundingSubType||null==n.funding.organizationDefinedFundingSubType.subtype?null:n.funding.organizationDefinedFundingSubType.subtype.value),e.xp6(3),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.amount?null:n.funding.amount.value),e.xp6(3),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.fundingTitle||null==n.funding.fundingTitle.translatedTitle?null:n.funding.fundingTitle.translatedTitle.content),e.xp6(3),e.Q6J(\"ngIf\",null==n.funding||null==n.funding.description?null:n.funding.description.value),e.xp6(3),e.Q6J(\"ngIf\",(null==n.funding||null==n.funding.contributors?null:n.funding.contributors.length)>0),e.xp6(9),e.hij(\"\\\\n      \",e.lcZ(27,9,null==n.funding?null:n.funding.createdDate),\"\\\\n    \"),e.xp6(11),e.Oqu(e.lcZ(38,11,null==n.funding?null:n.funding.lastModified))}}let ta=(()=>{var o;class _{constructor(){this.toggleDetails=new e.vpe}ngOnInit(){}getLanguageValue(t){for(const[i,r]of Object.entries(Me.Wy))if(t===i)return r;return\"\"}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-funding\"]],inputs:{funding:\"funding\",panelDetailsState:\"panelDetailsState\",stackMode:\"stackMode\",orgDisambiguated:\"orgDisambiguated\"},outputs:{toggleDetails:\"toggleDetails\"},decls:35,vars:13,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R;return n=\"to\",t=\"present\",i=\"URL\",r=\"Show more detail\",a=\"Show less detail\",s=\"Added\",l=\"Last modified\",c=\"Funding subtype\",u=\"Total funding amount\",O=\"Funding project translated title\",f=\"Description\",R=\"Contributors\",[[1,\"default-data-loaded\",\"orc-font-body-small\",3,\"borderBottom\"],[1,\"general-data\"],[4,\"ngIf\"],[3,\"externalIdentifiers\"],[\"align-end\",\"\"],[\"class\",\"underline\",3,\"click\",4,\"ngIf\"],[3,\"borderBottom\",4,\"ngIf\"],n,t,i,[\"target\",\"_blank\",\"rel\",\"noreferrer noopener\",1,\"underline\",3,\"href\"],[1,\"underline\",3,\"click\"],r,a,[3,\"borderBottom\"],[3,\"orgDisambiguated\"],[\"class\",\"margin-top-1\",4,\"ngIf\"],[1,\"orc-font-body-small\"],s,l,[1,\"margin-top-1\"],c,u,[1,\"row\"],[1,\"translated-title-label\",\"orc-font-body-small\"],O,f,[3,\"innerText\"],R,[\"class\",\"padding-level-3\",4,\"ngFor\",\"ngForOf\"],[1,\"padding-level-3\"]]},template:function(t,i){1&t&&(e._uU(0,\"\\\\n\\\\n\"),e._uU(1,\"\\\\n\"),e.TgZ(2,\"app-panel-data\",0),e._uU(3,\"\\\\n  \"),e.TgZ(4,\"div\"),e._uU(5,\"\\\\n    \"),e.TgZ(6,\"div\",1),e._uU(7,\"\\\\n      \"),e.YNc(8,Dr,10,5,\"ng-container\",2),e._uU(9,\"\\\\n      \"),e._uU(10,\"\\\\n      \"),e.YNc(11,Lr,4,1,\"ng-container\",2),e._uU(12,\"\\\\n      \"),e.YNc(13,$r,2,0,\"ng-container\",2),e._uU(14),e.ALo(15,\"recordFundingTypesLabel\"),e.qZA(),e._uU(16,\"\\\\n    \"),e.YNc(17,Fr,9,4,\"div\",2),e._uU(18,\"\\\\n    \"),e.YNc(19,Gr,11,2,\"div\",2),e._uU(20,\"\\\\n    \"),e._UZ(21,\"app-display-external-ids\",3),e._uU(22,\"\\\\n  \"),e.qZA(),e._uU(23,\"\\\\n\\\\n  \"),e.TgZ(24,\"div\",4),e._uU(25,\"\\\\n    \"),e.YNc(26,Kr,3,5,\"a\",5),e._uU(27,\"\\\\n    \"),e.YNc(28,Br,3,5,\"a\",5),e._uU(29,\"\\\\n  \"),e.qZA(),e._uU(30,\"\\\\n\"),e.qZA(),e._uU(31,\"\\\\n\\\\n\"),e._uU(32,\"\\\\n\\\\n\"),e.YNc(33,na,41,13,\"app-panel-data\",6),e._uU(34,\"\\\\n\")),2&t&&(e.xp6(2),e.Q6J(\"borderBottom\",!0),e.xp6(6),e.Q6J(\"ngIf\",null==i.funding||null==i.funding.startDate?null:i.funding.startDate.year),e.xp6(3),e.Q6J(\"ngIf\",!(null!=i.funding&&null!=i.funding.startDate&&i.funding.startDate.year)&&(null==i.funding?null:i.funding.endDate)),e.xp6(2),e.Q6J(\"ngIf\",((null==i.funding||null==i.funding.startDate?null:i.funding.startDate.year)||(null==i.funding||null==i.funding.endDate?null:i.funding.endDate.year))&&(null==i.funding||null==i.funding.fundingType?null:i.funding.fundingType.value)),e.xp6(1),e.hij(\"\\\\n      \",e.lcZ(15,11,null==i.funding||null==i.funding.fundingType?null:i.funding.fundingType.value),\"\\\\n    \"),e.xp6(3),e.Q6J(\"ngIf\",null==i.funding||null==i.funding.fundingName?null:i.funding.fundingName.value),e.xp6(2),e.Q6J(\"ngIf\",null==i.funding||null==i.funding.url?null:i.funding.url.value),e.xp6(2),e.Q6J(\"externalIdentifiers\",null==i.funding?null:i.funding.externalIdentifiers),e.xp6(5),e.Q6J(\"ngIf\",!(null!=i.panelDetailsState&&i.panelDetailsState.state)),e.xp6(2),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state),e.xp6(5),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state))},dependencies:[p.sg,p.O5,se.j,v.t,fe,Fe,_n,X.r,bn,An,pe.Q],styles:[\"[_nghost-%COMP%]{width:100%}.translated-title-label[_ngcontent-%COMP%]{font-weight:700}\"]}),_})();function oa(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-funding\",6),e.NdJ(\"toggleDetails\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.toggleDetails(i))}),e.qZA()}if(2&o){const n=e.oxw(2).$implicit,t=e.oxw();e.Q6J(\"orgDisambiguated\",t.orgDisambiguated[n.putCode.value])(\"funding\",n)(\"panelDetailsState\",t.panelDetailsState[n.putCode.value])}}const ia=function(o){return{\"z-index\":o}},_a=function(o){return{last:o}};function ra(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",2),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)}),e.TgZ(1,\"h4\",3),e._uU(2),e.qZA(),e.YNc(3,oa,1,3,\"app-funding\",4),e.TgZ(4,\"app-panel-source\",5),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"makePrimary\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.makePrimaryCard(i))})(\"topPanelOfTheStackModeChange\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.changeTopPanelOfTheStack(i))}),e.qZA()()}if(2&o){const n=e.oxw(),t=n.$implicit,i=n.index,r=n.last,a=e.oxw();e.Q6J(\"userRecord\",a.userRecord)(\"stackSiblings\",a.fundingStack.fundings)(\"editableVisibilityControl\",a.isPreferred(t))(\"elements\",t)(\"editModalComponent\",a.modalFundingComponent)(\"ngStyle\",e.VKq(30,ia,a.fundingStack.fundings.length-i))(\"ngClass\",e.VKq(32,_a,r))(\"visibility\",a.fundingStack.defaultFunding.visibility.visibility)(\"isPublicRecord\",a.isPublicRecord)(\"putCode\",t.putCode.value)(\"isUserSource\",a.userIsSource(t))(\"hasExternalIds\",a.hasExternalIds)(\"userVersionPresent\",a.fundingStack.userVersionPresent)(\"displayTheStack\",a.displayTheStack)(\"panelTitle\",t.fundingTitle.title.value),e.xp6(2),e.hij(\" \",t.fundingTitle.title.value,\" \"),e.xp6(1),e.Q6J(\"ngIf\",a.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack),e.xp6(1),e.Q6J(\"userRecord\",a.userRecord)(\"isPreferred\",a.isPreferred(t))(\"sourceName\",t.sourceName||t.source)(\"assertionOriginName\",t.assertionOriginName)(\"assertionOriginClientId\",t.assertionOriginClientId)(\"assertionOriginOrcid\",t.assertionOriginOrcid)(\"stackLength\",a.fundingStack.fundings.length)(\"displayTheStack\",a.displayTheStack)(\"topPanelOfTheStackMode\",a.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack)(\"isPublicRecord\",a.isPublicRecord)(\"type\",\"funding\")(\"item\",t)(\"panelTitle\",t.fundingTitle.title.value)}}function aa(o,_){if(1&o&&(e.ynx(0),e.YNc(1,ra,5,34,\"app-panel\",1),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isPreferred(n)||t.displayTheStack)}}let sa=(()=>{var o;class _{set fundingStack(t){this.hasExternalIds=!!t.externalIdentifiers.length,this._fundingStack=t,this.setFundingsInitialStates(t)}get fundingStack(){return this._fundingStack}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackClass=this._displayTheStack,this.setFundingsInitialStates(this.fundingStack,!0)}get displayTheStack(){return this._displayTheStack}set userInfo(t){this._userInfo=t}get userInfo(){return this._userInfo}constructor(t,i){this._fundingService=t,this._organizationsService=i,this.displayTheStackClass=!1,this._displayTheStack=!1,this.orgDisambiguated={},this.stackPanelsDisplay={},this.panelDetailsState={},this.modalFundingComponent=ze.e}setFundingsInitialStates(t,i=!1){t.fundings.forEach(r=>{this.setDefaultPanelDetailsState(r,i),this.setDefaultPanelsDisplay(r,i)})}setDefaultPanelDetailsState(t,i=!1){(void 0===this.panelDetailsState[t.putCode.value]||i)&&(this.panelDetailsState[t.putCode.value]={state:!1})}setDefaultPanelsDisplay(t,i=!1){(void 0===this.stackPanelsDisplay[t.putCode.value]||i)&&(this.stackPanelsDisplay[t.putCode.value]={topPanelOfTheStack:!!this.isPreferred(t)})}fetchOrganizationData(t){t.disambiguationSource&&!this.orgDisambiguated[t.putCode.value]&&this._organizationsService.getOrgDisambiguated(t.disambiguationSource.value,t.disambiguatedFundingSourceId.value).subscribe(i=>{this.orgDisambiguated[t.putCode.value]=i||null})}isPreferred(t){return!(!t||!this.fundingStack)&&this.fundingStack.defaultFunding.putCode.value===t.putCode.value}toggleDetails(t){const i=t.putCode.value;this.panelDetailsState[i].state=!this.panelDetailsState[i].state;const r=this._fundingStack.fundings.find(s=>s.putCode.value===i),a=this._fundingStack.fundings.indexOf(r);(void 0===r.fullyLoaded||!0!==r.fullyLoaded)&&this.getMoreDetailsFromTheServer(t).pipe((0,k.P)()).subscribe(s=>{this._fundingStack.fundings[a]=s,this._fundingStack.fundings[a].fullyLoaded=!0}),this.fetchOrganizationData(t)}getMoreDetailsFromTheServer(t){const i=t.putCode.value;return this.isPublicRecord?this._fundingService.getPublicFundingDetails(this.isPublicRecord,i):this._fundingService.getFundingDetails(i)}makePrimaryCard(t){this._fundingService.updatePreferredSource(t.putCode.value).subscribe()}changeTopPanelOfTheStack(t){Object.keys(this.stackPanelsDisplay).forEach(i=>{this.stackPanelsDisplay[i].topPanelOfTheStack=!1}),this.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack=!0}trackByFundingStack(t,i){return i.putCode.value}userIsSource(t){return!!this.userInfo&&t.source===this.userInfo.EFFECTIVE_USER_ORCID}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(nn.i),e.Y36(j.zT))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-funding-stack\"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj(\"display-the-stack\",i.displayTheStackClass)},inputs:{userRecord:\"userRecord\",fundingStack:\"fundingStack\",isPublicRecord:\"isPublicRecord\",userInfo:\"userInfo\"},decls:1,vars:2,consts:[[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"panelId\",\"funding-stack\",\"type\",\"funding\",3,\"userRecord\",\"stackSiblings\",\"editableVisibilityControl\",\"elements\",\"editModalComponent\",\"ngStyle\",\"ngClass\",\"visibility\",\"isPublicRecord\",\"putCode\",\"isUserSource\",\"hasExternalIds\",\"userVersionPresent\",\"displayTheStack\",\"panelTitle\",\"displayTheStackChange\",4,\"ngIf\"],[\"panelId\",\"funding-stack\",\"type\",\"funding\",3,\"userRecord\",\"stackSiblings\",\"editableVisibilityControl\",\"elements\",\"editModalComponent\",\"ngStyle\",\"ngClass\",\"visibility\",\"isPublicRecord\",\"putCode\",\"isUserSource\",\"hasExternalIds\",\"userVersionPresent\",\"displayTheStack\",\"panelTitle\",\"displayTheStackChange\"],[\"header\",\"\",1,\"funding-title\",\"orc-font-body\"],[3,\"orgDisambiguated\",\"funding\",\"panelDetailsState\",\"toggleDetails\",4,\"ngIf\"],[3,\"userRecord\",\"isPreferred\",\"sourceName\",\"assertionOriginName\",\"assertionOriginClientId\",\"assertionOriginOrcid\",\"stackLength\",\"displayTheStack\",\"topPanelOfTheStackMode\",\"isPublicRecord\",\"type\",\"item\",\"panelTitle\",\"displayTheStackChange\",\"makePrimary\",\"topPanelOfTheStackModeChange\"],[3,\"orgDisambiguated\",\"funding\",\"panelDetailsState\",\"toggleDetails\"]],template:function(t,i){1&t&&e.YNc(0,aa,2,1,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",null==i.fundingStack?null:i.fundingStack.fundings)(\"ngForTrackBy\",i.trackByFundingStack)},dependencies:[p.mk,p.sg,p.O5,p.PC,ae.y,Ne,ta],styles:[\"[body][_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]{width:100%}.display-the-stack[_nghost-%COMP%]{border-style:solid;border-radius:4px;border-width:2px}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){box-shadow:0 9px 5px #d6d6d6;display:block;position:relative}.funding-title[_ngcontent-%COMP%]{margin:0}\",\".display-the-stack[_nghost-%COMP%]{border-color:#212121}\"]}),_})();function la(o,_){if(1&o&&e._UZ(0,\"app-funding-stack\",5),2&o){const n=_.$implicit,t=e.oxw(3);e.Q6J(\"userRecord\",t.userRecord)(\"fundingStack\",n)(\"isPublicRecord\",t.isPublicRecord)(\"userInfo\",t.userInfo)}}function ca(o,_){if(1&o&&(e.ynx(0),e.YNc(1,la,1,4,\"app-funding-stack\",4),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.fundings)(\"ngForTrackBy\",n.trackByFundingGroup)}}function da(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",6)(2,\"p\",7),e.SDv(3,8),e.qZA(),e.TgZ(4,\"a\",9),e.SDv(5,10),e.qZA()(),e.BQk())}function pa(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"section\",1)(1,\"app-panels\",2),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.expandedContent.FUNDING=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.sortEvent(i))}),e.ALo(2,\"async\"),e.YNc(3,ca,2,2,\"ng-container\",3),e.YNc(4,da,6,0,\"ng-container\",3),e.qZA()()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",n.ngOrcidFunding),e.xp6(1),e.Q6J(\"loading\",e.lcZ(2,12,n.$loading))(\"title\",n.ngOrcidFunding)(\"type\",\"funding\")(\"userRecord\",n.userRecord)(\"currentAmount\",n.fundings.length)(\"isPublicRecord\",n.isPublicRecord)(\"expandedContent\",n.expandedContent.FUNDING)(\"sortTypes\",n.sortTypes)(\"sortType\",\"date\"),e.xp6(2),e.Q6J(\"ngIf\",n.fundings.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.fundings.length)}}let ua=(()=>{var o;class _{constructor(t,i,r,a,s){this._userSession=t,this._record=i,this._recordFundingsService=r,this._recordCountryService=a,this._togglz=s,this.isPublicRecord=!1,this.expandedContentChange=new e.vpe,this.total=new e.vpe,this.userRecordContext={},this.$destroy=new w.xQ,this.fundings=[],this.ngOrcidFunding=\"Funding\",this.loading=!0,this.sortTypes=[\"title\",\"start\",\"end\"]}ngOnInit(){this._togglz.getStateOf(\"SOURCE_SORTING\").pipe((0,Se.q)(1)).subscribe(t=>{t&&this.sortTypes.push(\"source\")}),this.getRecord()}getRecord(){this.$loading=this._recordFundingsService.$loading,this._userSession.getUserSession().pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.userSession=t,this._record.getRecord({publicRecordId:this.isPublicRecord||void 0}).pipe((0,x.R)(this.$destroy)).subscribe(i=>{var r;this.userRecord=i,void 0!==(null==i?void 0:i.fundings)&&(this.loading=!1,this._recordCountryService.getCountryCodes().pipe((0,k.P)()).subscribe(a=>{this.countryCodes=a,this.fundings.map(s=>{s.fundings.forEach(l=>{var c;null!=(c=null==l?void 0:l.country)&&c.value&&(l.countryForDisplay=this.countryCodes.find(u=>u.value===l.country.value).key)})})}),this.fundings=i.fundings,this.total.emit(null==(r=null==i?void 0:i.fundings)?void 0:r.length))})})}trackByFundingGroup(t,i){return i.activePutCode}sortEvent(t){this.userRecordContext.publicRecordId=this.isPublicRecord,this.userRecordContext.sort=t.type,this.userRecordContext.sortAsc=\"asc\"===t.direction,this._recordFundingsService.changeUserRecordContext(this.userRecordContext)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(j.KD),e.Y36(H.B),e.Y36(nn.i),e.Y36(Pn.r),e.Y36(re.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-fundings\"]],inputs:{userInfo:\"userInfo\",isPublicRecord:\"isPublicRecord\",expandedContent:\"expandedContent\"},outputs:{expandedContentChange:\"expandedContentChange\",total:\"total\"},decls:1,vars:1,consts:function(){let n,t;return n=\"Add grants, awards and other funding you have received to support your work.\",t=\"Learn more about adding funding information to your ORCID record\",[[\"id\",\"funding\",\"role\",\"region\",4,\"ngIf\"],[\"id\",\"funding\",\"role\",\"region\"],[1,\"row\",3,\"loading\",\"title\",\"type\",\"userRecord\",\"currentAmount\",\"isPublicRecord\",\"expandedContent\",\"sortTypes\",\"sortType\",\"expandedContentChange\",\"sort\"],[4,\"ngIf\"],[3,\"userRecord\",\"fundingStack\",\"isPublicRecord\",\"userInfo\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[3,\"userRecord\",\"fundingStack\",\"isPublicRecord\",\"userInfo\"],[1,\"orc-font-body-small\"],[1,\"empty\"],n,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006897214-Add-funding-information-to-your-ORCID-record\",1,\"underline\"],t]},template:function(t,i){1&t&&e.YNc(0,pa,5,14,\"section\",0),2&t&&e.Q6J(\"ngIf\",!(i.loading||0===(null==i.fundings?null:i.fundings.length)&&i.isPublicRecord))},dependencies:[p.sg,p.O5,he,sa,p.Ov],styles:[\"[_nghost-%COMP%]{width:100%}app-funding-stack[_ngcontent-%COMP%]{margin-top:24px}p.empty[_ngcontent-%COMP%]{margin-bottom:0}\"]}),_})();var ga=g(91438);function fa(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\", \"),e.qZA())}function Oa(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).ngIf;e.xp6(1),e.hij(\" \",n.subjectName.value,\" \")}}function Ca(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2).ngIf;e.xp6(1),e.hij(\" (\",n.subjectType.value,\") \")}}function Ra(o,_){if(1&o&&(e.TgZ(0,\"div\"),e._uU(1),e.qZA()),2&o){const n=e.oxw(2).ngIf;e.xp6(1),e.hij(\" \",n.subjectContainerName.value,\" \")}}function Ta(o,_){if(1&o&&(e.TgZ(0,\"div\",4)(1,\"b\"),e.SDv(2,10),e.qZA(),e.TgZ(3,\"div\"),e.YNc(4,Oa,2,1,\"ng-container\",8),e.YNc(5,Ca,2,1,\"ng-container\",8),e.YNc(6,Ra,2,1,\"div\",8),e._UZ(7,\"app-display-external-ids\",11),e.qZA()()),2&o){const n=e.oxw().ngIf;e.xp6(4),e.Q6J(\"ngIf\",null==n||null==n.subjectName?null:n.subjectName.value),e.xp6(1),e.Q6J(\"ngIf\",null==n||null==n.subjectType?null:n.subjectType.value),e.xp6(1),e.Q6J(\"ngIf\",null==n||null==n.subjectContainerName?null:n.subjectContainerName.value),e.xp6(1),e.Q6J(\"externalIdentifier\",null==n?null:n.subjectExternalIdentifier)(\"noBoldTitle\",!0)}}function ma(o,_){if(1&o&&(e.TgZ(0,\"app-panel-element\",3)(1,\"div\",4)(2,\"div\")(3,\"b\"),e.SDv(4,5),e.qZA()(),e._UZ(5,\"app-display-external-ids\",6),e.qZA(),e.TgZ(6,\"div\",4)(7,\"b\"),e.SDv(8,7),e.qZA(),e.TgZ(9,\"div\"),e._uU(10),e.YNc(11,fa,2,0,\"span\",8),e._uU(12),e.qZA()(),e.YNc(13,Ta,8,5,\"div\",9),e.qZA()),2&o){const n=_.ngIf;e.Q6J(\"hideVisibility\",!1),e.xp6(5),e.Q6J(\"externalIdentifiers\",n.externalIdentifiers)(\"noBoldTitle\",!0),e.xp6(5),e.AsE(\" \",null==n||null==n.orgName?null:n.orgName.value,\" (\",null==n||null==n.city?null:n.city.value,\"\"),e.xp6(1),e.Q6J(\"ngIf\",(null==n||null==n.city?null:n.city.value)&&(null==n||null==n.country?null:n.country.value)),e.xp6(1),e.hij(\"\",null==n||null==n.country?null:n.country.value,\") \"),e.xp6(1),e.Q6J(\"ngIf\",(null==n||null==n.subjectName?null:n.subjectName.value)&&(null==n||null==n.subjectType?null:n.subjectType.value)||(null==n||null==n.subjectExternalIdentifier||null==n.subjectExternalIdentifier.externalIdentifierType?null:n.subjectExternalIdentifier.externalIdentifierType.value))}}function Ea(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\",1),e.YNc(1,ma,14,8,\"app-panel-element\",2),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"borderBottom\",!0),e.xp6(1),e.Q6J(\"ngIf\",n.getPeerReview(n.subPeerReview.putCode.value))}}let Sa=(()=>{var o;class _{constructor(){}ngOnInit(){}getPeerReview(t){return 0===this.detailsPeerReviews.length?null:this.detailsPeerReviews.filter(i=>i.putCode===t).map(i=>i.peerReview)[0]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-peer-review\"]],inputs:{isPublicRecord:\"isPublicRecord\",subPeerReview:\"subPeerReview\",detailsPeerReviews:\"detailsPeerReviews\",panelTitle:\"panelTitle\",panelId:\"panelId\",stackMode:\"stackMode\"},decls:1,vars:1,consts:function(){let n,t,i;return n=\"Review identifier(s)\",t=\"Convening organization\",i=\"Review subject\",[[3,\"borderBottom\",4,\"ngIf\"],[3,\"borderBottom\"],[3,\"hideVisibility\",4,\"ngIf\"],[3,\"hideVisibility\"],[1,\"details\"],n,[3,\"externalIdentifiers\",\"noBoldTitle\"],t,[4,\"ngIf\"],[\"class\",\"details\",4,\"ngIf\"],i,[3,\"externalIdentifier\",\"noBoldTitle\"]]},template:function(t,i){1&t&&e.YNc(0,Ea,2,2,\"app-panel-data\",0),2&t&&e.Q6J(\"ngIf\",null==i.subPeerReview?null:i.subPeerReview.showDetails)},dependencies:[p.O5,Ue.N,se.j,fe],styles:[\".capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.source[_ngcontent-%COMP%]{text-transform:uppercase}.details[_ngcontent-%COMP%]{margin-bottom:20px}p.empty[_ngcontent-%COMP%]{margin-bottom:0}\"]}),_})();function ha(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",18),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.getDetails(i,i.putCode.value))}),e.SDv(1,19),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.ALo(3,\"monthDayYearDateToString\"),e.qZA()}if(2&o){const n=e.oxw(3).$implicit;e.uIk(\"aria-label\",e.Dn7(2,1,\"peer-review\",\"show\",e.lcZ(3,5,n.completionDate)))}}function Na(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",20),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.collapse(i))}),e.SDv(1,21),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.ALo(3,\"monthDayYearDateToString\"),e.qZA()}if(2&o){const n=e.oxw(3).$implicit;e.uIk(\"aria-label\",e.Dn7(2,1,\"peer-review\",\"hide\",e.lcZ(3,5,n.completionDate)))}}function Ma(o,_){if(1&o&&(e.TgZ(0,\"span\",15),e.YNc(1,ha,4,7,\"a\",16),e.YNc(2,Na,4,7,\"a\",17),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.Q6J(\"ngIf\",!n.showDetails),e.xp6(1),e.Q6J(\"ngIf\",n.showDetails)}}function Pa(o,_){if(1&o&&(e.TgZ(0,\"a\",22),e.SDv(1,23),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.s9C(\"href\",n.url.value,e.LSH)}}function ba(o,_){1&o&&(e.ynx(0),e.SDv(1,24),e.BQk())}function Aa(o,_){if(1&o&&e._UZ(0,\"app-peer-review\",25),2&o){const n=e.oxw(2).$implicit,t=e.oxw();e.Q6J(\"isPublicRecord\",t.isPublicRecord)(\"subPeerReview\",n)(\"detailsPeerReviews\",t.detailsPeerReviews)}}const Ia=function(o){return{\"z-index\":o}},In=function(o,_){return{\"orc-font-small-print\":o,\"orc-font-body-small\":_}},an=function(o){return{mobile:o}};function xa(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",2)(1,\"h4\",3)(2,\"span\",4)(3,\"b\"),e.SDv(4,5),e.qZA(),e._uU(5),e.ALo(6,\"monthDayYearDateToString\"),e.qZA(),e.TgZ(7,\"span\",4)(8,\"b\"),e.SDv(9,6),e.qZA(),e.TgZ(10,\"span\",7),e._uU(11),e.qZA()(),e.TgZ(12,\"span\",4)(13,\"b\"),e.SDv(14,8),e.qZA(),e.TgZ(15,\"span\",7),e._uU(16),e.qZA()()(),e.TgZ(17,\"div\",9),e.YNc(18,Ma,3,2,\"span\",10),e.TgZ(19,\"span\"),e.YNc(20,Pa,2,1,\"a\",11),e.YNc(21,ba,2,0,\"ng-container\",12),e.qZA()(),e.YNc(22,Aa,1,3,\"app-peer-review\",13),e.TgZ(23,\"app-panel-source\",14),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"makePrimary\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.makePrimaryCard(i))})(\"topPanelOfTheStackModeChange\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.changeTopPanelOfTheStack(i))}),e.ALo(24,\"monthDayYearDateToString\"),e.qZA()()}if(2&o){const n=e.oxw(),t=n.$implicit,i=n.index,r=e.oxw();e.Q6J(\"putCode\",t.putCode.value)(\"elements\",t)(\"type\",\"top-bar\")(\"ngStyle\",e.VKq(36,Ia,r.peerReviewStack.peerReviews.length-i))(\"editable\",!1)(\"customControls\",!0)(\"stackedHeader\",!r.platform.columns12),e.xp6(1),e.Q6J(\"ngClass\",e.WLB(38,In,r.isMobile,!r.isMobile)),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(41,an,r.isMobile)),e.xp6(3),e.hij(\" \",e.lcZ(6,32,t.completionDate),\" \"),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(43,an,r.isMobile)),e.xp6(4),e.hij(\" \",t.type.value,\"\"),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(45,an,r.isMobile)),e.xp6(4),e.hij(\" \",t.role.value,\" \"),e.xp6(1),e.Q6J(\"ngClass\",e.WLB(47,In,r.isMobile,!r.isMobile)),e.xp6(1),e.Q6J(\"ngIf\",!r.displayTheStack||r.displayTheStack&&r.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack),e.xp6(2),e.Q6J(\"ngIf\",!!t.url),e.xp6(1),e.Q6J(\"ngIf\",!t.url),e.xp6(1),e.Q6J(\"ngIf\",r.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack),e.xp6(1),e.Q6J(\"userRecord\",r.userRecord)(\"isPreferred\",r.isPreferred(t))(\"sourceName\",t.sourceName||t.source)(\"assertionOriginName\",t.assertionOriginName)(\"assertionOriginClientId\",t.assertionOriginClientId)(\"assertionOriginOrcid\",t.assertionOriginOrcid)(\"stackLength\",r.peerReviewStack.peerReviews.length)(\"displayTheStack\",r.displayTheStack)(\"topPanelOfTheStackMode\",r.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack)(\"isPublicRecord\",r.isPublicRecord)(\"type\",\"peer-review\")(\"item\",t)(\"panelTitle\",e.lcZ(24,34,t.completionDate))}}function ya(o,_){if(1&o&&(e.ynx(0),e.YNc(1,xa,25,50,\"app-panel\",1),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isPreferred(n)||t.displayTheStack)}}let ka=(()=>{var o;class _{set peerReviewStack(t){t.peerReviews=t.peerReviews.map(i=>({...i,userIsSource:this.userIsSource(i)})),this._peerReviewStack=t,this.putsThePreferredPeerReviewOnTop(t),this.setInitialStates(t)}get peerReviewStack(){return this._peerReviewStack}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackClass=this._displayTheStack,this.setInitialStates(this._peerReviewStack,!0)}get displayTheStack(){return this._displayTheStack}constructor(t,i){this._platformInfo=t,this._recordPeerReviewService=i,this.displayTheStackClass=!1,this._displayTheStack=!1,this.total=new e.vpe,this.stackPanelsDisplay={},this.panelDetailsState={},this.detailsPeerReviews=[],this._platformInfo.get().subscribe(r=>{this.platform=r})}putsThePreferredPeerReviewOnTop(t){const i=t.peerReviews.findIndex(r=>this.isPreferred(r));if(i){const r=t.peerReviews[i];t.peerReviews.splice(i,1),t.peerReviews.unshift(r)}}setInitialStates(t,i=!1){t.peerReviews.forEach(r=>{this.setDefaultPanelsDisplay(r,i),this.setDefaultPanelDetailsState(r,i)})}setDefaultPanelsDisplay(t,i=!1){(void 0===this.stackPanelsDisplay[t.putCode.value]||i)&&(this.stackPanelsDisplay[t.putCode.value]={topPanelOfTheStack:this.isPreferred(t)})}setDefaultPanelDetailsState(t,i=!1){(void 0===this.panelDetailsState[t.putCode.value]||i)&&(this.panelDetailsState[t.putCode.value]={state:!1})}isPreferred(t){return!(!t||!this.peerReviewStack)&&this.peerReviewStack.activePutCode.toString()===t.putCode.value}makePrimaryCard(t){this._recordPeerReviewService.updatePreferredSource(t.putCode.value).subscribe()}changeTopPanelOfTheStack(t){Object.keys(this.stackPanelsDisplay).forEach(i=>{this.stackPanelsDisplay[i].topPanelOfTheStack=!1}),this.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack=!0}trackByPeerReviewStack(t,i){return i.putCode}ngOnInit(){}getDetails(t,i){this.isPublicRecord?this._recordPeerReviewService.getPublicPeerReviewById(this.isPublicRecord,i).pipe((0,k.P)()).subscribe(r=>{this.detailsPeerReviews.push({putCode:i,peerReview:r}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)}):this._recordPeerReviewService.getPeerReviewById(i).pipe((0,k.P)()).subscribe(r=>{this.detailsPeerReviews.push({putCode:i,peerReview:r}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)})}getPeerReview(t){return 0===this.detailsPeerReviews.length?null:this.detailsPeerReviews.filter(i=>i.putCode===t).map(i=>i.peerReview)[0]}collapse(t){t.showDetails=!t.showDetails}userIsSource(t){var i,r;return(null==(r=null==(i=this.userRecord)?void 0:i.userInfo)?void 0:r.EFFECTIVE_USER_ORCID)===(null==t?void 0:t.source)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu),e.Y36(tn.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-peer-review-stack\"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj(\"display-the-stack\",i.displayTheStackClass)},inputs:{isPublicRecord:\"isPublicRecord\",userRecord:\"userRecord\",peerReviewStack:\"peerReviewStack\"},outputs:{total:\"total\"},decls:1,vars:2,consts:function(){let n,t,i,r,a,s,l;return n=\"Review date:\",t=\"Type:\",i=\"Role:\",r=\"Show more detail\",a=\"Show less detail\",s=\"View\",l=\"View\",[[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"panelId\",\"peer-review\",\"class\",\"top-bar\",3,\"putCode\",\"elements\",\"type\",\"ngStyle\",\"editable\",\"customControls\",\"stackedHeader\",4,\"ngIf\"],[\"panelId\",\"peer-review\",1,\"top-bar\",3,\"putCode\",\"elements\",\"type\",\"ngStyle\",\"editable\",\"customControls\",\"stackedHeader\"],[\"header\",\"\",1,\"peer-review-title\",3,\"ngClass\"],[1,\"header-sub-peer-review\",3,\"ngClass\"],n,t,[1,\"capitalize\"],i,[\"custom-controls\",\"\",3,\"ngClass\"],[\"class\",\"show\",4,\"ngIf\"],[\"class\",\"underline\",\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",3,\"href\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"isPublicRecord\",\"subPeerReview\",\"detailsPeerReviews\",4,\"ngIf\"],[3,\"userRecord\",\"isPreferred\",\"sourceName\",\"assertionOriginName\",\"assertionOriginClientId\",\"assertionOriginOrcid\",\"stackLength\",\"displayTheStack\",\"topPanelOfTheStackMode\",\"isPublicRecord\",\"type\",\"item\",\"panelTitle\",\"displayTheStackChange\",\"makePrimary\",\"topPanelOfTheStackModeChange\"],[1,\"show\"],[\"class\",\"underline show-more-button\",3,\"click\",4,\"ngIf\"],[\"class\",\"underline\",\"id\",\"show-less-button\",3,\"click\",4,\"ngIf\"],[1,\"underline\",\"show-more-button\",3,\"click\"],r,[\"id\",\"show-less-button\",1,\"underline\",3,\"click\"],a,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",1,\"underline\",3,\"href\"],s,l,[3,\"isPublicRecord\",\"subPeerReview\",\"detailsPeerReviews\"]]},template:function(t,i){1&t&&e.YNc(0,ya,2,1,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",null==i.peerReviewStack?null:i.peerReviewStack.peerReviews)(\"ngForTrackBy\",i.trackByPeerReviewStack)},dependencies:[p.mk,p.sg,p.O5,p.PC,ae.y,Ne,v.t,Sa,X.r,pe.Q],styles:[\"[body][_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]{width:100%}.display-the-stack[_nghost-%COMP%]{border-style:solid;border-radius:4px;border-width:2px}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){display:block;position:relative}app-panel[_ngcontent-%COMP%]{word-break:break-word}app-panel[_ngcontent-%COMP%]   .research-resources-title[_ngcontent-%COMP%]{margin:0}app-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:5px}.header-sub-peer-review[_ngcontent-%COMP%]{margin-inline-end:40px}.header-sub-peer-review[_ngcontent-%COMP%], .mobile[_ngcontent-%COMP%]{margin-inline-end:10px}.show[_ngcontent-%COMP%]{margin-inline-end:32px}\",\"app-panel-data[_ngcontent-%COMP%]{border-color:#bdbdbd!important;background-color:#fff}.description[_ngcontent-%COMP%]{border-color:#bdbdbd!important}\"]}),_})();function va(o,_){1&o&&(e.TgZ(0,\"div\",11),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"mat-progress-spinner\",12),e._uU(3,\"\\\\n            \"),e.qZA(),e._uU(4,\"\\\\n          \"),e.qZA())}function Da(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n                  \"),e.TgZ(2,\"p\"),e._uU(3),e.TgZ(4,\"a\",19),e._uU(5),e.qZA(),e._uU(6,\"\\\\n                  \"),e.qZA(),e._uU(7,\"\\\\n                \"),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(3),e.hij(\"\\\\n                    \",n.groupType,\":\\\\n                    \"),e.xp6(1),e.s9C(\"href\",n.url,e.LSH),e.xp6(1),e.hij(\"\\\\n                      \",n.groupIdValue,\"\\\\n                    \")}}function wa(o,_){if(1&o&&(e.TgZ(0,\"app-peer-review-stack\",20),e._uU(1,\"\\\\n                \"),e.qZA()),2&o){const n=_.$implicit,t=e.oxw(5);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"peerReviewStack\",n)}}function La(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"app-panel-element\",13),e._uU(3,\"\\\\n              \"),e.TgZ(4,\"div\",14),e._uU(5,\"\\\\n                \"),e.TgZ(6,\"p\"),e._uU(7,\"\\\\n                  \"),e.TgZ(8,\"span\",15),e._uU(9),e.qZA(),e._uU(10),e.qZA(),e._uU(11,\"\\\\n                \"),e.YNc(12,Da,8,3,\"ng-container\",3),e._uU(13,\"\\\\n              \"),e.qZA(),e._uU(14,\"\\\\n            \"),e.qZA(),e._uU(15,\"\\\\n            \"),e.TgZ(16,\"app-panel-element\",16),e._uU(17,\"\\\\n              \"),e.TgZ(18,\"div\",17),e._uU(19,\"\\\\n                \"),e.YNc(20,wa,2,3,\"app-peer-review-stack\",18),e._uU(21,\"\\\\n              \"),e.qZA(),e._uU(22,\"\\\\n            \"),e.qZA(),e._uU(23,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(3);e.xp6(2),e.Q6J(\"hideVisibility\",!1),e.xp6(7),e.hij(\"\\\\n                    \",n.type+(n.description?\",\":\"\"),\"\\\\n                  \"),e.xp6(1),e.hij(\"\\\\n                  \",n.description,\"\\\\n                \"),e.xp6(2),e.Q6J(\"ngIf\",n.groupType),e.xp6(4),e.Q6J(\"hideVisibility\",!1),e.xp6(4),e.Q6J(\"ngForOf\",n.peerReviewDuplicateGroups)(\"ngForTrackBy\",t.trackByPeerReviewGroup)}}function $a(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",5,6),e.NdJ(\"openStateChange\",function(i){const a=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.expandedClicked(i,a))}),e._uU(2,\"\\\\n        \"),e.TgZ(3,\"div\",7),e._uU(4,\"\\\\n          \"),e.ynx(5),e.SDv(6,8),e.BQk(),e._uU(7,\"\\\\n          \"),e.TgZ(8,\"b\"),e._uU(9),e.qZA(),e._uU(10),e.qZA(),e._uU(11,\"\\\\n        \"),e.TgZ(12,\"app-panel-data\",9),e._uU(13,\"\\\\n          \"),e.YNc(14,va,5,0,\"div\",10),e._uU(15,\"\\\\n          \"),e.YNc(16,La,24,7,\"ng-container\",3),e._uU(17,\"\\\\n        \"),e.qZA(),e._uU(18,\"\\\\n      \"),e.qZA()}if(2&o){const n=_.$implicit,t=e.oxw(3);e.Q6J(\"putCode\",n.groupId)(\"elements\",n)(\"type\",\"peer-review\")(\"editable\",!1)(\"openState\",t.moreInfo.includes(n.groupId))(\"expandButtonsPosition\",\"left\")(\"isPublicRecord\",t.isPublicRecord)(\"editableVisibilityControl\",!0)(\"stackSiblings\",n.peerReviewDuplicateGroups)(\"visibility\",t.getVisibility(n))(\"visibilityError\",n.visibilityError)(\"panelTitle\",n.name),e.xp6(9),e.hij(\"\\\\n            \",n.name,\"\\\\n          \"),e.xp6(1),e.hij(\"\\\\n          (\",(null==n||null==n.peerReviewDuplicateGroups?null:n.peerReviewDuplicateGroups.length)||(null==n?null:n.duplicated),\")\\\\n        \"),e.xp6(4),e.Q6J(\"ngIf\",!(null!=n&&n.type)),e.xp6(2),e.Q6J(\"ngIf\",null==n?null:n.type)}}function Ua(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n      \"),e.YNc(2,$a,19,16,\"app-panel\",4),e._uU(3,\"\\\\n    \"),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J(\"ngForOf\",n.peerReviews)}}function Za(o,_){1&o&&(e.ynx(0),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"div\",9),e._uU(3,\"\\\\n        \"),e.TgZ(4,\"p\",21),e.SDv(5,22),e.qZA(),e._uU(6,\"\\\\n        \"),e.TgZ(7,\"a\",23),e.SDv(8,24),e.qZA(),e._uU(9,\"\\\\n      \"),e.qZA(),e._uU(10,\"\\\\n    \"),e.BQk())}const Wa=function(){return[\"order\"]};function Fa(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"section\",1),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"app-panels\",2),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.expandedContent.PEER_REVIEW=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.sortEvent(i))}),e._uU(3,\"\\\\n    \"),e.YNc(4,Ua,4,1,\"ng-container\",3),e._uU(5,\"\\\\n    \"),e.YNc(6,Za,11,0,\"ng-container\",3),e._uU(7,\"\\\\n  \"),e.qZA(),e._uU(8,\"\\\\n\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",n.regionPeerReviews),e.xp6(2),e.Q6J(\"title\",n.ngOrcidPeerReview)(\"type\",\"peer-review\")(\"userRecord\",n.userRecord)(\"currentAmount\",n.peerReviews.length)(\"reviewsNumber\",n.reviewsNumber)(\"isPublicRecord\",n.isPublicRecord)(\"expandedContent\",n.expandedContent.PEER_REVIEW)(\"sortTypes\",e.DdM(13,Wa))(\"sortType\",\"order\")(\"sortDirection\",\"asc\"),e.xp6(2),e.Q6J(\"ngIf\",n.peerReviews.length>0),e.xp6(2),e.Q6J(\"ngIf\",0===n.peerReviews.length&&n.IS_QA)}}let Ga=(()=>{var o;class _{constructor(t,i,r,a){this._user=i,this._record=r,this._recordPeerReviewService=a,this.regionPeerReviews=\"Peer reviews\",this.labelAddButton=\"Add Peer Review\",this.labelSortButton=\"Sort Peer Reviews\",this.expandedContentChange=new e.vpe,this.expandedPanelChange=new e.vpe,this.total=new e.vpe,this.modalPeerReviewComponent=He.G,this.$destroy=new w.xQ,this.userRecordContext={},this.peerReviews=[],this.detailsPeerReviews=[],this.moreInfo=[],this.ngOrcidPeerReview=\"Peer review\",this.loading=!0,t.get().pipe((0,x.R)(this.$destroy)).subscribe(s=>{this.platform=s,this.isMobile=s.columns4||s.columns8})}ngOnInit(){this.getRecord(),this.IS_QA=en()}trackByPeerReviewGroup(t,i){return i.activePutCode}getRecord(){this._user.getUserSession().pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.userSession=t}),this._record.getRecord({publicRecordId:this.isPublicRecord||void 0}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.userRecord=t}),this._record.getRecord({publicRecordId:this.isPublicRecord||void 0}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{void 0!==(null==t?void 0:t.peerReviews)&&(this.loading=!1),void 0!==(null==t?void 0:t.peerReviews)&&(this.peerReviews=t.peerReviews,this.reviewsNumber=0,this.peerReviews.forEach(i=>{this.reviewsNumber+=i.putCodes.length}),this.total.emit(this.peerReviews.length))})}sortEvent(t){this.userRecordContext.publicRecordId=this.isPublicRecord,this.userRecordContext.sortAsc=\"asc\"===t.direction,this._recordPeerReviewService.changeUserRecordContext(this.userRecordContext)}getDetails(t,i){this.isPublicRecord?this._recordPeerReviewService.getPublicPeerReviewById(this.isPublicRecord,i).pipe((0,k.P)()).subscribe(r=>{this.detailsPeerReviews.push({putCode:i,peerReview:r}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)}):this._recordPeerReviewService.getPeerReviewById(i).pipe((0,k.P)()).subscribe(r=>{this.detailsPeerReviews.push({putCode:i,peerReview:r}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)})}getPeerReview(t){return 0===this.detailsPeerReviews.length?null:this.detailsPeerReviews.filter(i=>i.putCode===t).map(i=>i.peerReview)[0]}getVisibility(t){return t.visibility}collapse(t){t.showDetails=!t.showDetails}expandedClicked(t,i){i&&this.getPeerReviewSummaryByGroupId(i)}getPeerReviewSummaryByGroupId(t){this._recordPeerReviewService.getPeerReviewsByGroupId({publicRecordId:this.isPublicRecord},t.groupIdValue).pipe((0,k.P)()).subscribe(i=>{this.peerReviews.forEach((r,a)=>{var s;if(r.groupId===(null==(s=i[0])?void 0:s.groupId)){const l=i.filter(u=>u.groupId===r.groupId)[0];this.peerReviews[a].type=l.type,this.peerReviews[a].description=l.description,this.peerReviews[a].groupType=l.groupType,this.peerReviews[a].url=l.url,this.peerReviews[a].groupIdValue=l.groupIdValue,this.peerReviews[a].peerReviewDuplicateGroups=l.peerReviewDuplicateGroups;const c=l.peerReviewDuplicateGroups[0].peerReviews[0].visibility.visibility;l.peerReviewDuplicateGroups.forEach(u=>{u.peerReviews.filter(f=>f.visibility.visibility!==c).length>0&&(this.peerReviews[a].visibilityError=!0)})}})})}isQA(){return en()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu),e.Y36(j.KD),e.Y36(H.B),e.Y36(tn.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-peer-reviews\"]],inputs:{userInfo:\"userInfo\",isPublicRecord:\"isPublicRecord\",expandedContent:\"expandedContent\"},outputs:{expandedContentChange:\"expandedContentChange\",expandedPanelChange:\"expandedPanelChange\",total:\"total\"},decls:2,vars:1,consts:function(){let n,t,i;return n=\"Review activity for\",t=\"Connect to trusted organizations to automatically add your peer review activity to your ORCID record.\",i=\"Learn more about how peer reviews are added to your ORCID record\",[[\"id\",\"peer-reviews\",\"role\",\"region\",4,\"ngIf\"],[\"id\",\"peer-reviews\",\"role\",\"region\"],[1,\"row\",3,\"title\",\"type\",\"userRecord\",\"currentAmount\",\"reviewsNumber\",\"isPublicRecord\",\"expandedContent\",\"sortTypes\",\"sortType\",\"sortDirection\",\"expandedContentChange\",\"sort\"],[4,\"ngIf\"],[\"panelId\",\"peer-review-stacks\",\"class\",\"top-bar\",3,\"putCode\",\"elements\",\"type\",\"editable\",\"openState\",\"expandButtonsPosition\",\"isPublicRecord\",\"editableVisibilityControl\",\"stackSiblings\",\"visibility\",\"visibilityError\",\"panelTitle\",\"openStateChange\",4,\"ngFor\",\"ngForOf\"],[\"panelId\",\"peer-review-stacks\",1,\"top-bar\",3,\"putCode\",\"elements\",\"type\",\"editable\",\"openState\",\"expandButtonsPosition\",\"isPublicRecord\",\"editableVisibilityControl\",\"stackSiblings\",\"visibility\",\"visibilityError\",\"panelTitle\",\"openStateChange\"],[\"peerReviewPanelComponent\",\"\"],[\"header\",\"\"],n,[1,\"orc-font-body-small\"],[\"class\",\"row horizontal-center\",4,\"ngIf\"],[1,\"row\",\"horizontal-center\"],[\"color\",\"primary\",\"mode\",\"indeterminate\",1,\"col\"],[3,\"hideVisibility\"],[1,\"description\"],[1,\"capitalize\"],[1,\"nested-panels\",3,\"hideVisibility\"],[\"nested-panels\",\"\"],[3,\"userRecord\",\"isPublicRecord\",\"peerReviewStack\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"underline\",3,\"href\"],[3,\"userRecord\",\"isPublicRecord\",\"peerReviewStack\"],[1,\"empty\"],t,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006971333-Peer-Review\",1,\"underline\"],i]},template:function(t,i){1&t&&(e.YNc(0,Fa,9,14,\"section\",0),e._uU(1,\"\\\\n\")),2&t&&e.Q6J(\"ngIf\",!(i.loading||0===(null==i.peerReviews?null:i.peerReviews.length)&&i.isPublicRecord))},dependencies:[p.sg,p.O5,ae.y,Ue.N,se.j,he,ga.sN,ka],styles:[\"[_nghost-%COMP%]{width:100%}app-peer-review-stack[_ngcontent-%COMP%]{display:block;margin-top:24px}app-peer-review-stack[_ngcontent-%COMP%]:first-child{margin-top:0}app-panel[_ngcontent-%COMP%]{width:100%;margin-top:16px;word-break:break-word}app-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:5px}app-panel[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:10px}p.empty[_ngcontent-%COMP%]{margin-bottom:0}.description[_ngcontent-%COMP%]{border-bottom:solid 1px;padding:16px}app-panel-data[_ngcontent-%COMP%]{padding:0!important}app-panel-data[_ngcontent-%COMP%]   .nested-panels[_ngcontent-%COMP%]{padding:16px;width:auto}app-panel-data[_ngcontent-%COMP%]   .nested-panels[_ngcontent-%COMP%]   app-panel-element[_ngcontent-%COMP%]{padding:16px}\",\"app-panel-data[_ngcontent-%COMP%]{border-color:#bdbdbd!important;background-color:#fff}.description[_ngcontent-%COMP%]{border-color:#bdbdbd!important}\"]}),_})();var xn=g(21476),yn=g(85954);function Ka(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\" (\"),e.qZA())}function Ba(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.city)}}function Qa(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\", \",n.region,\"\")}}function Ja(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\", \",n.country,\"\")}}function Xa(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\")\"),e.qZA())}function Ya(o,_){if(1&o&&(e.TgZ(0,\"div\")(1,\"span\"),e._uU(2),e.ALo(3,\"titlecase\"),e.qZA(),e.YNc(4,Ka,2,0,\"span\",5),e.YNc(5,Ba,2,1,\"span\",5),e.YNc(6,Qa,2,1,\"span\",5),e.YNc(7,Ja,2,1,\"span\",5),e.YNc(8,Xa,2,0,\"span\",5),e.qZA()),2&o){const n=_.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,6,n.name)),e.xp6(2),e.Q6J(\"ngIf\",n.city||n.region||n.country),e.xp6(1),e.Q6J(\"ngIf\",n.city),e.xp6(1),e.Q6J(\"ngIf\",n.region),e.xp6(1),e.Q6J(\"ngIf\",n.country),e.xp6(1),e.Q6J(\"ngIf\",n.city||n.region||n.country)}}function qa(o,_){if(1&o&&(e.TgZ(0,\"span\")(1,\"span\"),e._uU(2),e.ALo(3,\"monthDayYearDateToString\"),e.qZA()()),2&o){const n=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,1,n.researchResource.endDate))}}function za(o,_){if(1&o&&(e.TgZ(0,\"span\")(1,\"span\"),e._uU(2),e.ALo(3,\"monthDayYearDateToString\"),e.qZA(),e.TgZ(4,\"span\"),e._uU(5,\" to \"),e.qZA(),e.TgZ(6,\"span\",11),e.SDv(7,12),e.qZA(),e.YNc(8,qa,4,3,\"span\",5),e.qZA()),2&o){const n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,n.researchResource.startDate)),e.xp6(4),e.Q6J(\"hidden\",n.researchResource.endDate&&n.researchResource.endDate.year),e.xp6(2),e.Q6J(\"ngIf\",n.researchResource.endDate)}}function Ha(o,_){if(1&o&&(e.TgZ(0,\"span\")(1,\"span\"),e._uU(2),e.ALo(3,\"monthDayYearDateToString\"),e.qZA()()),2&o){const n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,n.researchResource.endDate))}}function Va(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",13),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.getDetails(i.researchResource,i.researchResource.putCode))}),e.SDv(1,14),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"research-resource\",\"show\",n.researchResource.title))}}function ja(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",15),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.collapse(i.researchResource))}),e.SDv(1,16),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"research-resource\",\"hide\",n.researchResource.title))}}function es(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\" (\"),e.qZA())}function ns(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.Oqu(n.city)}}function ts(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\", \",n.region,\"\")}}function os(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\", \",n.country,\"\")}}function is(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\")\"),e.qZA())}function _s(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"h3\",21),e.SDv(2,23),e.qZA(),e.TgZ(3,\"div\"),e._uU(4),e.qZA(),e.BQk()),2&o){const n=e.oxw(3).ngIf;e.xp6(4),e.hij(\" \",n.translatedTitle,\" \")}}function rs(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"h3\",21),e.SDv(2,24),e.qZA(),e.TgZ(3,\"div\")(4,\"a\",25),e._uU(5),e.qZA()(),e.BQk()),2&o){const n=e.oxw(3).ngIf;e.xp6(4),e.s9C(\"href\",n.url,e.LSH),e.xp6(1),e.hij(\" \",n.url,\" \")}}function as(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"h3\",21),e.SDv(2,26),e.qZA(),e.TgZ(3,\"div\"),e._uU(4),e.ALo(5,\"monthDayYearDateToString\"),e.qZA(),e.BQk()),2&o){const n=e.oxw(3).ngIf;e.xp6(4),e.hij(\" \",e.lcZ(5,1,n.lastModifiedDate),\" \")}}function ss(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"p\")(2,\"span\"),e._uU(3),e.ALo(4,\"titlecase\"),e.qZA(),e.YNc(5,es,2,0,\"span\",5),e.YNc(6,ns,2,1,\"span\",5),e.YNc(7,ts,2,1,\"span\",5),e.YNc(8,os,2,1,\"span\",5),e.YNc(9,is,2,0,\"span\",5),e.qZA(),e._UZ(10,\"app-org-identifier\",20),e.YNc(11,_s,5,1,\"ng-container\",5),e.YNc(12,rs,6,2,\"ng-container\",5),e.TgZ(13,\"h3\",21),e.SDv(14,22),e.qZA(),e.TgZ(15,\"div\"),e._uU(16),e.ALo(17,\"monthDayYearDateToString\"),e.qZA(),e.YNc(18,as,6,3,\"ng-container\",5),e.BQk()),2&o){const n=_.ngIf,t=e.oxw().$implicit,i=e.oxw().ngIf;e.xp6(3),e.Oqu(e.lcZ(4,11,t.name)),e.xp6(2),e.Q6J(\"ngIf\",t.city||t.region||t.country),e.xp6(1),e.Q6J(\"ngIf\",t.city),e.xp6(1),e.Q6J(\"ngIf\",t.region),e.xp6(1),e.Q6J(\"ngIf\",t.country),e.xp6(1),e.Q6J(\"ngIf\",t.city||t.region||t.country),e.xp6(1),e.Q6J(\"orgDisambiguated\",n),e.xp6(1),e.Q6J(\"ngIf\",i.translatedTitle),e.xp6(1),e.Q6J(\"ngIf\",i.url),e.xp6(4),e.hij(\" \",e.lcZ(17,13,i.createdDate),\" \"),e.xp6(2),e.Q6J(\"ngIf\",i.lastModifiedDate)}}function ls(o,_){if(1&o&&(e.TgZ(0,\"div\",19),e.YNc(1,ss,19,15,\"ng-container\",5),e.qZA()),2&o){const n=_.$implicit,t=e.oxw(3);e.xp6(1),e.Q6J(\"ngIf\",t.getOrganizationDisambiguated(n))}}function cs(o,_){if(1&o&&(e.TgZ(0,\"strong\",21),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",n.resourceName,\" \")}}function ds(o,_){if(1&o&&(e.TgZ(0,\"strong\",21),e._uU(1),e.qZA()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",n.resourceName,\" \")}}function ps(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",37),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.getOrganizationDisambiguatedDetails(i,i.hosts[0].disambiguationSource,i.hosts[0].orgDisambiguatedId))}),e.SDv(1,38),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw().$implicit;e.uIk(\"aria-label\",e.Dn7(2,1,\"research-resource\",\"show\",n.resourceName))}}function us(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",39),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.collapse(i))}),e.SDv(1,40),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw().$implicit;e.uIk(\"aria-label\",e.Dn7(2,1,\"research-resource\",\"hide\",n.resourceName))}}function gs(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\" (\"),e.qZA())}function fs(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(1),e.Oqu(n.city)}}function Os(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(1),e.hij(\", \",n.region,\"\")}}function Cs(o,_){if(1&o&&(e.TgZ(0,\"span\"),e._uU(1),e.qZA()),2&o){const n=e.oxw().ngIf;e.xp6(1),e.hij(\", \",n.country,\"\")}}function Rs(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\")\"),e.qZA())}function Ts(o,_){if(1&o&&(e.TgZ(0,\"div\")(1,\"span\"),e._uU(2),e.qZA(),e.YNc(3,gs,2,0,\"span\",5),e.YNc(4,fs,2,1,\"span\",5),e.YNc(5,Os,2,1,\"span\",5),e.YNc(6,Cs,2,1,\"span\",5),e.YNc(7,Rs,2,0,\"span\",5),e.qZA()),2&o){const n=_.ngIf;e.xp6(2),e.Oqu(n.name),e.xp6(1),e.Q6J(\"ngIf\",n.city||n.region||n.country),e.xp6(1),e.Q6J(\"ngIf\",n.city),e.xp6(1),e.Q6J(\"ngIf\",n.region),e.xp6(1),e.Q6J(\"ngIf\",n.country),e.xp6(1),e.Q6J(\"ngIf\",n.city||n.region||n.country)}}function ms(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3).$implicit;e.xp6(1),e.hij(\" \",n.url,\" \")}}function Es(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"a\",25),e._uU(2),e.qZA(),e.BQk()),2&o){const n=e.oxw(3).$implicit;e.xp6(1),e.s9C(\"href\",n.url,e.LSH),e.xp6(1),e.hij(\" \",n.url,\" \")}}function Ss(o,_){if(1&o&&(e.TgZ(0,\"div\",3)(1,\"h3\",21),e.SDv(2,42),e.qZA(),e.YNc(3,ms,2,1,\"ng-container\",5),e.ALo(4,\"isUrl\"),e.YNc(5,Es,3,2,\"ng-container\",5),e.ALo(6,\"isUrl\"),e.qZA()),2&o){const n=e.oxw(2).$implicit;e.xp6(3),e.Q6J(\"ngIf\",!e.lcZ(4,2,n.url)),e.xp6(2),e.Q6J(\"ngIf\",e.lcZ(6,4,n.url))}}function hs(o,_){if(1&o&&(e.ynx(0),e._UZ(1,\"app-org-identifier\",20),e.BQk()),2&o){const n=_.ngIf;e.xp6(1),e.Q6J(\"orgDisambiguated\",n)}}function Ns(o,_){if(1&o&&(e.TgZ(0,\"div\",3),e.YNc(1,hs,2,1,\"ng-container\",5),e.qZA()),2&o){const n=_.ngIf,t=e.oxw(5);e.xp6(1),e.Q6J(\"ngIf\",t.getOrganizationDisambiguated(n))}}function Ms(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\",41)(1,\"app-panel-element\",1)(2,\"div\",3),e._UZ(3,\"app-display-external-ids\",6),e.YNc(4,Ts,8,6,\"div\",5),e.qZA(),e.YNc(5,Ss,7,6,\"div\",17),e.YNc(6,Ns,2,1,\"div\",17),e.qZA()()),2&o){const n=e.oxw().$implicit;e.Q6J(\"borderBottom\",!0),e.xp6(1),e.Q6J(\"hideVisibility\",!1),e.xp6(2),e.Q6J(\"externalIdentifiers\",n.externalIdentifiers)(\"noBoldTitle\",!0),e.xp6(1),e.Q6J(\"ngIf\",n.hosts&&n.hosts[0]),e.xp6(1),e.Q6J(\"ngIf\",n.url),e.xp6(1),e.Q6J(\"ngIf\",n.hosts&&n.hosts[0])}}const Ps=function(o,_,n,t,i){return{infrastructures:o,equipment:_,collections:n,services:t,mobile:i}},kn=function(o,_){return{\"orc-font-small-print\":o,\"orc-font-body-small\":_}};function bs(o,_){if(1&o&&(e.TgZ(0,\"div\")(1,\"app-panel\",27)(2,\"div\",28)(3,\"div\")(4,\"span\",29),e._UZ(5,\"span\",30),e.TgZ(6,\"strong\"),e._uU(7),e.ALo(8,\"uppercase\"),e.qZA()(),e.YNc(9,cs,2,1,\"strong\",31),e.qZA(),e.YNc(10,ds,2,1,\"strong\",31),e.qZA(),e.TgZ(11,\"div\",32)(12,\"span\",33),e.YNc(13,ps,3,5,\"a\",34),e.YNc(14,us,3,5,\"a\",35),e.qZA()(),e.YNc(15,Ms,7,7,\"app-panel-data\",36),e.qZA()()),2&o){const n=_.$implicit,t=_.index,i=e.oxw(3);e.xp6(1),e.Q6J(\"elements\",n)(\"type\",\"top-bar\")(\"editable\",!1)(\"customControls\",!0)(\"stackedHeader\",!i.platform.columns12),e.uIk(\"id\",\"research-detail-item-\"+t),e.xp6(3),e.Q6J(\"ngClass\",e.qbA(16,Ps,\"infrastructures\"===n.resourceType.toLocaleLowerCase(),\"equipment\"===n.resourceType.toLocaleLowerCase(),\"collections\"===n.resourceType.toLocaleLowerCase(),\"services\"===n.resourceType.toLocaleLowerCase(),i.isMobile)),e.xp6(3),e.hij(\" \",e.lcZ(8,14,n.resourceType),\" \"),e.xp6(2),e.Q6J(\"ngIf\",!i.isMobile),e.xp6(1),e.Q6J(\"ngIf\",i.isMobile),e.xp6(2),e.Q6J(\"ngClass\",e.WLB(22,kn,i.isMobile,!i.isMobile)),e.xp6(1),e.Q6J(\"ngIf\",!n.showDetails),e.xp6(1),e.Q6J(\"ngIf\",n.showDetails),e.xp6(1),e.Q6J(\"ngIf\",n.showDetails)}}function As(o,_){if(1&o&&(e.TgZ(0,\"div\",3),e.YNc(1,ls,2,1,\"div\",18),e.YNc(2,bs,16,25,\"div\",4),e.qZA()),2&o){const n=_.ngIf;e.xp6(1),e.Q6J(\"ngForOf\",n.hosts),e.xp6(1),e.Q6J(\"ngForOf\",n.items)}}function Is(o,_){if(1&o&&(e.TgZ(0,\"app-panel-element\",1),e.YNc(1,As,3,2,\"div\",17),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"hideVisibility\",!1),e.xp6(1),e.Q6J(\"ngIf\",n.getResearchResource(n.researchResource.putCode))}}const xs=function(o){return{\"show-details\":o}};let ys=(()=>{var o;class _{constructor(t,i,r){this._organizationsService=i,this._recordResearchResourceService=r,this.$destroy=new w.xQ,this.detailsResearchResources=[],this.detailsOrgDisambiguated=[],t.get().pipe((0,x.R)(this.$destroy)).subscribe(a=>{this.platform=a,this.isMobile=a.columns4||a.columns8})}ngOnInit(){}getResearchResource(t){return 0===this.detailsResearchResources.length?null:this.detailsResearchResources.filter(i=>i.putCode===t).map(i=>i.researchResource)[0]}getDetails(t,i){this.isPublicRecord?this._recordResearchResourceService.getPublicResearchResourceById(this.isPublicRecord,i).pipe((0,k.P)()).subscribe(r=>{this.detailsResearchResources.push({putCode:i,researchResource:r}),r.hosts.forEach(s=>{this.getOrganizationDisambiguatedDetails(null,s.disambiguationSource,s.orgDisambiguatedId)}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)}):this._recordResearchResourceService.getResearchResourceById(i).pipe((0,k.P)()).subscribe(r=>{const a=r;this.detailsResearchResources.push({putCode:i,researchResource:a}),a.hosts.forEach(s=>{this.getOrganizationDisambiguatedDetails(null,s.disambiguationSource,s.orgDisambiguatedId)}),t.showDetails=!0},r=>{console.error(\"getDetailsError\",r)})}getOrganizationDisambiguated(t){const i=t.disambiguationSource,r=t.orgDisambiguatedId;return this.detailsOrgDisambiguated.filter(a=>a.disambiguationSource===i&&a.orgDisambiguatedId===r).map(a=>a.orgDisambiguated)[0]}getOrganizationDisambiguatedDetails(t,i,r){this._organizationsService.getOrgDisambiguated(i,r).pipe((0,k.P)()).subscribe(a=>{this.detailsOrgDisambiguated.push({disambiguationSource:i,orgDisambiguatedId:r,orgDisambiguated:a}),t&&(t.showDetails=!0)})}collapse(t){t.showDetails=!t.showDetails}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu),e.Y36(j.zT),e.Y36(We.y))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-research-resource\"]],inputs:{isPublicRecord:\"isPublicRecord\",researchResource:\"researchResource\",stackMode:\"stackMode\",orgDisambiguated:\"orgDisambiguated\",panelTitle:\"panelTitle\",panelId:\"panelId\"},decls:13,vars:17,consts:function(){let n,t,i,r,a,s,l,c,u,O;return n=\"present\",t=\"Show more detail\",i=\"Show less detail\",r=\"Added\",a=\"Translated title\",s=\"URL\",l=\"Last modified\",c=\"Show more detail\",u=\"Show less detail\",O=\"URL\",[[1,\"orc-font-body-small\",3,\"borderBottom\"],[3,\"hideVisibility\"],[1,\"description-container\",3,\"ngClass\"],[1,\"description\"],[4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[3,\"externalIdentifiers\",\"noBoldTitle\"],[1,\"buttons-container\",3,\"ngClass\"],[\"class\",\"underline show-more-button\",3,\"click\",4,\"ngIf\"],[\"class\",\"underline\",\"id\",\"show-less-button\",3,\"click\",4,\"ngIf\"],[3,\"hideVisibility\",4,\"ngIf\"],[3,\"hidden\"],n,[1,\"underline\",\"show-more-button\",3,\"click\"],t,[\"id\",\"show-less-button\",1,\"underline\",3,\"click\"],i,[\"class\",\"description\",4,\"ngIf\"],[\"class\",\"host\",4,\"ngFor\",\"ngForOf\"],[1,\"host\"],[3,\"orgDisambiguated\"],[1,\"orc-font-body-small\"],r,a,s,[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",3,\"href\"],l,[\"panelId\",\"research-resource\",1,\"top-bar\",3,\"elements\",\"type\",\"editable\",\"customControls\",\"stackedHeader\"],[\"header\",\"\"],[1,\"orc-font-small-print\",\"resourceType\",3,\"ngClass\"],[1,\"dot\"],[\"class\",\"orc-font-body-small\",4,\"ngIf\"],[\"custom-controls\",\"\"],[1,\"show\",3,\"ngClass\"],[\"class\",\"underline\",\"id\",\"show-more-item-button\",3,\"click\",4,\"ngIf\"],[\"class\",\"underline\",\"id\",\"show-less-item-button\",3,\"click\",4,\"ngIf\"],[3,\"borderBottom\",4,\"ngIf\"],[\"id\",\"show-more-item-button\",1,\"underline\",3,\"click\"],c,[\"id\",\"show-less-item-button\",1,\"underline\",3,\"click\"],u,[3,\"borderBottom\"],O]},template:function(t,i){1&t&&(e.TgZ(0,\"app-panel-data\",0)(1,\"app-panel-element\",1)(2,\"div\",2)(3,\"div\",3),e.YNc(4,Ya,9,8,\"div\",4),e.TgZ(5,\"div\"),e.YNc(6,za,9,5,\"span\",5),e.YNc(7,Ha,4,3,\"span\",5),e.qZA(),e._UZ(8,\"app-display-external-ids\",6),e.qZA(),e.TgZ(9,\"div\",7),e.YNc(10,Va,3,5,\"a\",8),e.YNc(11,ja,3,5,\"a\",9),e.qZA()()(),e.YNc(12,Is,2,2,\"app-panel-element\",10),e.qZA()),2&t&&(e.Q6J(\"borderBottom\",null==i.researchResource?null:i.researchResource.showDetails),e.xp6(1),e.Q6J(\"hideVisibility\",!1),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(12,xs,null==i.researchResource?null:i.researchResource.showDetails)),e.xp6(2),e.Q6J(\"ngForOf\",null==i.researchResource?null:i.researchResource.hosts),e.xp6(2),e.Q6J(\"ngIf\",null==i.researchResource?null:i.researchResource.startDate),e.xp6(1),e.Q6J(\"ngIf\",!(null!=i.researchResource&&i.researchResource.startDate)&&(null==i.researchResource?null:i.researchResource.endDate)),e.xp6(1),e.Q6J(\"externalIdentifiers\",null==i.researchResource?null:i.researchResource.externalIdentifiers)(\"noBoldTitle\",!0),e.xp6(1),e.Q6J(\"ngClass\",e.WLB(14,kn,i.isMobile,!i.isMobile)),e.xp6(1),e.Q6J(\"ngIf\",!(null!=i.researchResource&&i.researchResource.showDetails)),e.xp6(1),e.Q6J(\"ngIf\",null==i.researchResource?null:i.researchResource.showDetails),e.xp6(1),e.Q6J(\"ngIf\",null==i.researchResource?null:i.researchResource.showDetails))},dependencies:[p.mk,p.sg,p.O5,ae.y,Ue.N,se.j,v.t,fe,_n,p.gd,p.rS,X.r,rn,pe.Q],styles:[\"[_nghost-%COMP%]{width:100%;box-sizing:border-box}h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.organization-identifiers[_ngcontent-%COMP%]{margin-top:0}app-panel[_ngcontent-%COMP%]{width:100%;margin-top:16px}app-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:5px}app-panel-data[_ngcontent-%COMP%]{padding:0!important}app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:start;padding-top:17px;word-break:break-word}app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-inline-end:16px}app-panel-data[_ngcontent-%COMP%]   app-panel-data[_ngcontent-%COMP%], app-panel-data[_ngcontent-%COMP%]   .research-detail[_ngcontent-%COMP%]{border-top:1px solid}app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%], app-panel-data[_ngcontent-%COMP%]   .show-details[_ngcontent-%COMP%]{border-bottom:solid 1px}.columns-8   [_nghost-%COMP%]   app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%], .columns-4   [_nghost-%COMP%]   app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]{flex-direction:column}.columns-8   [_nghost-%COMP%]   app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%], .columns-4   [_nghost-%COMP%]   app-panel-data[_ngcontent-%COMP%]   .description-container[_ngcontent-%COMP%]   .buttons-container[_ngcontent-%COMP%]{padding:0 16px 16px}.description[_ngcontent-%COMP%]{display:block;margin:16px}.description[_ngcontent-%COMP%]   .host[_ngcontent-%COMP%]:first-child{margin-bottom:16px}.resourceType[_ngcontent-%COMP%]{margin-right:15px}.resourceType[_ngcontent-%COMP%], .mobile[_ngcontent-%COMP%]{display:inline-block}.dot[_ngcontent-%COMP%]{height:8px;width:8px;border-radius:50%;display:inline-block;margin-right:8px}[dir=rtl]   [_nghost-%COMP%]   .dot[_ngcontent-%COMP%]{margin-left:8px;margin-right:auto}button.load-more[_ngcontent-%COMP%]{margin-top:20px}p.empty[_ngcontent-%COMP%]{margin-bottom:0}\",\".description-container[_ngcontent-%COMP%], .show-details[_ngcontent-%COMP%]{border-color:#bdbdbd!important}.infrastructures[_ngcontent-%COMP%]{color:#000000de}.infrastructures[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#000000de}.equipment[_ngcontent-%COMP%]{color:#000000de}.equipment[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#000000de}.services[_ngcontent-%COMP%]{color:#000000de}.services[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#000000de}.collections[_ngcontent-%COMP%]{color:#000000de}.collections[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{background-color:#000000de}\"]}),_})();function ks(o,_){if(1&o&&e._UZ(0,\"app-research-resource\",6),2&o){const n=e.oxw(2).$implicit,t=e.oxw();e.Q6J(\"isPublicRecord\",t.isPublicRecord)(\"researchResource\",n)}}const vs=function(o){return{\"z-index\":o}},Ds=function(o){return{last:o}};function ws(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",2)(1,\"h4\",3)(2,\"b\"),e._uU(3),e.qZA()(),e.YNc(4,ks,1,2,\"app-research-resource\",4),e.TgZ(5,\"app-panel-source\",5),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"makePrimary\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.makePrimaryCard(i))})(\"topPanelOfTheStackModeChange\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.changeTopPanelOfTheStack(i))}),e.qZA()()}if(2&o){const n=e.oxw(),t=n.$implicit,i=n.index,r=n.last,a=e.oxw();e.Q6J(\"stackSiblings\",a.researchResourceStack.researchResources)(\"editableVisibilityControl\",a.isPreferred(t))(\"elements\",t)(\"type\",\"research-resources\")(\"ngStyle\",e.VKq(30,vs,a.researchResourceStack.researchResources.length-i))(\"ngClass\",e.VKq(32,Ds,r))(\"editable\",!1)(\"openState\",!1)(\"expandButtonsPosition\",\"left\")(\"putCode\",t.putCode)(\"visibility\",a.researchResourceStack.activeVisibility)(\"isPublicRecord\",a.isPublicRecord)(\"stackedHeader\",!a.platform.columns12)(\"panelTitle\",t.title),e.uIk(\"panel-sequence\",\"cy-research-resource-stack-panel-\"+i),e.xp6(3),e.hij(\" \",t.title,\" \"),e.xp6(1),e.Q6J(\"ngIf\",a.stackPanelsDisplay[t.putCode].topPanelOfTheStack),e.xp6(1),e.Q6J(\"isPreferred\",a.isPreferred(t))(\"sourceName\",t.sourceName||t.source)(\"assertionOriginName\",t.assertionOriginName)(\"assertionOriginOrcid\",t.assertionOriginOrcid)(\"assertionOriginClientId\",t.assertionOriginClientId)(\"stackLength\",a.researchResourceStack.researchResources.length)(\"displayTheStack\",a.displayTheStack)(\"topPanelOfTheStackMode\",a.stackPanelsDisplay[t.putCode].topPanelOfTheStack)(\"isPublicRecord\",a.isPublicRecord)(\"type\",\"research-resources\")(\"item\",t)(\"panelTitle\",t.title)(\"userRecord\",a.userRecord)}}function Ls(o,_){if(1&o&&(e.ynx(0),e.YNc(1,ws,6,34,\"app-panel\",1),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isPreferred(n)||t.displayTheStack)}}let $s=(()=>{var o;class _{set researchResourceStack(t){this._researchResourceStack=t,this.setInitialStates(t)}get researchResourceStack(){return this._researchResourceStack}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackClass=this._displayTheStack,this.setInitialStates(this._researchResourceStack,!0)}get displayTheStack(){return this._displayTheStack}constructor(t,i){this._platformInfo=t,this._recordResearchResourceService=i,this.displayTheStackClass=!1,this._displayTheStack=!1,this.stackPanelsDisplay={},this.panelDetailsState={},this._platformInfo.get().subscribe(r=>{this.platform=r})}setInitialStates(t,i=!1){t.researchResources.forEach(r=>{this.setDefaultPanelsDisplay(r,i),this.setDefaultPanelDetailsState(r,i)})}setDefaultPanelsDisplay(t,i=!1){(void 0===this.stackPanelsDisplay[t.putCode]||i)&&(this.stackPanelsDisplay[t.putCode]={topPanelOfTheStack:this.isPreferred(t)})}setDefaultPanelDetailsState(t,i=!1){(void 0===this.panelDetailsState[t.putCode]||i)&&(this.panelDetailsState[t.putCode]={state:!1})}isPreferred(t){return!(!t||!this.researchResourceStack)&&this.researchResourceStack.activePutCode.toString()===t.putCode}makePrimaryCard(t){this._recordResearchResourceService.updatePreferredSource(t.putCode).subscribe()}changeTopPanelOfTheStack(t){Object.keys(this.stackPanelsDisplay).forEach(i=>{this.stackPanelsDisplay[i].topPanelOfTheStack=!1}),this.researchResourceStack.researchResources.forEach(i=>i.showDetails=!1),this.stackPanelsDisplay[t.putCode].topPanelOfTheStack=!0}trackByResearchResourceStack(t,i){return i.putCode}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu),e.Y36(We.y))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-research-resource-stack\"]],hostVars:2,hostBindings:function(t,i){2&t&&e.ekj(\"display-the-stack\",i.displayTheStackClass)},inputs:{isPublicRecord:\"isPublicRecord\",userRecord:\"userRecord\",researchResourceStack:\"researchResourceStack\"},decls:1,vars:2,consts:[[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"panelId\",\"research-resource-stack\",\"class\",\"top-bar\",3,\"stackSiblings\",\"editableVisibilityControl\",\"elements\",\"type\",\"ngStyle\",\"ngClass\",\"editable\",\"openState\",\"expandButtonsPosition\",\"putCode\",\"visibility\",\"isPublicRecord\",\"stackedHeader\",\"panelTitle\",4,\"ngIf\"],[\"panelId\",\"research-resource-stack\",1,\"top-bar\",3,\"stackSiblings\",\"editableVisibilityControl\",\"elements\",\"type\",\"ngStyle\",\"ngClass\",\"editable\",\"openState\",\"expandButtonsPosition\",\"putCode\",\"visibility\",\"isPublicRecord\",\"stackedHeader\",\"panelTitle\"],[\"header\",\"\",1,\"research-resources-title\"],[3,\"isPublicRecord\",\"researchResource\",4,\"ngIf\"],[3,\"isPreferred\",\"sourceName\",\"assertionOriginName\",\"assertionOriginOrcid\",\"assertionOriginClientId\",\"stackLength\",\"displayTheStack\",\"topPanelOfTheStackMode\",\"isPublicRecord\",\"type\",\"item\",\"panelTitle\",\"userRecord\",\"displayTheStackChange\",\"makePrimary\",\"topPanelOfTheStackModeChange\"],[3,\"isPublicRecord\",\"researchResource\"]],template:function(t,i){1&t&&e.YNc(0,Ls,2,1,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",null==i.researchResourceStack?null:i.researchResourceStack.researchResources)(\"ngForTrackBy\",i.trackByResearchResourceStack)},dependencies:[p.mk,p.sg,p.O5,p.PC,ae.y,Ne,ys],styles:[\"[body][_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]{width:100%}.display-the-stack[_nghost-%COMP%]{border-style:solid;border-radius:4px;border-width:2px}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){display:block;position:relative}.research-resources-title[_ngcontent-%COMP%]{margin:0}\",\".display-the-stack[_nghost-%COMP%]{border-color:#212121}app-panel-data[_ngcontent-%COMP%]{border-color:#bdbdbd!important;background-color:#fff}\"]}),_})();function Us(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",6)}const vn=function(){return[10,50,100]};function Zs(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"mat-paginator\",7),e.NdJ(\"page\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.pageEvent(i))}),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J(\"length\",n.paginationTotalAmountOfResearchResources)(\"pageSize\",n.paginationPageSize)(\"pageSizeOptions\",e.DdM(5,vn))(\"pageIndex\",n.paginationIndex)(\"disabled\",n.paginationLoading)}}function Ws(o,_){if(1&o&&e._UZ(0,\"app-research-resource-stack\",9),2&o){const n=_.$implicit,t=e.oxw(3);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"researchResourceStack\",n)}}function Fs(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Ws,1,3,\"app-research-resource-stack\",8),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J(\"ngForOf\",n.researchResources.groups)(\"ngForTrackBy\",n.trackByResearchResourceGroup)}}function Gs(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",10)(2,\"p\",11),e.SDv(3,12),e.qZA(),e.TgZ(4,\"a\",13),e.SDv(5,14),e.qZA()(),e.BQk())}function Ks(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"mat-paginator\",7),e.NdJ(\"page\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.pageEvent(i))}),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J(\"length\",n.paginationTotalAmountOfResearchResources)(\"pageSize\",n.paginationPageSize)(\"pageSizeOptions\",e.DdM(5,vn))(\"pageIndex\",n.paginationIndex)(\"disabled\",n.paginationLoading)}}function Bs(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",6)}const Qs=function(){return[\"date\",\"title\"]};function Js(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"section\",1)(1,\"app-panels\",2),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.expandedContent.RESEARCH_RESOURCE=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.sortEvent(i))}),e.YNc(2,Us,1,0,\"mat-progress-bar\",3),e.YNc(3,Zs,1,6,\"mat-paginator\",4),e.YNc(4,Fs,2,2,\"ng-container\",5),e.YNc(5,Gs,6,0,\"ng-container\",5),e.YNc(6,Ks,1,6,\"mat-paginator\",4),e.YNc(7,Bs,1,0,\"mat-progress-bar\",3),e.qZA()()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",n.regionResearchResources),e.xp6(1),e.Q6J(\"title\",n.ngOrcidResearchResources)(\"type\",\"research-resources\")(\"total\",n.researchResources.totalGroups)(\"currentAmount\",null==n.researchResources?null:n.researchResources.groups.length)(\"expandedContent\",n.expandedContent.RESEARCH_RESOURCE)(\"sortTypes\",e.DdM(15,Qs))(\"sortType\",\"date\")(\"sortDirection\",\"desc\"),e.xp6(1),e.Q6J(\"ngIf\",n.paginationLoading),e.xp6(1),e.Q6J(\"ngIf\",n.researchResources.totalGroups>n.researchResources.groups.length||n.paginationPageSize!==n.defaultPageSize),e.xp6(1),e.Q6J(\"ngIf\",n.researchResources.groups.length>0),e.xp6(1),e.Q6J(\"ngIf\",0===n.researchResources.groups.length),e.xp6(1),e.Q6J(\"ngIf\",n.researchResources.totalGroups>n.researchResources.groups.length||n.paginationPageSize!==n.defaultPageSize),e.xp6(1),e.Q6J(\"ngIf\",n.paginationLoading)}}let Xs=(()=>{var o;class _{constructor(t,i,r,a,s,l,c){this._organizationsService=i,this._record=r,this._recordResearchResourceService=a,this._user=s,this._matPaginatorIntl=l,this._announcer=c,this.defaultPageSize=I.L8,this.regionResearchResources=\"Research resources\",this.labelSortButton=\"Sort Research Resources\",this.expandedContentChange=new e.vpe,this.total=new e.vpe,this.userRecordContext={},this.displayTheStackClass=!1,this.$destroy=new w.xQ,this.detailsResearchResources=[],this.detailsOrgDisambiguated=[],this.stackPanelsDisplay={},this.panelDetailsState={},this.ngOrcidResearchResources=\"Research resources\",this.paginationLoading=!0,t.get().pipe((0,x.R)(this.$destroy)).subscribe(u=>{this.platform=u,this.isMobile=u.columns4||u.columns8})}ngOnInit(){this.getRecord()}trackByResearchResourceGroup(t,i){return i.activePutCode}getRecord(){this._record.getRecord({publicRecordId:this.isPublicRecord}).pipe((0,x.R)(this.$destroy)).subscribe(t=>{var i,r;(0,Le.isEmpty)(null==t?void 0:t.researchResources)||(this.userRecord=t,this.paginationLoading=!1,this.researchResources=t.researchResources,this.total.emit((null==(i=this.researchResources.groups)?void 0:i.length)||0),this.paginationTotalAmountOfResearchResources=t.researchResources.totalGroups,this.paginationIndex=t.researchResources.pageIndex,this.paginationPageSize=t.researchResources.pageSize,this.total.emit((null==(r=t.researchResources.groups)?void 0:r.length)||0))})}pageEvent(t){this.paginationLoading=!0,this.userRecordContext.offset=t.pageIndex*t.pageSize,this.userRecordContext.pageSize=t.pageSize,this.userRecordContext.publicRecordId=this.isPublicRecord,this.paginatorLabel=this._matPaginatorIntl.getRangeLabel(t.pageIndex,t.pageSize,t.length),this._announcer.liveAnnouncePagination(t,this.regionResearchResources),this.loadResearchResources()}sortEvent(t){this.paginationLoading=!0,this.userRecordContext.publicRecordId=this.isPublicRecord,this.userRecordContext.sort=t.type,this.userRecordContext.sortAsc=\"asc\"===t.direction,this.loadResearchResources()}loadResearchResources(){(this.researchResources.totalGroups>this.researchResources.groups.length||this.paginationPageSize!==this.defaultPageSize)&&(this.userRecordContext.forceReload=!0),this._recordResearchResourceService.changeUserRecordContext(this.userRecordContext).subscribe(()=>{this.paginationLoading=!1})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(D.tu),e.Y36(j.zT),e.Y36(H.B),e.Y36(We.y),e.Y36(j.KD),e.Y36(xn.ye),e.Y36(yn.w))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-research-resources\"]],inputs:{isPublicRecord:\"isPublicRecord\",expandedContent:\"expandedContent\"},outputs:{expandedContentChange:\"expandedContentChange\",total:\"total\"},decls:1,vars:1,consts:function(){let n,t;return n=\"Connect to trusted organizations to automatically add the specialist resources you use for your research.\",t=\"Learn more about how research resources are added to your ORCID record\",[[\"id\",\"research-resources\",\"role\",\"region\",4,\"ngIf\"],[\"id\",\"research-resources\",\"role\",\"region\"],[\"id\",\"research-resources-panel\",1,\"row\",3,\"title\",\"type\",\"total\",\"currentAmount\",\"expandedContent\",\"sortTypes\",\"sortType\",\"sortDirection\",\"expandedContentChange\",\"sort\"],[\"mode\",\"indeterminate\",4,\"ngIf\"],[3,\"length\",\"pageSize\",\"pageSizeOptions\",\"pageIndex\",\"disabled\",\"page\",4,\"ngIf\"],[4,\"ngIf\"],[\"mode\",\"indeterminate\"],[3,\"length\",\"pageSize\",\"pageSizeOptions\",\"pageIndex\",\"disabled\",\"page\"],[3,\"userRecord\",\"isPublicRecord\",\"researchResourceStack\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[3,\"userRecord\",\"isPublicRecord\",\"researchResourceStack\"],[1,\"orc-font-body-small\"],[1,\"empty\"],n,[\"href\",\"\"],t]},template:function(t,i){1&t&&e.YNc(0,Js,8,16,\"section\",0),2&t&&e.Q6J(\"ngIf\",(null==i.researchResources?null:i.researchResources.groups)&&0!==(null==i.researchResources||null==i.researchResources.groups?null:i.researchResources.groups.length))},dependencies:[p.sg,p.O5,he,Je.cl,me.eI,$s],styles:[\"[_nghost-%COMP%]{width:100%}app-research-resource-stack[_ngcontent-%COMP%]{margin-top:24px}p.empty[_ngcontent-%COMP%]{margin-bottom:0}\"]}),_})();var sn=g(54558);function Ys(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,26),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid),\" \")}}function qs(o,_){1&o&&e._UZ(0,\"br\")}const zs=function(o){return{mobile:o}};function Hs(o,_){if(1&o&&(e.ynx(0),e.YNc(1,qs,1,0,\"br\",25),e.TgZ(2,\"strong\",27),e.SDv(3,28),e.qZA(),e._uU(4),e.ALo(5,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isMobile),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(5,zs,t.isMobile)),e.xp6(2),e.hij(\": \",e.lcZ(5,3,n.createdDate),\" \")}}function Vs(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",21)(2,\"div\",6)(3,\"h2\",22),e._uU(4),e.qZA()(),e.TgZ(5,\"div\",23)(6,\"strong\"),e.SDv(7,24),e.qZA(),e._uU(8,\": \"),e.YNc(9,Ys,4,1,\"ng-container\",25),e._uU(10),e.YNc(11,Hs,6,7,\"ng-container\",25),e.qZA()(),e._UZ(12,\"mat-divider\",6),e.BQk()),2&o){const n=_.$implicit;e.xp6(4),e.hij(\" \",n.title.value,\" \"),e.xp6(5),e.Q6J(\"ngIf\",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid)),e.xp6(1),e.hij(\" \",n.sourceName||n.source,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.createdDate)}}function js(o,_){1&o&&(e.TgZ(0,\"div\",29)(1,\"mat-icon\"),e._uU(2,\"error\"),e.qZA(),e.ynx(3),e.SDv(4,30),e.BQk(),e.qZA())}const el=function(o,_){return{\"orc-font-body-small\":o,\"orc-font-small-print\":_}};let nl=(()=>{var o;class _{constructor(t,i,r,a){this.dialogRef=t,this._snackBar=i,this._platform=r,this._recordWorksService=a,this.$destroy=new w.xQ,this.loadingWorks=!1,this.putCodes=[],this.works=[]}ngOnInit(){this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.isMobile=t.columns4||t.columns8}),this.putCodes.length>0&&(this.loadingWorks=!0,this._recordWorksService.getWorksInfo(this.putCodes).subscribe(t=>{this.works=t,this.loadingWorks=!1}))}saveEvent(){this.loadingWorks=!0,this.putCodes.length>0&&this._recordWorksService.combine(this.putCodes).subscribe(t=>{var i;(null==(i=null==t?void 0:t.errors)?void 0:i.length)>0?this._snackBar.showValidationError(t.errors[0],\"Oh no! An error occurred\"):this.closeEvent(),this.loadingWorks=!1})}closeEvent(){this.dialogRef.close()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.hV),e.Y36(on.o),e.Y36(D.tu),e.Y36(z.Y))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-modal-combine-works\"]],decls:33,vars:9,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R;return n=\"Combine selected works\",t=\"Combine selected works\",i=\"Cancel\",r=\"The selected works will be grouped together and displayed as a single group item on your record. All versions of the work will still be available but one will be shown as your preferred version.\",a=\"Learn more about combining works\",s=\"Combining works cannot be undone!\",l=\"Please check the selected works are correct before combining them.\",c=\"Selected works to combine\",u=\"Source\",O=\"via\",f=\"Added\",R=\"No items selected.\",[[3,\"loading\",\"noSidebar\"],n,[\"mat-raised-button\",\"\",\"color\",\"primary\",\"id\",\"combine-button\",3,\"click\"],t,[\"mat-stroked-button\",\"\",\"color\",\"primary\",\"id\",\"cancel-button\",3,\"click\"],i,[1,\"row\"],[1,\"orc-font-small-print\"],r,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/articles/360006894774\",1,\"underline\"],a,[1,\"info\",3,\"ngClass\"],[1,\"col\"],[1,\"large-material-icon\"],[1,\"col\",\"l11\",\"m6\",\"s3\"],s,l,c,[1,\"row\",\"orcid-divider\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"no-info orc-font-body-small\",4,\"ngIf\"],[1,\"row\",\"work-info\"],[1,\"orc-font-body\"],[1,\"orc-font-body-small\"],u,[4,\"ngIf\"],O,[1,\"added\",3,\"ngClass\"],f,[1,\"no-info\",\"orc-font-body-small\"],R]},template:function(t,i){1&t&&(e.TgZ(0,\"app-modal\",0)(1,\"app-modal-header\"),e.ynx(2),e.SDv(3,1),e.BQk(),e.qZA(),e.TgZ(4,\"app-modal-footer\")(5,\"button\",2),e.NdJ(\"click\",function(){return i.saveEvent()}),e.ynx(6),e.SDv(7,3),e.BQk(),e.qZA(),e.TgZ(8,\"button\",4),e.NdJ(\"click\",function(){return i.closeEvent()}),e.SDv(9,5),e.qZA()(),e.TgZ(10,\"div\",6)(11,\"div\",7)(12,\"p\"),e.SDv(13,8),e.qZA(),e.TgZ(14,\"a\",9),e.SDv(15,10),e.qZA()()(),e.TgZ(16,\"div\",11)(17,\"div\",12)(18,\"mat-icon\",13),e._uU(19,\"info\"),e.qZA()(),e.TgZ(20,\"div\",14)(21,\"strong\"),e.SDv(22,15),e.qZA(),e.TgZ(23,\"p\"),e.SDv(24,16),e.qZA()()(),e.TgZ(25,\"div\",6)(26,\"h3\"),e.ynx(27),e.SDv(28,17),e.BQk(),e._uU(29),e.qZA(),e._UZ(30,\"mat-divider\",18),e.YNc(31,Vs,13,4,\"ng-container\",19),e.YNc(32,js,5,0,\"div\",20),e.qZA()()),2&t&&(e.Q6J(\"loading\",i.loadingWorks)(\"noSidebar\",!0),e.xp6(16),e.Q6J(\"ngClass\",e.WLB(6,el,!i.isMobile,i.isMobile)),e.xp6(13),e.hij(\" (\",i.works.length,\") \"),e.xp6(2),e.Q6J(\"ngForOf\",i.works),e.xp6(1),e.Q6J(\"ngIf\",0===i.works.length))},dependencies:[p.mk,p.sg,p.O5,y.Hw,A.eB,$.z,U.R,Y.Y,Q.d,X.r],styles:[\".info[_ngcontent-%COMP%]{padding:16px;margin-top:32px;border:solid 2px;border-radius:4px;display:flex}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.work-info[_ngcontent-%COMP%]{margin-bottom:16px}.work-info[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{margin-left:16px}.no-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}h2[_ngcontent-%COMP%]{word-break:normal;overflow-wrap:anywhere}\",\".info[_ngcontent-%COMP%]{border-color:#ff9c00!important}.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9c00!important}\"]}),_})();function tl(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,20),e.qZA(),e._uU(4,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\"\\\\n            \",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid),\"\\\\n            \")}}function ol(o,_){1&o&&e._UZ(0,\"br\")}const il=function(o){return{mobile:o}};function _l(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.YNc(2,ol,1,0,\"br\",19),e._uU(3,\"\\\\n            \"),e.TgZ(4,\"strong\",21),e.SDv(5,22),e.qZA(),e._uU(6),e.ALo(7,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw();e.xp6(2),e.Q6J(\"ngIf\",t.isMobile),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(5,il,t.isMobile)),e.xp6(2),e.hij(\":\\\\n            \",e.lcZ(7,3,n.createdDate),\"\\\\n          \")}}function rl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"div\",15),e._uU(3,\"\\\\n        \"),e.TgZ(4,\"div\",6),e._uU(5,\"\\\\n          \"),e.TgZ(6,\"h2\",16),e._uU(7),e.qZA(),e._uU(8,\"\\\\n        \"),e.qZA(),e._uU(9,\"\\\\n        \"),e.TgZ(10,\"div\",17),e._uU(11,\"\\\\n          \"),e.TgZ(12,\"strong\"),e.SDv(13,18),e.qZA(),e._uU(14,\":\\\\n          \"),e.YNc(15,tl,5,1,\"ng-container\",19),e._uU(16),e.YNc(17,_l,8,7,\"ng-container\",19),e._uU(18,\"\\\\n        \"),e.qZA(),e._uU(19,\"\\\\n      \"),e.qZA(),e._uU(20,\"\\\\n      \"),e._UZ(21,\"mat-divider\",6),e._uU(22,\"\\\\n    \"),e.BQk()),2&o){const n=_.$implicit;e.xp6(7),e.hij(\"\\\\n            \",n.title.value,\"\\\\n          \"),e.xp6(8),e.Q6J(\"ngIf\",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid)),e.xp6(1),e.hij(\"\\\\n          \",n.sourceName||n.source,\"\\\\n          \"),e.xp6(1),e.Q6J(\"ngIf\",n.createdDate)}}function al(o,_){1&o&&(e.TgZ(0,\"div\",23),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"mat-icon\"),e._uU(3,\"error\"),e.qZA(),e._uU(4,\"\\\\n      \"),e.ynx(5),e.SDv(6,24),e.BQk(),e._uU(7,\"\\\\n    \"),e.qZA())}let Dn=(()=>{var o;class _{constructor(t,i,r,a,s){this.elementRef=t,this.dialogRef=i,this._platform=r,this._recordWorksService=a,this.window=s,this.$destroy=new w.xQ,this.loadingWorks=!1,this.putCodes=[],this.works=[],this.workGroups=[]}ngOnInit(){var t;this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(i=>{this.isMobile=i.columns4||i.columns8}),this.loadingWorks=!0,this.selectedAll?(this.workGroups.forEach(i=>{i.works.forEach(r=>{i.defaultPutCode.toString()===r.putCode.value&&this.works.push(r)})}),this.loadingWorks=!1):(null==(t=this.putCodes)?void 0:t.length)>0?this._recordWorksService.getWorksInfo(this.putCodes).subscribe(i=>{this.works=i,this.loadingWorks=!1}):this.loadingWorks=!1}saveEvent(){var t;this.selectedAll?(this.loadingWorks=!0,this._recordWorksService.export().subscribe(i=>{this.createTxtFile(i),this.closeEvent()})):(null==(t=this.putCodes)?void 0:t.length)>0&&(this.loadingWorks=!0,this._recordWorksService.exportSelected(this.putCodes).subscribe(i=>{this.createTxtFile(i),this.closeEvent()}))}createTxtFile(t){var i;if(null!=(i=this.window.navigator)&&i.msSaveOrOpenBlob){const a=new Blob([t],{type:\"text/plain\"});this.window.navigator.msSaveOrOpenBlob(a,\"works.bib\")}else{const r=document.createElement(\"a\");r.setAttribute(\"css\",\"{display: \\'none\\'}\"),this.elementRef.nativeElement.append(r),r.setAttribute(\"href\",\"data:text/x-bibtex;charset=utf-8,\"+encodeURIComponent(t)),r.setAttribute(\"target\",\"_self\"),r.setAttribute(\"download\",\"works.bib\"),r.click(),r.remove(),this.loadingWorks=!1}}closeEvent(){this.dialogRef.close()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(J.hV),e.Y36(D.tu),e.Y36(z.Y),e.Y36(ie.m9))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-modal-export-works\"]],decls:48,vars:5,consts:function(){let n,t,i,r,a,s,l,c,u,O;return n=\"Export selected works\",t=\"Export selected works to BibTeX\",i=\"Cancel\",r=\"Export selected works to a BibTeX file. Please note that exporting to BibTeX may cause problems for text in some languages.\",a=\"Find out more on exporting BibTeX files\",s=\"Selected works to export\",l=\"Source\",c=\"via\",u=\"Added\",O=\"No items selected.\",[[3,\"loading\",\"noSidebar\"],n,[\"mat-raised-button\",\"\",\"color\",\"primary\",\"id\",\"export-button\",3,\"click\"],t,[\"mat-stroked-button\",\"\",\"color\",\"primary\",\"id\",\"cancel-button\",3,\"click\"],i,[1,\"row\"],[1,\"col\",\"orc-font-small-print\"],r,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006971453\",1,\"underline\"],a,s,[1,\"row\",\"orcid-divider\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"no-info orc-font-body-small\",4,\"ngIf\"],[1,\"row\",\"work-info\"],[1,\"orc-font-body\"],[1,\"orc-font-body-small\"],l,[4,\"ngIf\"],c,[1,\"added\",3,\"ngClass\"],u,[1,\"no-info\",\"orc-font-body-small\"],O]},template:function(t,i){1&t&&(e.TgZ(0,\"app-modal\",0),e._uU(1,\"\\\\n  \"),e.TgZ(2,\"app-modal-header\"),e._uU(3,\"\\\\n    \"),e.ynx(4),e.SDv(5,1),e.BQk(),e._uU(6,\"\\\\n  \"),e.qZA(),e._uU(7,\"\\\\n  \"),e.TgZ(8,\"app-modal-footer\"),e._uU(9,\"\\\\n    \"),e.TgZ(10,\"button\",2),e.NdJ(\"click\",function(){return i.saveEvent()}),e._uU(11,\"\\\\n      \"),e.ynx(12),e.SDv(13,3),e.BQk(),e._uU(14,\"\\\\n    \"),e.qZA(),e._uU(15,\"\\\\n    \"),e.TgZ(16,\"button\",4),e.NdJ(\"click\",function(){return i.closeEvent()}),e.SDv(17,5),e.qZA(),e._uU(18,\"\\\\n  \"),e.qZA(),e._uU(19,\"\\\\n  \"),e.TgZ(20,\"div\",6),e._uU(21,\"\\\\n    \"),e.TgZ(22,\"div\",7),e._uU(23,\"\\\\n      \"),e.TgZ(24,\"p\"),e.SDv(25,8),e.qZA(),e._uU(26,\"\\\\n      \"),e.TgZ(27,\"a\",9),e.SDv(28,10),e.qZA(),e._uU(29,\"\\\\n    \"),e.qZA(),e._uU(30,\"\\\\n  \"),e.qZA(),e._uU(31,\"\\\\n  \"),e.TgZ(32,\"div\",6),e._uU(33,\"\\\\n    \"),e.TgZ(34,\"h3\"),e._uU(35,\"\\\\n      \"),e.ynx(36),e.SDv(37,11),e.BQk(),e._uU(38),e.qZA(),e._uU(39,\"\\\\n    \"),e._UZ(40,\"mat-divider\",12),e._uU(41,\"\\\\n    \"),e.YNc(42,rl,23,4,\"ng-container\",13),e._uU(43,\"\\\\n    \"),e.YNc(44,al,8,0,\"div\",14),e._uU(45,\"\\\\n  \"),e.qZA(),e._uU(46,\"\\\\n\"),e.qZA(),e._uU(47,\"\\\\n\")),2&t&&(e.Q6J(\"loading\",i.loadingWorks)(\"noSidebar\",!0),e.xp6(38),e.hij(\"\\\\n      (\",i.selectedAll?i.totalWorks:i.works.length,\")\\\\n    \"),e.xp6(4),e.Q6J(\"ngForOf\",i.works),e.xp6(2),e.Q6J(\"ngIf\",!i.selectedAll&&0===(null==i.putCodes?null:i.putCodes.length)))},dependencies:[p.mk,p.sg,p.O5,y.Hw,A.eB,$.z,U.R,Y.Y,Q.d,X.r],styles:[\"app-modal[_ngcontent-%COMP%]     .content-wrapper{padding-bottom:20px!important}.affiliation-info[_ngcontent-%COMP%]{margin-bottom:16px}.affiliation-info[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{margin-inline-end:16px}.no-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}h2[_ngcontent-%COMP%]{word-break:normal;overflow-wrap:anywhere}\"]}),_})();var ue=g(88508);const sl={PUBLIC:\"Everyone\",LIMITED:\"Trusted parties\",PRIVATE:\"Only me\"};let ge=(()=>{var o;class _{transform(t){return sl[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"visibilityStringLabel\",type:o,pure:!0}),_})();function ll(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,19),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid),\" \")}}function cl(o,_){1&o&&e._UZ(0,\"br\")}const dl=function(o){return{mobile:o}};function pl(o,_){if(1&o&&(e.ynx(0),e.YNc(1,cl,1,0,\"br\",18),e.TgZ(2,\"strong\",20),e.SDv(3,21),e.qZA(),e._uU(4),e.ALo(5,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isMobile),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(5,dl,t.isMobile)),e.xp6(2),e.hij(\": \",e.lcZ(5,3,n.createdDate),\" \")}}function ul(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",15)(2,\"div\",8)(3,\"h2\",16),e._uU(4),e.qZA()(),e.TgZ(5,\"div\",7)(6,\"strong\"),e.SDv(7,17),e.qZA(),e._uU(8,\": \"),e.YNc(9,ll,4,1,\"ng-container\",18),e._uU(10),e.YNc(11,pl,6,7,\"ng-container\",18),e.qZA()(),e._UZ(12,\"mat-divider\",8),e.BQk()),2&o){const n=_.$implicit;e.xp6(4),e.hij(\" \",n.title.value,\" \"),e.xp6(5),e.Q6J(\"ngIf\",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid)),e.xp6(1),e.hij(\" \",n.sourceName||n.source,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.createdDate)}}function gl(o,_){1&o&&(e.TgZ(0,\"div\",22)(1,\"mat-icon\"),e._uU(2,\"error\"),e.qZA(),e.ynx(3),e.SDv(4,23),e.BQk(),e.qZA())}let fl=(()=>{var o;class _{constructor(t,i,r,a){this.dialogRef=t,this._platform=i,this._recordWorksService=r,this._record=a,this.$destroy=new w.xQ,this.loadingWorks=!1,this.putCodes=[],this.works=[],this.ngOrcidDefaultVisibilityLabel=\"Control who can see this information by setting the visibility. Your default visibility is\",this.ariaLabelWork=\"Works\"}ngOnInit(){this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(t=>{this.isMobile=t.columns4||t.columns8}),this.worksForm=new d.nJ({visibility:new d.p4(this.defaultVisibility,{validators:[d.kI.required]})}),this._record.getPreferences().subscribe(t=>{this.defaultVisibility=t.default_visibility,this.worksForm.patchValue({visibility:this.defaultVisibility})}),this.putCodes.length>0&&this._recordWorksService.getWorksInfo(this.putCodes).subscribe(t=>{this.works=t,this.loadingWorks=!1})}saveEvent(){this.loadingWorks=!0,this._recordWorksService.visibility(this.putCodes,this.worksForm.get(\"visibility\").value).subscribe(()=>{this.loadingWorks=!1,this.closeEvent()})}closeEvent(){this.dialogRef.close()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.hV),e.Y36(D.tu),e.Y36(z.Y),e.Y36(H.B))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-works-visibility-modal\"]],decls:27,vars:12,consts:function(){let n,t,i,r,a,s,l,c;return n=\"Set visibility selected works\",t=\"Save changes\",i=\"Cancel\",r=\"Selected works to set visibility\",a=\"Source\",s=\"via\",l=\"Added\",c=\"No items selected.\",[[3,\"loading\",\"noSidebar\"],n,[\"mat-raised-button\",\"\",\"color\",\"primary\",\"id\",\"save-names-button\",3,\"click\"],t,[\"mat-stroked-button\",\"\",\"color\",\"primary\",\"id\",\"cancel-names-button\",3,\"click\"],i,[3,\"formGroup\"],[1,\"orc-font-body-small\"],[1,\"row\"],[1,\"col\",\"no-wrap\",\"actions-wrapper\",\"no-gutters\"],[\"formControlName\",\"visibility\",3,\"multiEdit\",\"itemTitle\"],r,[1,\"row\",\"orcid-divider\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"no-info orc-font-body-small\",4,\"ngIf\"],[1,\"row\",\"work-info\"],[1,\"orc-font-body\"],a,[4,\"ngIf\"],s,[1,\"added\",3,\"ngClass\"],l,[1,\"no-info\",\"orc-font-body-small\"],c]},template:function(t,i){1&t&&(e.TgZ(0,\"app-modal\",0)(1,\"app-modal-header\"),e.ynx(2),e.SDv(3,1),e.BQk(),e.qZA(),e.TgZ(4,\"app-modal-footer\")(5,\"button\",2),e.NdJ(\"click\",function(){return i.saveEvent()}),e.SDv(6,3),e.qZA(),e.TgZ(7,\"button\",4),e.NdJ(\"click\",function(){return i.closeEvent()}),e.SDv(8,5),e.qZA()(),e.TgZ(9,\"form\",6)(10,\"p\",7),e._uU(11),e.TgZ(12,\"strong\"),e._uU(13),e.ALo(14,\"visibilityStringLabel\"),e.qZA(),e._uU(15,\". \"),e.qZA(),e.TgZ(16,\"div\",8)(17,\"div\",9),e._UZ(18,\"app-visibility-selector\",10),e.qZA()(),e.TgZ(19,\"div\",8)(20,\"h3\"),e.ynx(21),e.SDv(22,11),e.BQk(),e._uU(23),e.qZA(),e._UZ(24,\"mat-divider\",12),e.YNc(25,ul,13,4,\"ng-container\",13),e.YNc(26,gl,5,0,\"div\",14),e.qZA()()()),2&t&&(e.Q6J(\"loading\",i.loadingWorks)(\"noSidebar\",!0),e.xp6(9),e.Q6J(\"formGroup\",i.worksForm),e.xp6(2),e.hij(\" \",i.ngOrcidDefaultVisibilityLabel,\" \"),e.xp6(2),e.Oqu(e.lcZ(14,10,i.defaultVisibility)),e.xp6(5),e.Q6J(\"multiEdit\",\"selected\")(\"itemTitle\",i.ariaLabelWork),e.xp6(5),e.hij(\" (\",i.works.length,\") \"),e.xp6(2),e.Q6J(\"ngForOf\",i.works),e.xp6(1),e.Q6J(\"ngIf\",0===i.works.length))},dependencies:[p.mk,p.sg,p.O5,d._Y,d.JJ,d.JL,d.sg,d.u,y.Hw,A.eB,$.z,U.R,Y.Y,ue.B,Q.d,X.r,ge],styles:[\".work-info[_ngcontent-%COMP%]{margin-bottom:16px}.work-info[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{margin-left:16px}.no-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}h2[_ngcontent-%COMP%]{word-break:normal;overflow-wrap:anywhere}\"]}),_})();var ln=g(67022),wn=g(50714),cn=g(77504);function Ol(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.TgZ(2,\"i\"),e.SDv(3,33),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid),\" \")}}function Cl(o,_){1&o&&e._UZ(0,\"br\")}const Rl=function(o){return{mobile:o}};function Tl(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Cl,1,0,\"br\",32),e.TgZ(2,\"strong\",34),e.SDv(3,35),e.qZA(),e._uU(4),e.ALo(5,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(3);e.xp6(1),e.Q6J(\"ngIf\",t.isMobile),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(5,Rl,t.isMobile)),e.xp6(2),e.hij(\": \",e.lcZ(5,3,n.createdDate),\" \")}}function ml(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",28)(2,\"div\",6)(3,\"h2\",29),e._uU(4),e.qZA()(),e.TgZ(5,\"div\",30)(6,\"strong\"),e.SDv(7,31),e.qZA(),e._uU(8,\": \"),e.YNc(9,Ol,4,1,\"ng-container\",32),e._uU(10),e.YNc(11,Tl,6,7,\"ng-container\",32),e.qZA()(),e._UZ(12,\"mat-divider\",6),e.BQk()),2&o){const n=_.$implicit;e.xp6(4),e.hij(\" \",n.title.value,\" \"),e.xp6(5),e.Q6J(\"ngIf\",(null==n?null:n.assertionOriginName)||(null==n?null:n.assertionOriginOrcid)),e.xp6(1),e.hij(\" \",n.sourceName||n.source,\" \"),e.xp6(1),e.Q6J(\"ngIf\",n.createdDate)}}function El(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",25),e._UZ(2,\"mat-checkbox\",26),e.TgZ(3,\"div\",27),e.YNc(4,ml,13,4,\"ng-container\",23),e.qZA()(),e.BQk()),2&o){const n=_.$implicit;e.xp6(2),e.Q6J(\"formControlName\",n.putCodes),e.xp6(2),e.Q6J(\"ngForOf\",n.works)}}function Sl(o,_){1&o&&(e.TgZ(0,\"div\",36)(1,\"mat-icon\"),e._uU(2,\"error\"),e.qZA(),e.ynx(3),e.SDv(4,37),e.BQk(),e.qZA())}function hl(o,_){if(1&o&&(e.TgZ(0,\"div\",20)(1,\"h3\"),e.ynx(2),e.SDv(3,21),e.BQk(),e._uU(4),e.qZA(),e._UZ(5,\"mat-divider\",22),e.YNc(6,El,5,2,\"ng-container\",23),e.YNc(7,Sl,5,0,\"div\",24),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"formGroup\",n.form),e.xp6(4),e.hij(\" (\",null==n.selectSetOfWorksToCombine?null:n.selectSetOfWorksToCombine.length,\") \"),e.xp6(2),e.Q6J(\"ngForOf\",n.suggestionsWorks),e.xp6(1),e.Q6J(\"ngIf\",0===(null==n.suggestions?null:n.suggestions.length))}}const Nl=function(o,_){return{\"orc-font-body-small\":o,\"orc-font-small-print\":_}};let Ml=(()=>{var o;class _{constructor(t,i,r,a,s){this._fb=t,this.dialogRef=i,this._platform=r,this._recordWorksService=a,this.data=s,this.$destroy=new w.xQ,this.loadingWorks=!1,this.putCodes=[],this.selectSetOfWorksToCombine=[]}ngOnInit(){var i;this._platform.get().pipe((0,x.R)(this.$destroy)).subscribe(r=>{this.isMobile=r.columns4||r.columns8}),this.suggestions=this.data.suggestions,this.loadingWorks=!0;const t=null==(i=this.suggestions)?void 0:i.map(r=>{const a=r.putCodes.map(s=>this._recordWorksService.getWorkInfo(s+\"\"));return(0,cn.D)(a).pipe((0,we.U)(s=>({works:s,putCodes:r.putCodesAsString})))});t&&(0,cn.D)(t).subscribe(r=>{this.suggestionsWorks=r;const a={};r.forEach(s=>{a[s.putCodes]=[!1]}),this.form=this._fb.group(a),this.form.valueChanges.subscribe(()=>{this.getSetOkWorkToCombine()}),this.loadingWorks=!1})}saveEvent(){if(this.getSetOkWorkToCombine(),this.selectSetOfWorksToCombine.length){const t=this.selectSetOfWorksToCombine.map(i=>this._recordWorksService.combinePutCodes(i));return this.loadingWorks=!0,(0,cn.D)(t).subscribe(()=>{this.loadingWorks=!1,this.closeEvent()})}this.closeEvent()}getSetOkWorkToCombine(){this.selectSetOfWorksToCombine=Object.keys(this.form.value).filter(t=>this.form.value[t])}closeEvent(){this.dialogRef.close()}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(d.QS),e.Y36(J.hV),e.Y36(D.tu),e.Y36(z.Y),e.Y36(J.eJ))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-modal-combine-works-with-selector\"]],decls:32,vars:9,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E;return n=\"Combine selected works\",t=\"Combine selected works\",i=\"Cancel\",r=\"ORCID have found\",a=\"sets of works with similar titles that you may want to combine.\",s=\"The selected works will be grouped together and displayed as a single group item on your record. All versions of the work will still be available but one will be shown as your preferred version\",l=\"Learn more about combining works\",c=\"Combining works cannot be undone!\",u=\"Please check the selected works are correct before combining them.\",O=\"Selected works to combine\",f=\"Source\",R=\"via\",T=\"Added\",E=\"No items selected.\",[[3,\"loading\",\"noSidebar\"],n,[\"mat-raised-button\",\"\",\"color\",\"primary\",\"id\",\"combine-button\",3,\"disabled\",\"click\"],t,[\"mat-stroked-button\",\"\",\"color\",\"primary\",\"id\",\"cancel-button\",3,\"click\"],i,[1,\"row\"],[1,\"orc-font-small-print\"],r,a,s,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/articles/360006894774\",1,\"underline\"],l,[1,\"info\",3,\"ngClass\"],[1,\"col\"],[1,\"large-material-icon\"],[1,\"col\",\"l11\",\"m6\",\"s3\"],c,u,[\"class\",\"row\",3,\"formGroup\",4,\"ngIf\"],[1,\"row\",3,\"formGroup\"],O,[1,\"row\",\"orcid-divider\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"no-info orc-font-body-small\",4,\"ngIf\"],[1,\"list-works-group\"],[3,\"formControlName\"],[1,\"list-works\"],[1,\"row\",\"work-info\"],[1,\"orc-font-body\"],[1,\"orc-font-body-small\"],f,[4,\"ngIf\"],R,[1,\"added\",3,\"ngClass\"],T,[1,\"no-info\",\"orc-font-body-small\"],E]},template:function(t,i){1&t&&(e.TgZ(0,\"app-modal\",0)(1,\"app-modal-header\"),e.ynx(2),e.SDv(3,1),e.BQk(),e.qZA(),e.TgZ(4,\"app-modal-footer\")(5,\"button\",2),e.NdJ(\"click\",function(){return i.saveEvent()}),e.ynx(6),e.SDv(7,3),e.BQk(),e.qZA(),e.TgZ(8,\"button\",4),e.NdJ(\"click\",function(){return i.closeEvent()}),e.SDv(9,5),e.qZA()(),e.TgZ(10,\"div\",6)(11,\"div\",7)(12,\"p\"),e.ynx(13),e.SDv(14,8),e.BQk(),e._uU(15),e.ynx(16),e.SDv(17,9),e.BQk(),e.qZA(),e.TgZ(18,\"p\"),e.SDv(19,10),e.qZA(),e.TgZ(20,\"a\",11),e.SDv(21,12),e.qZA()()(),e.TgZ(22,\"div\",13)(23,\"div\",14)(24,\"mat-icon\",15),e._uU(25,\"info\"),e.qZA()(),e.TgZ(26,\"div\",16)(27,\"strong\"),e.SDv(28,17),e.qZA(),e.TgZ(29,\"p\"),e.SDv(30,18),e.qZA()()(),e.YNc(31,hl,8,4,\"div\",19),e.qZA()),2&t&&(e.Q6J(\"loading\",i.loadingWorks)(\"noSidebar\",!0),e.xp6(5),e.Q6J(\"disabled\",0===(null==i.selectSetOfWorksToCombine?null:i.selectSetOfWorksToCombine.length)),e.xp6(10),e.hij(\" \",null==i.suggestionsWorks?null:i.suggestionsWorks.length,\" \"),e.xp6(7),e.Q6J(\"ngClass\",e.WLB(6,Nl,!i.isMobile,i.isMobile)),e.xp6(9),e.Q6J(\"ngIf\",i.form))},dependencies:[p.mk,p.sg,p.O5,d.JJ,d.JL,d.sg,d.u,y.Hw,A.eB,$.z,U.R,Y.Y,Q.d,oe.FC,X.r],styles:[\".info[_ngcontent-%COMP%]{padding:16px;margin-top:32px;border:solid 2px;border-radius:4px;display:flex}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.work-info[_ngcontent-%COMP%]{margin-bottom:16px}.work-info[_ngcontent-%COMP%]   .added[_ngcontent-%COMP%]{margin-left:16px}.no-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}.list-works-group[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%}.list-works-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding-inline-end:16px;padding-top:16px}.list-works[_ngcontent-%COMP%]{display:flex;flex-direction:column}h2[_ngcontent-%COMP%]{word-break:normal;overflow-wrap:anywhere}\",\".info[_ngcontent-%COMP%]{border-color:#ff9c00!important}.info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9c00!important}\"]}),_})(),Pl=(()=>{var o;class _{transform(t){const i=g(25726);return i.toBibtex(i.toJSON(t),!1).trim()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"formatBibtex\",type:o,pure:!0}),_})(),dn=(()=>{var o;class _{transform(t){return m.P9[m.Ns.conference][t]||m.P9[m.Ns.intellectual_property][t]||m.P9[m.Ns.other_output][t]||m.P9[m.Ns.publication][t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordWorkTypeLabel\",type:o,pure:!0}),_})(),bl=(()=>{var o;class _{transform(t,i,r){var s;let a=null;return(null==t?void 0:t.length)>0&&(null==(s=t.find(l=>{var c,u;return i?(null==(c=null==l?void 0:l.contributorOrcid)?void 0:c.path)===i:(null==(u=null==l?void 0:l.contributorOrcid)?void 0:u.path)===r}))||s.rolesAndSequences.forEach(l=>{var c,u;if(null!=l&&l.contributorRole){let O=null==(u=this.getContributionRoleByKey(null==(c=null==l?void 0:l.contributorRole)?void 0:c.toLowerCase()))?void 0:u.translation;a=a?`${a}, ${O}`:O}})),a}getContributionRoleByKey(t){return m.tM.find(i=>i.key===t)||m.YM.find(i=>i.key===t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordHolderRoles\",type:o,pure:!0}),_})();function Al(o,_){if(1&o&&(e.TgZ(0,\"div\",2),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(\"\\\\n      \",n.work.journalTitle.value,\"\\\\n    \")}}function Il(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"monthDayYearDateToString\"),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.hij(\"\",e.lcZ(2,1,n.work.publicationDate),\"\\\\n        |\\\\n      \")}}function xl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          |\\\\n          \"),e.TgZ(2,\"span\",8),e._uU(3),e.qZA(),e._uU(4,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw().ngIf;e.xp6(3),e.Oqu(n)}}function yl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.YNc(2,xl,5,1,\"ng-container\",3),e._uU(3,\"\\\\n      \"),e.BQk()),2&o){const n=_.ngIf;e.xp6(2),e.Q6J(\"ngIf\",n)}}function kl(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(),t=n.$implicit,i=n.last;e.xp6(1),e.hij(\"\\\\n          \",(null==t||null==t.creditName?null:t.creditName.content)+(i?\"\":\"; \"),\"\\\\n        \")}}function vl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"a\",12),e._uU(3),e.qZA(),e._uU(4),e.BQk()),2&o){const n=e.oxw(2),t=n.$implicit,i=n.last;e.xp6(2),e.s9C(\"href\",null==t||null==t.contributorOrcid?null:t.contributorOrcid.uri,e.LSH),e.xp6(1),e.Oqu(null==t||null==t.contributorOrcid?null:t.contributorOrcid.path),e.xp6(1),e.hij(\"\",i?\"\":\"; \",\"\\\\n          \")}}function Dl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.YNc(2,vl,5,3,\"ng-container\",3),e._uU(3,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(2),e.Q6J(\"ngIf\",null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri)}}function wl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.YNc(2,kl,2,1,\"ng-container\",3),e._uU(3,\"\\\\n        \"),e.YNc(4,Dl,4,1,\"ng-container\",3),e._uU(5,\"\\\\n      \"),e.BQk()),2&o){const n=_.$implicit,t=e.oxw(2);e.xp6(2),e.Q6J(\"ngIf\",(null==n?null:n.creditName)&&(null==n||null==n.creditName?null:n.creditName.content)!==t.privateName),e.xp6(2),e.Q6J(\"ngIf\",(!(null!=n&&n.creditName)||(null==n||null==n.creditName?null:n.creditName.content)===t.privateName)&&(null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri))}}function Ll(o,_){1&o&&(e.TgZ(0,\"span\"),e.SDv(1,13),e.qZA())}function $l(o,_){if(1&o&&(e.TgZ(0,\"div\",2),e._uU(1,\"\\\\n      \"),e.TgZ(2,\"span\",9),e.SDv(3,10),e.qZA(),e._uU(4,\":\\\\n      \"),e.YNc(5,wl,6,2,\"ng-container\",11),e.ALo(6,\"slice\"),e._uU(7,\"\\\\n      \"),e.YNc(8,Ll,2,0,\"span\",3),e._uU(9,\"\\\\n    \"),e.qZA()),2&o){const n=e.oxw();e.xp6(5),e.Q6J(\"ngForOf\",e.Dn7(6,2,null==n.work?null:n.work.contributorsGroupedByOrcid,0,n.maxNumberContributors)),e.xp6(3),e.Q6J(\"ngIf\",(null==n.work?null:n.work.numberOfContributors)>n.maxNumberContributors)}}function Ul(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",14),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.work))}),e.SDv(1,15),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"work\",\"show\",null==n.work||null==n.work.title?null:n.work.title.value))}}function Zl(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",14),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.toggleDetails.next(i.work))}),e.SDv(1,16),e.ALo(2,\"appPanelActivityActionAriaLabel\"),e.qZA()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",e.Dn7(2,1,\"work\",\"hide\",null==n.work||null==n.work.title?null:n.work.title.value))}}function Wl(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"\\\\n        (\",n.getLanguageKey(n.work.translatedTitle.languageCode),\")\\\\n      \")}}function Fl(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"div\",20),e._uU(3,\"\\\\n      \"),e.TgZ(4,\"span\",21),e._uU(5,\"\\\\n        \"),e.ynx(6),e.SDv(7,22),e.BQk(),e._uU(8,\"\\\\xa0\"),e.qZA(),e.YNc(9,Wl,2,1,\"ng-container\",3),e._uU(10,\"\\\\n    \"),e.qZA(),e._uU(11,\"\\\\n\\\\n    \"),e.TgZ(12,\"div\"),e._uU(13),e.qZA(),e._uU(14,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(9),e.Q6J(\"ngIf\",null==n.work||null==n.work.translatedTitle?null:n.work.translatedTitle.languageCode),e.xp6(4),e.hij(\"\\\\n      \",n.work.translatedTitle.content,\"\\\\n    \")}}function Gl(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e._uU(3,\"\\\\n      \"),e.ynx(4),e.SDv(5,23),e.BQk(),e._uU(6,\"\\\\n    \"),e.qZA(),e._uU(7,\"\\\\n\\\\n    \"),e.TgZ(8,\"div\"),e._uU(9),e.qZA(),e._uU(10,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(9),e.hij(\"\\\\n      \",n.getLanguageKey(null==n.work?null:n.work.languageCode.value),\"\\\\n    \")}}function Kl(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e._uU(3,\"\\\\n      \"),e.ynx(4),e.SDv(5,24),e.BQk(),e._uU(6,\"\\\\n    \"),e.qZA(),e._uU(7,\"\\\\n\\\\n    \"),e.TgZ(8,\"div\"),e._uU(9),e.qZA(),e._uU(10,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(9),e.hij(\"\\\\n      \",null==n.work?null:n.work.subtitle.value,\"\\\\n    \")}}function Bl(o,_){if(1&o&&(e.TgZ(0,\"a\",27),e._uU(1),e.qZA()),2&o){const n=e.oxw(3);e.s9C(\"href\",null==n.work?null:n.work.url.value,e.LSH),e.xp6(1),e.hij(\"\\\\n        \",n.work.url.value,\"\\\\n      \")}}function Ql(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"\\\\n        \",n.work.url.value,\"\\\\n      \")}}function Jl(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e.SDv(3,25),e.qZA(),e._uU(4,\"\\\\n\\\\n    \"),e.TgZ(5,\"div\"),e._uU(6,\"\\\\n      \"),e.YNc(7,Bl,2,2,\"a\",26),e.ALo(8,\"isUrl\"),e._uU(9,\"\\\\n\\\\n      \"),e.YNc(10,Ql,2,1,\"ng-container\",3),e.ALo(11,\"isUrl\"),e._uU(12,\"\\\\n    \"),e.qZA(),e._uU(13,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(7),e.Q6J(\"ngIf\",e.lcZ(8,2,null==n.work?null:n.work.url.value)),e.xp6(3),e.Q6J(\"ngIf\",!e.lcZ(11,4,null==n.work?null:n.work.url.value))}}function Xl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.TgZ(2,\"p\"),e._uU(3,\"\\\\n          \"),e.TgZ(4,\"span\"),e.SDv(5,30),e.qZA(),e._uU(6,\"\\\\n          \"),e.TgZ(7,\"b\"),e._uU(8),e.qZA(),e._uU(9,\"\\\\n          \"),e.TgZ(10,\"span\",31),e.SDv(11,32),e.qZA(),e._uU(12,\"\\\\n        \"),e.qZA(),e._uU(13,\"\\\\n        \"),e.TgZ(14,\"p\"),e._uU(15,\"----\"),e.qZA(),e._uU(16,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(8),e.Oqu(n.maxNumberContributorsWorkDetails)}}function Yl(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(3).$implicit;e.xp6(1),e.hij(\"\\\\n              \",n.creditName.content,\"\\\\n            \")}}function ql(o,_){if(1&o&&e._uU(0),2&o){const n=e.oxw(6);e.Oqu(n.privateNameTranslation)}}function zl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.YNc(2,Yl,2,1,\"ng-container\",34),e._uU(3,\"\\\\n            \"),e.YNc(4,ql,1,1,\"ng-template\",null,35,e.W1O),e._uU(6,\"\\\\n          \"),e.BQk()),2&o){const n=e.MAs(5),t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(2),e.Q6J(\"ngIf\",(null==t||null==t.creditName?null:t.creditName.content)!==i.privateName)(\"ngIfElse\",n)}}function Hl(o,_){1&o&&(e.TgZ(0,\"span\"),e._uU(1,\" (\"),e.qZA())}function Vl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.YNc(2,Hl,2,0,\"span\",3),e.ALo(3,\"contributorsPipe\"),e.TgZ(4,\"a\",12),e._uU(5),e.qZA(),e._uU(6,\")\\\\n          \"),e.BQk()),2&o){const n=e.oxw(2).$implicit;e.xp6(2),e.Q6J(\"ngIf\",!e.lcZ(3,3,n)),e.xp6(2),e.s9C(\"href\",null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri,e.LSH),e.xp6(1),e.Oqu(null==n||null==n.contributorOrcid?null:n.contributorOrcid.path)}}function jl(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.YNc(2,zl,7,2,\"ng-container\",3),e._uU(3),e.ALo(4,\"contributorsPipe\"),e.YNc(5,Vl,7,5,\"ng-container\",3),e._uU(6,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(2),e.Q6J(\"ngIf\",null==n||null==n.creditName?null:n.creditName.content),e.xp6(1),e.hij(\"\\\\n          \",e.lcZ(4,3,n),\"\\\\n          \"),e.xp6(2),e.Q6J(\"ngIf\",null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri)}}const ec=function(o){return{\"record-holder\":o}};function nc(o,_){if(1&o&&(e.TgZ(0,\"p\",33),e._uU(1,\"\\\\n        \"),e.YNc(2,jl,7,5,\"ng-container\",3),e._uU(3,\"\\\\n      \"),e.qZA()),2&o){const n=_.$implicit,t=_.index,i=e.oxw(3);e.Q6J(\"ngClass\",e.VKq(2,ec,(null==n||null==n.contributorOrcid?null:n.contributorOrcid.path)===i.id)),e.xp6(2),e.Q6J(\"ngIf\",t<i.maxNumberContributorsWorkDetails)}}function tc(o,_){1&o&&(e.TgZ(0,\"span\"),e.SDv(1,39),e.qZA())}function oc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",14),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.exportWork(i.work))}),e.SDv(1,40),e.qZA()}}function ic(o,_){1&o&&(e.ynx(0),e.SDv(1,41),e.BQk())}function _c(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n        \"),e.YNc(2,tc,2,0,\"span\",3),e._uU(3,\"\\\\n        \"),e.TgZ(4,\"p\"),e._uU(5,\"----\"),e.qZA(),e._uU(6,\"\\\\n        \"),e.TgZ(7,\"p\"),e._uU(8,\"\\\\n          \"),e.ynx(9),e.SDv(10,36),e.BQk(),e._uU(11,\"\\\\n          \"),e.YNc(12,oc,2,0,\"a\",6),e._uU(13,\"\\\\n          \"),e.YNc(14,ic,2,0,\"ng-container\",3),e._uU(15,\"\\\\n          \"),e.TgZ(16,\"a\",37),e.SDv(17,38),e.qZA(),e._uU(18,\"\\\\n        \"),e.qZA(),e._uU(19,\"\\\\n      \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(2),e.Q6J(\"ngIf\",(null==n.work?null:n.work.numberOfContributors)>n.maxNumberContributors),e.xp6(10),e.Q6J(\"ngIf\",!n.isPublicRecord),e.xp6(2),e.Q6J(\"ngIf\",!n.isPublicRecord&&((null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].normalizedUrl?null:n.work.workExternalIdentifiers[0].normalizedUrl.value)||(null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].url?null:n.work.workExternalIdentifiers[0].url.value))),e.xp6(2),e.s9C(\"href\",(null==n.work||null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].normalizedUrl?null:n.work.workExternalIdentifiers[0].normalizedUrl.value)||(null==n.work||null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].url?null:n.work.workExternalIdentifiers[0].url.value),e.LSH)}}function rc(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e.SDv(3,28),e.qZA(),e._uU(4,\"\\\\n\\\\n    \"),e.TgZ(5,\"div\"),e._uU(6,\"\\\\n      \"),e.YNc(7,Xl,17,1,\"ng-container\",3),e._uU(8,\"\\\\n      \"),e.YNc(9,nc,4,4,\"p\",29),e.ALo(10,\"slice\"),e._uU(11,\"\\\\n      \"),e.YNc(12,_c,20,4,\"ng-container\",3),e._uU(13,\"\\\\n    \"),e.qZA(),e._uU(14,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(7),e.Q6J(\"ngIf\",(null==n.work?null:n.work.numberOfContributors)>n.maxNumberContributorsWorkDetails),e.xp6(2),e.Q6J(\"ngForOf\",e.Dn7(10,3,null==n.work?null:n.work.contributorsGroupedByOrcid,0,n.maxNumberContributorsWorkDetails)),e.xp6(3),e.Q6J(\"ngIf\",(null==n.work?null:n.work.numberOfContributors)>n.maxNumberContributorsWorkDetails)}}function ac(o,_){if(1&o&&(e.TgZ(0,\"span\",47),e._uU(1),e.qZA()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(\"(\",null==n.work.citation||null==n.work.citation.citationType?null:n.work.citation.citationType.value,\")\")}}function sc(o,_){1&o&&(e.ynx(0,48),e.SDv(1,49),e.BQk())}function lc(o,_){1&o&&(e.ynx(0,50),e.SDv(1,51),e.BQk())}function cc(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(4);e.xp6(1),e.hij(\"\\\\n            \",n.work.citation.citation.value.substr(0,n.maxBibtexCharacters),\"\\\\n          \")}}function dc(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"pre\",54),e._uU(3),e.ALo(4,\"formatBibtex\"),e.qZA(),e._uU(5,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(4);e.xp6(3),e.hij(\"\",e.lcZ(4,1,n.work.citation.citation.value),\" \")}}function pc(o,_){1&o&&e._UZ(0,\"br\")}function uc(o,_){1&o&&(e.ynx(0,58),e.SDv(1,59),e.BQk())}function gc(o,_){1&o&&(e.ynx(0,60),e.SDv(1,61),e.BQk())}function fc(o,_){if(1&o){const n=e.EpF();e.ynx(0),e._uU(1,\"\\\\n            \"),e._UZ(2,\"br\"),e._uU(3,\"\\\\n            \"),e.YNc(4,pc,1,0,\"br\",3),e._uU(5,\"\\\\n            \"),e.TgZ(6,\"a\",55),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.showExpandedFormatting=!i.showExpandedFormatting)}),e._uU(7,\"\\\\n              \"),e.YNc(8,uc,2,0,\"ng-container\",56),e._uU(9,\"\\\\n              \"),e.YNc(10,gc,2,0,\"ng-container\",57),e._uU(11,\"\\\\n            \"),e.qZA(),e._uU(12,\"\\\\n          \"),e.BQk()}if(2&o){const n=e.oxw(4);e.xp6(4),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(4),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",n.showExpandedFormatting)}}function Oc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"a\",14),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.exportWork(i.work))}),e.SDv(1,62),e.qZA()}}function Cc(o,_){1&o&&(e.ynx(0),e.SDv(1,63),e.BQk())}function Rc(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.YNc(2,cc,2,1,\"ng-container\",3),e._uU(3,\"\\\\n          \"),e.YNc(4,dc,6,3,\"ng-container\",3),e._uU(5,\"\\\\n          \"),e.YNc(6,fc,13,3,\"ng-container\",3),e._uU(7,\"\\\\n          \"),e._UZ(8,\"br\"),e._uU(9,\"\\\\n          ----\\\\n          \"),e._UZ(10,\"br\"),e._uU(11,\"\\\\n          \"),e.TgZ(12,\"span\"),e.SDv(13,52),e.qZA(),e._uU(14,\"\\\\n          \"),e.YNc(15,Oc,2,0,\"a\",6),e._uU(16,\"\\\\n          \"),e.YNc(17,Cc,2,0,\"ng-container\",3),e._uU(18,\"\\\\n          \"),e.TgZ(19,\"a\",37),e.SDv(20,53),e.qZA(),e._uU(21,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(2),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",\"bibtex\"===(null==n.work||null==n.work.citation||null==n.work.citation.citationType?null:n.work.citation.citationType.value)),e.xp6(9),e.Q6J(\"ngIf\",!n.isPublicRecord),e.xp6(2),e.Q6J(\"ngIf\",!n.isPublicRecord),e.xp6(2),e.s9C(\"href\",(null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].normalizedUrl?null:n.work.workExternalIdentifiers[0].normalizedUrl.value)||(null==n.work.workExternalIdentifiers[0]||null==n.work.workExternalIdentifiers[0].url?null:n.work.workExternalIdentifiers[0].url.value),e.LSH)}}function Tc(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(4);e.xp6(1),e.hij(\"\\\\n            \",n.work.citation.citation.value,\"\\\\n          \")}}function mc(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n            \"),e.TgZ(2,\"pre\",54),e._uU(3),e.ALo(4,\"formatBibtex\"),e.qZA(),e._uU(5,\"\\\\n          \"),e.BQk()),2&o){const n=e.oxw(4);e.xp6(3),e.hij(\"\",e.lcZ(4,1,n.work.citation.citation.value),\" \")}}function Ec(o,_){1&o&&e._UZ(0,\"br\")}function Sc(o,_){1&o&&(e.ynx(0,58),e.SDv(1,64),e.BQk())}function hc(o,_){1&o&&(e.ynx(0,60),e.SDv(1,65),e.BQk())}function Nc(o,_){if(1&o){const n=e.EpF();e.ynx(0),e._uU(1,\"\\\\n            \"),e._UZ(2,\"br\"),e._uU(3,\"\\\\n            \"),e.YNc(4,Ec,1,0,\"br\",3),e._uU(5,\"\\\\n            \"),e.TgZ(6,\"a\",55),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.showExpandedFormatting=!i.showExpandedFormatting)}),e._uU(7,\"\\\\n              \"),e.YNc(8,Sc,2,0,\"ng-container\",56),e._uU(9,\"\\\\n\\\\n              \"),e.YNc(10,hc,2,0,\"ng-container\",57),e._uU(11,\"\\\\n            \"),e.qZA(),e._uU(12,\"\\\\n          \"),e.BQk()}if(2&o){const n=e.oxw(4);e.xp6(4),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(4),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",n.showExpandedFormatting)}}function Mc(o,_){if(1&o&&(e.ynx(0),e._uU(1,\"\\\\n          \"),e.YNc(2,Tc,2,1,\"ng-container\",3),e._uU(3,\"\\\\n          \"),e.YNc(4,mc,6,3,\"ng-container\",3),e._uU(5,\"\\\\n          \"),e.YNc(6,Nc,13,3,\"ng-container\",3),e._uU(7,\"\\\\n        \"),e.BQk()),2&o){const n=e.oxw(3);e.xp6(2),e.Q6J(\"ngIf\",!n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",n.showExpandedFormatting),e.xp6(2),e.Q6J(\"ngIf\",\"bibtex\"===(null==n.work.citation||null==n.work.citation.citationType?null:n.work.citation.citationType.value))}}function Pc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e._uU(3,\"\\\\n      \"),e.ynx(4),e.SDv(5,42),e.BQk(),e._uU(6,\"\\\\n      \"),e.YNc(7,ac,2,1,\"span\",43),e._uU(8,\"\\\\n    \"),e.qZA(),e._uU(9,\"\\\\n    \"),e.TgZ(10,\"div\"),e._uU(11,\"\\\\n      \"),e.TgZ(12,\"div\"),e._uU(13,\"\\\\n        \"),e.TgZ(14,\"a\",44),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.showCitation=!i.showCitation)}),e._uU(15,\"\\\\n          \"),e.YNc(16,sc,2,0,\"ng-container\",45),e._uU(17,\"\\\\n          \"),e.YNc(18,lc,2,0,\"ng-container\",46),e._uU(19,\"\\\\n        \"),e.qZA(),e._uU(20,\"\\\\n      \"),e.qZA(),e._uU(21,\"\\\\n      \"),e._UZ(22,\"br\"),e._uU(23,\"\\\\n      \"),e.ynx(24),e._uU(25,\"\\\\n        \"),e.YNc(26,Rc,22,6,\"ng-container\",3),e._uU(27,\"\\\\n        \"),e.YNc(28,Mc,8,3,\"ng-container\",3),e._uU(29,\"\\\\n      \"),e.BQk(),e._uU(30,\"\\\\n    \"),e.qZA(),e._uU(31,\"\\\\n  \"),e.qZA()}if(2&o){const n=e.oxw(2);e.xp6(7),e.Q6J(\"ngIf\",null==n.work.citation||null==n.work.citation.citationType?null:n.work.citation.citationType.value),e.xp6(9),e.Q6J(\"ngIf\",!n.showCitation),e.xp6(2),e.Q6J(\"ngIf\",n.showCitation),e.xp6(8),e.Q6J(\"ngIf\",(null==n.work.citation||null==n.work.citation.citation||null==n.work.citation.citation.value?null:n.work.citation.citation.value.length)>n.maxBibtexCharacters&&n.showCitation),e.xp6(2),e.Q6J(\"ngIf\",(null==n.work||null==n.work.citation||null==n.work.citation.citation||null==n.work.citation.citation.value?null:n.work.citation.citation.value.length)<n.maxBibtexCharacters&&n.showCitation)}}function bc(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e.SDv(3,66),e.qZA(),e._uU(4,\"\\\\n\\\\n    \"),e._UZ(5,\"div\",67),e._uU(6,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(5),e.Q6J(\"innerText\",n.work.shortDescription.value)}}function Ac(o,_){if(1&o&&(e.TgZ(0,\"app-display-attribute\"),e._uU(1,\"\\\\n    \"),e.TgZ(2,\"h3\",17),e.SDv(3,68),e.qZA(),e._uU(4,\"\\\\n\\\\n    \"),e.TgZ(5,\"div\"),e._uU(6),e.qZA(),e._uU(7,\"\\\\n  \"),e.qZA()),2&o){const n=e.oxw(2);e.xp6(6),e.hij(\"\\\\n      \",n.work.countryName.value,\"\\\\n    \")}}function Ic(o,_){if(1&o&&(e.TgZ(0,\"app-panel-data\",0),e._uU(1,\"\\\\n  \"),e._uU(2,\"\\\\n  \"),e.YNc(3,Fl,15,2,\"app-display-attribute\",3),e._uU(4,\"\\\\n\\\\n  \"),e._uU(5,\"\\\\n  \"),e.YNc(6,Gl,11,1,\"app-display-attribute\",3),e._uU(7,\"\\\\n\\\\n  \"),e._uU(8,\"\\\\n  \"),e.YNc(9,Kl,11,1,\"app-display-attribute\",3),e._uU(10,\"\\\\n\\\\n  \"),e._uU(11,\"\\\\n\\\\n  \"),e.YNc(12,Jl,14,6,\"app-display-attribute\",3),e._uU(13,\"\\\\n\\\\n  \"),e._uU(14,\"\\\\n  \"),e.YNc(15,rc,15,7,\"app-display-attribute\",3),e._uU(16,\"\\\\n\\\\n  \"),e._uU(17,\"\\\\n  \"),e.YNc(18,Pc,32,5,\"app-display-attribute\",3),e._uU(19,\"\\\\n\\\\n  \"),e._uU(20,\"\\\\n  \"),e.YNc(21,bc,7,1,\"app-display-attribute\",3),e._uU(22,\"\\\\n  \"),e._uU(23,\"\\\\n  \"),e.YNc(24,Ac,8,1,\"app-display-attribute\",3),e._uU(25,\"\\\\n\\\\n  \"),e._uU(26,\"\\\\n  \"),e.TgZ(27,\"app-display-attribute\"),e._uU(28,\"\\\\n    \"),e.TgZ(29,\"h3\",17),e.SDv(30,18),e.qZA(),e._uU(31,\"\\\\n    \"),e.TgZ(32,\"div\"),e._uU(33),e.ALo(34,\"monthDayYearDateToString\"),e.qZA(),e._uU(35,\"\\\\n  \"),e.qZA(),e._uU(36,\"\\\\n\\\\n  \"),e._uU(37,\"\\\\n  \"),e.TgZ(38,\"app-display-attribute\"),e._uU(39,\"\\\\n    \"),e.TgZ(40,\"h3\",17),e.SDv(41,19),e.qZA(),e._uU(42,\"\\\\n    \"),e.TgZ(43,\"div\"),e._uU(44),e.ALo(45,\"monthDayYearDateToString\"),e.qZA(),e._uU(46,\"\\\\n  \"),e.qZA(),e._uU(47,\"\\\\n\"),e.qZA()),2&o){const n=e.oxw();e.Q6J(\"borderBottom\",!0),e.xp6(3),e.Q6J(\"ngIf\",null==n.work||null==n.work.translatedTitle?null:n.work.translatedTitle.content),e.xp6(3),e.Q6J(\"ngIf\",null==n.work||null==n.work.languageName?null:n.work.languageName.value),e.xp6(3),e.Q6J(\"ngIf\",null==n.work||null==n.work.subtitle?null:n.work.subtitle.value),e.xp6(3),e.Q6J(\"ngIf\",null==n.work||null==n.work.url?null:n.work.url.value),e.xp6(3),e.Q6J(\"ngIf\",(null==n.work||null==n.work.contributorsGroupedByOrcid?null:n.work.contributorsGroupedByOrcid.length)>0||(null==n.work||null==n.work.contributors?null:n.work.contributors.length)>0),e.xp6(3),e.Q6J(\"ngIf\",(null==n.work.citation||null==n.work.citation.citation||null==n.work.citation.citation.value?null:n.work.citation.citation.value.length)>0),e.xp6(3),e.Q6J(\"ngIf\",null==n.work.shortDescription?null:n.work.shortDescription.value),e.xp6(3),e.Q6J(\"ngIf\",null==n.work.countryCode?null:n.work.countryCode.value),e.xp6(9),e.hij(\"\\\\n      \",e.lcZ(34,11,n.work.createdDate),\"\\\\n    \"),e.xp6(11),e.Oqu(e.lcZ(45,13,n.work.lastModified))}}let xc=(()=>{var o;class _{constructor(t,i,r,a){this.elementRef=t,this._userInfo=i,this._recordWorksService=r,this.window=a,this.toggleDetails=new e.vpe,this.maxNumberContributors=10,this.maxNumberContributorsWorkDetails=50,this.maxBibtexCharacters=5e3,this.showCitation=!1,this.showExpandedFormatting=!1,this.privateName=\"Name is private\",this.privateNameTranslation=\"Name is private\",this.languageMap=m.Wy}ngOnInit(){}exportWork(t){this._recordWorksService.exportSelected([t.putCode.value]).subscribe(i=>{this.createTxtFile(i)})}getLanguageKey(t){return Object.keys(m.Wy).find(i=>m.Wy[i]===t)}createTxtFile(t){var i;if(null!=(i=this.window.navigator)&&i.msSaveOrOpenBlob){const a=new Blob([t],{type:\"text/plain\"});this.window.navigator.msSaveOrOpenBlob(a,\"works.bib\")}else{const r=document.createElement(\"a\");r.setAttribute(\"css\",\"{display: \\'none\\'}\"),this.elementRef.nativeElement.append(r),r.setAttribute(\"href\",\"data:text/x-bibtex;charset=utf-8,\"+encodeURIComponent(t)),r.setAttribute(\"target\",\"_self\"),r.setAttribute(\"download\",\"works.bib\"),r.click(),r.remove()}}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Rn.$),e.Y36(z.Y),e.Y36(ie.m9))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work\"]],inputs:{work:\"work\",panelDetailsState:\"panelDetailsState\",stackMode:\"stackMode\",orgDisambiguated:\"orgDisambiguated\",id:\"id\",isPublicRecord:\"isPublicRecord\"},outputs:{toggleDetails:\"toggleDetails\"},decls:33,vars:16,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E,C,N,M,L,W,F,G,B,b,be,Ae,Ie,xe,ye,ke,ve,De;return n=\"Contributors\",t=\"et al.\",i=\"Show more detail\",r=\"Show less detail\",a=\"Added\",s=\"Last modified\",l=\"Work translated title\",c=\"Language\",u=\"Subtitle\",O=\"URL\",f=\"Contributors\",R=\"Showing the first\",T=\"Contributors\",E=\"For the full contributor list\",C=\"visit the work source\",N=\"et al.\",M=\"export this work as BibTeX\",L=\"or\",W=\"Citation\",F=\"Show citation\",G=\"Hide citation\",B=\"For full citation\",b=\"visit the work source\",be=\"Switch to expanded formatting\",Ae=\"Switch to compact formatting\",Ie=\"export this work as BibTeX\",xe=\"or\",ye=\"Switch to expanded formatting\",ke=\"Switch to compact formatting\",ve=\"Description\",De=\"Country/Location of publication\",[[3,\"borderBottom\"],[\"class\",\"general-data\",4,\"ngIf\"],[1,\"general-data\"],[4,\"ngIf\"],[3,\"externalIdentifiers\"],[\"align-end\",\"\"],[\"class\",\"underline\",3,\"click\",4,\"ngIf\"],[3,\"borderBottom\",4,\"ngIf\"],[1,\"record-holder\"],[1,\"uppercase\"],n,[4,\"ngFor\",\"ngForOf\"],[\"target\",\"_blank\",\"rel\",\"noreferrer noopener\",1,\"underline\",3,\"href\"],t,[1,\"underline\",3,\"click\"],i,r,[1,\"orc-font-body-small\"],a,s,[1,\"row\"],[1,\"translated-title-label\",\"orc-font-body-small\"],l,c,u,O,[\"class\",\"underline\",\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",3,\"href\",4,\"ngIf\"],[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",1,\"underline\",3,\"href\"],f,[3,\"ngClass\",4,\"ngFor\",\"ngForOf\"],R,[1,\"lowercase\"],T,[3,\"ngClass\"],[4,\"ngIf\",\"ngIfElse\"],[\"elseBlock\",\"\"],E,[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"underline\",3,\"href\"],C,N,M,L,W,[\"class\",\"citation-type\",4,\"ngIf\"],[\"id\",\"cy-citation-toggle-link\",1,\"underline\",3,\"click\"],[\"id\",\"cy-show-citation\",4,\"ngIf\"],[\"id\",\"cy-hide-citation\",4,\"ngIf\"],[1,\"citation-type\"],[\"id\",\"cy-show-citation\"],F,[\"id\",\"cy-hide-citation\"],G,B,b,[1,\"pre-bibtex\"],[\"id\",\"cy-expanded-citation-toggle-link\",1,\"underline\",3,\"click\"],[\"id\",\"cy-expanded-formatting\",4,\"ngIf\"],[\"id\",\"cy-compact-formatting\",4,\"ngIf\"],[\"id\",\"cy-expanded-formatting\"],be,[\"id\",\"cy-compact-formatting\"],Ae,Ie,xe,ye,ke,ve,[3,\"innerText\"],De]},template:function(t,i){1&t&&(e._uU(0,\"\\\\n\"),e._uU(1,\"\\\\n\"),e.TgZ(2,\"app-panel-data\",0),e._uU(3,\"\\\\n  \"),e.TgZ(4,\"div\"),e._uU(5,\"\\\\n    \"),e.YNc(6,Al,2,1,\"div\",1),e._uU(7,\"\\\\n    \"),e.TgZ(8,\"div\",2),e._uU(9,\"\\\\n      \"),e.YNc(10,Il,3,3,\"ng-container\",3),e._uU(11),e.ALo(12,\"recordWorkTypeLabel\"),e.YNc(13,yl,4,1,\"ng-container\",3),e.ALo(14,\"recordHolderRoles\"),e._uU(15,\"\\\\n    \"),e.qZA(),e._uU(16,\"\\\\n    \"),e._UZ(17,\"app-display-external-ids\",4),e._uU(18,\"\\\\n    \"),e.YNc(19,$l,10,6,\"div\",1),e._uU(20,\"\\\\n  \"),e.qZA(),e._uU(21,\"\\\\n\\\\n  \"),e.TgZ(22,\"div\",5),e._uU(23,\"\\\\n    \"),e.YNc(24,Ul,3,5,\"a\",6),e._uU(25,\"\\\\n    \"),e.YNc(26,Zl,3,5,\"a\",6),e._uU(27,\"\\\\n  \"),e.qZA(),e._uU(28,\"\\\\n\"),e.qZA(),e._uU(29,\"\\\\n\\\\n\"),e._uU(30,\"\\\\n\\\\n\"),e.YNc(31,Ic,48,15,\"app-panel-data\",7),e._uU(32,\"\\\\n\")),2&t&&(e.xp6(2),e.Q6J(\"borderBottom\",!0),e.xp6(4),e.Q6J(\"ngIf\",null==i.work?null:i.work.journalTitle),e.xp6(4),e.Q6J(\"ngIf\",null==i.work||null==i.work.publicationDate?null:i.work.publicationDate.year),e.xp6(1),e.hij(\"\\\\n      \",e.lcZ(12,10,null==i.work?null:i.work.workType.value),\"\\\\n      \"),e.xp6(2),e.Q6J(\"ngIf\",e.Dn7(14,12,null==i.work?null:i.work.contributorsGroupedByOrcid,i.isPublicRecord,i.id)),e.xp6(4),e.Q6J(\"externalIdentifiers\",null==i.work?null:i.work.workExternalIdentifiers),e.xp6(2),e.Q6J(\"ngIf\",(null==i.work||null==i.work.contributorsGroupedByOrcid?null:i.work.contributorsGroupedByOrcid.length)>0),e.xp6(5),e.Q6J(\"ngIf\",!(null!=i.panelDetailsState&&i.panelDetailsState.state)),e.xp6(2),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state),e.xp6(5),e.Q6J(\"ngIf\",null==i.panelDetailsState?null:i.panelDetailsState.state))},dependencies:[p.mk,p.sg,p.O5,se.j,v.t,fe,Fe,p.OU,X.r,Pl,bn,dn,bl,rn,pe.Q],styles:[\"p[_ngcontent-%COMP%]{margin:6px 0}.translated-title-label[_ngcontent-%COMP%]{font-weight:700}.record-holder[_ngcontent-%COMP%]{font-style:italic}.lowercase[_ngcontent-%COMP%]{text-transform:lowercase}.uppercase[_ngcontent-%COMP%]{text-transform:uppercase}.pre-bibtex[_ngcontent-%COMP%]{font-size:inherit;margin:0;font-family:inherit;white-space:pre-wrap}.citation-type[_ngcontent-%COMP%]{font-weight:400!important}.general-data[_ngcontent-%COMP%]{word-break:break-word}\"]}),_})();const yc=[\"panelsComponent\"];function kc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-work\",7),e.NdJ(\"toggleDetails\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.toggleDetails(i))}),e.qZA()}if(2&o){const n=e.oxw(2).$implicit,t=e.oxw();e.Q6J(\"work\",n)(\"panelDetailsState\",t.panelDetailsState[n.putCode.value])(\"id\",null==t.userInfo?null:t.userInfo.EFFECTIVE_USER_ORCID)(\"isPublicRecord\",t.isPublicRecord)}}const vc=function(o){return{\"z-index\":o}},Dc=function(o){return{last:o}};function wc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-panel\",2,3),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"checkboxChangePanel\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.checkboxChangeWorkStack(i))}),e.TgZ(2,\"h4\",4),e._uU(3),e.qZA(),e.YNc(4,kc,1,4,\"app-work\",5),e.TgZ(5,\"app-panel-source\",6),e.NdJ(\"displayTheStackChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.displayTheStack=i)})(\"makePrimary\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.makePrimaryCard(i))})(\"topPanelOfTheStackModeChange\",function(){e.CHM(n);const i=e.oxw().$implicit,r=e.oxw();return e.KtG(r.changeTopPanelOfTheStack(i))}),e.qZA()()}if(2&o){const n=e.oxw(),t=n.$implicit,i=n.index,r=n.last,a=e.oxw();e.Q6J(\"editableVisibilityControl\",a.isPreferred(t))(\"stackSiblings\",a.workStack.works)(\"userRecord\",a.userRecord)(\"elements\",t)(\"ngStyle\",e.VKq(35,vc,a.workStack.works.length-i))(\"ngClass\",e.VKq(37,Dc,r))(\"defaultPutCode\",a.workStack.defaultPutCode.toString())(\"putCode\",t.putCode.value)(\"visibility\",a.isPreferred(t)?a.workStack.activeVisibility:t.visibility.visibility)(\"isPublicRecord\",a.isPublicRecord)(\"editModalComponent\",a.worksModal)(\"selectable\",!0)(\"selectAll\",a.selectAll)(\"isUserSource\",a.userIsSource(t))(\"hasExternalIds\",a.hasExternalIds)(\"userVersionPresent\",a.workStack.userVersionPresent)(\"displayTheStack\",a.displayTheStack)(\"visibilityError\",a.workStack.visibilityError)(\"type\",\"works\")(\"panelTitle\",t.title.value),e.xp6(3),e.Oqu(t.title.value),e.xp6(1),e.Q6J(\"ngIf\",a.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack),e.xp6(1),e.Q6J(\"userRecord\",a.userRecord)(\"isPreferred\",a.isPreferred(t))(\"sourceName\",t.sourceName||t.source)(\"assertionOriginName\",t.assertionOriginName)(\"assertionOriginClientId\",t.assertionOriginClientId)(\"assertionOriginOrcid\",t.assertionOriginOrcid)(\"stackLength\",a.workStack.works.length)(\"displayTheStack\",a.displayTheStack)(\"topPanelOfTheStackMode\",a.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack)(\"isPublicRecord\",a.isPublicRecord)(\"type\",\"works\")(\"item\",t)(\"panelTitle\",t.title.value)}}function Lc(o,_){if(1&o&&(e.ynx(0),e.YNc(1,wc,6,39,\"app-panel\",1),e.BQk()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(1),e.Q6J(\"ngIf\",t.isPreferred(n)||t.displayTheStack)}}let $c=(()=>{var o;class _{set workStack(t){this.hasExternalIds=!!t.externalIdentifiers.length,this._workStack=t,this._workStack.works=this._workStack.works.map(i=>({...i,userIsSource:this.userIsSource(i)})),this.setInitialStates(t,!0)}get workStack(){return this._workStack}set displayTheStack(t){this._displayTheStack=t,this.displayTheStackClass=this._displayTheStack,this.setInitialStates(this.workStack,!0)}get displayTheStack(){return this._displayTheStack}constructor(t){this._workService=t,this.displayTheStackClass=!1,this.worksModal=sn.L,this._displayTheStack=!1,this.checkboxChangeWorkStackOutput=new e.vpe,this.stackPanelsDisplay={},this.panelDetailsState={}}setInitialStates(t,i=!1){t.works.forEach(r=>{this.setDefaultPanelsDisplay(r,i),this.setDefaultPanelDetailsState(r,i)})}setDefaultPanelDetailsState(t,i=!1){(void 0===this.panelDetailsState[t.putCode.value]||i)&&(this.panelDetailsState[t.putCode.value]={state:!1})}setDefaultPanelsDisplay(t,i=!1){(void 0===this.stackPanelsDisplay[t.putCode.value]||i)&&(this.stackPanelsDisplay[t.putCode.value]={topPanelOfTheStack:!!this.isPreferred(t)})}isPreferred(t){return!(!t||!this.workStack)&&this.workStack.defaultPutCode.toString()===t.putCode.value}toggleDetails(t,i={showDetails:!0}){const r=t.putCode.value;i.showDetails&&(this.panelDetailsState[r].state=!this.panelDetailsState[r].state),this.panelDetailsState[r].state&&this.getDetails(t).pipe((0,k.P)()).subscribe(()=>{})}getDetails(t){return this._workService.getDetails(t.putCode.value,this.isPublicRecord)}makePrimaryCard(t){this._workService.updatePreferredSource(t.putCode.value).subscribe()}changeTopPanelOfTheStack(t){Object.keys(this.stackPanelsDisplay).forEach(i=>{this.stackPanelsDisplay[i].topPanelOfTheStack=!1}),this.stackPanelsDisplay[t.putCode.value].topPanelOfTheStack=!0}trackByWorkStack(t,i){return i.putCode.value}userIsSource(t){return!!this.userInfo&&t.source===this.userInfo.EFFECTIVE_USER_ORCID}checkboxChangeWorkStack(t){this.checkboxChangeWorkStackOutput.emit(t)}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(z.Y))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-stack\"]],viewQuery:function(t,i){if(1&t&&e.Gf(yc,5),2&t){let r;e.iGM(r=e.CRH())&&(i.panelsComponent=r)}},hostVars:2,hostBindings:function(t,i){2&t&&e.ekj(\"display-the-stack\",i.displayTheStackClass)},inputs:{userRecord:\"userRecord\",isPublicRecord:\"isPublicRecord\",workStack:\"workStack\",userInfo:\"userInfo\",selectAll:\"selectAll\"},outputs:{checkboxChangeWorkStackOutput:\"checkboxChangeWorkStackOutput\"},decls:1,vars:2,consts:[[4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[\"panelId\",\"work-stack\",3,\"editableVisibilityControl\",\"stackSiblings\",\"userRecord\",\"elements\",\"ngStyle\",\"ngClass\",\"defaultPutCode\",\"putCode\",\"visibility\",\"isPublicRecord\",\"editModalComponent\",\"selectable\",\"selectAll\",\"isUserSource\",\"hasExternalIds\",\"userVersionPresent\",\"displayTheStack\",\"visibilityError\",\"type\",\"panelTitle\",\"displayTheStackChange\",\"checkboxChangePanel\",4,\"ngIf\"],[\"panelId\",\"work-stack\",3,\"editableVisibilityControl\",\"stackSiblings\",\"userRecord\",\"elements\",\"ngStyle\",\"ngClass\",\"defaultPutCode\",\"putCode\",\"visibility\",\"isPublicRecord\",\"editModalComponent\",\"selectable\",\"selectAll\",\"isUserSource\",\"hasExternalIds\",\"userVersionPresent\",\"displayTheStack\",\"visibilityError\",\"type\",\"panelTitle\",\"displayTheStackChange\",\"checkboxChangePanel\"],[\"panelsComponent\",\"\"],[\"header\",\"\",1,\"work-title\",\"orc-font-body\"],[3,\"work\",\"panelDetailsState\",\"id\",\"isPublicRecord\",\"toggleDetails\",4,\"ngIf\"],[3,\"userRecord\",\"isPreferred\",\"sourceName\",\"assertionOriginName\",\"assertionOriginClientId\",\"assertionOriginOrcid\",\"stackLength\",\"displayTheStack\",\"topPanelOfTheStackMode\",\"isPublicRecord\",\"type\",\"item\",\"panelTitle\",\"displayTheStackChange\",\"makePrimary\",\"topPanelOfTheStackModeChange\"],[3,\"work\",\"panelDetailsState\",\"id\",\"isPublicRecord\",\"toggleDetails\"]],template:function(t,i){1&t&&e.YNc(0,Lc,2,1,\"ng-container\",0),2&t&&e.Q6J(\"ngForOf\",null==i.workStack?null:i.workStack.works)(\"ngForTrackBy\",i.trackByWorkStack)},dependencies:[p.mk,p.sg,p.O5,p.PC,ae.y,Ne,xc],styles:[\"[body][_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]{width:100%}.display-the-stack[_nghost-%COMP%]{border-style:solid;border-radius:4px;border-width:2px}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){display:block;position:relative}.work-title[_ngcontent-%COMP%]{margin:0}\",\".display-the-stack[_nghost-%COMP%]{border-color:#212121}.display-the-stack[_nghost-%COMP%]   app-panel[_ngcontent-%COMP%]:not(.last){box-shadow:0 9px 5px #d6d6d6}\"]}),_})();const Uc=[\"selectAllCheckbox\"],Zc=[\"appWorkStacks\"];function Wc(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",6)}const Ln=function(){return[10,50,100]};function Fc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"mat-paginator\",7),e.NdJ(\"page\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.pageEvent(i))}),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J(\"length\",n.paginationTotalAmountOfWorks)(\"pageSize\",n.paginationPageSize)(\"pageSizeOptions\",e.DdM(5,Ln))(\"pageIndex\",n.paginationIndex)(\"disabled\",n.paginationLoading)}}function Gc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",30),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.openManageSimilarWorksModal())}),e.SDv(1,31),e.qZA()}}const Kc=function(){return{standalone:!0}};function Bc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",10)(1,\"div\",11)(2,\"p\")(3,\"mat-checkbox\",12),e.NdJ(\"change\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.checked(i))})(\"ngModelChange\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.selectAll=i)}),e.ynx(4),e.SDv(5,13),e.BQk(),e._uU(6),e.qZA()()(),e.TgZ(7,\"div\",14)(8,\"p\"),e.ynx(9),e.SDv(10,15),e.BQk(),e._uU(11),e.qZA()(),e.TgZ(12,\"div\",16)(13,\"button\",17)(14,\"span\",18),e.SDv(15,19),e.qZA(),e.TgZ(16,\"mat-icon\",20),e._uU(17,\"arrow_drop_down\"),e.qZA()(),e.TgZ(18,\"mat-menu\",null,21)(20,\"button\",22),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.combine())}),e.TgZ(21,\"mat-icon\"),e._uU(22,\"merge_type\"),e.qZA(),e.TgZ(23,\"span\"),e.SDv(24,23),e.qZA()(),e.TgZ(25,\"button\",22),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.export())}),e.TgZ(26,\"mat-icon\"),e._uU(27,\"file_download\"),e.qZA(),e.TgZ(28,\"span\"),e.ynx(29),e.SDv(30,24),e.BQk(),e._uU(31),e.qZA()(),e.TgZ(32,\"button\",25),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.exportAllWorks())}),e.TgZ(33,\"mat-icon\"),e._uU(34,\"file_download\"),e.qZA(),e.TgZ(35,\"span\"),e.ynx(36),e.SDv(37,26),e.BQk(),e._uU(38),e.qZA()(),e.TgZ(39,\"button\",22),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.visibility())}),e.TgZ(40,\"mat-icon\"),e._uU(41,\"visibility\"),e.qZA(),e.TgZ(42,\"span\"),e.SDv(43,27),e.qZA()(),e.TgZ(44,\"button\",22),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(3);return e.KtG(i.delete())}),e.TgZ(45,\"mat-icon\"),e._uU(46,\"delete\"),e.qZA(),e.TgZ(47,\"span\"),e.SDv(48,28),e.qZA()()(),e.YNc(49,Gc,2,0,\"button\",29),e.qZA()()}if(2&o){const n=e.MAs(19),t=e.oxw(3);e.xp6(3),e.Q6J(\"aria-label\",t.labelSelectAll)(\"ngModel\",t.selectAll)(\"ngModelOptions\",e.DdM(14,Kc)),e.xp6(3),e.hij(\" (\",t.workGroup.groups.length,\") \"),e.xp6(5),e.hij(\" (\",t.selectedWorks.length,\") \"),e.xp6(2),e.Q6J(\"matMenuTriggerFor\",n),e.uIk(\"aria-label\",t.labelActionsButton),e.xp6(7),e.Q6J(\"disabled\",0===t.selectedWorks.length),e.xp6(5),e.Q6J(\"disabled\",0===t.selectedWorks.length),e.xp6(6),e.hij(\" (\",t.selectedWorks.length,\") \"),e.xp6(7),e.hij(\" (\",t.workGroup.totalGroups,\") \"),e.xp6(1),e.Q6J(\"disabled\",0===t.selectedWorks.length),e.xp6(5),e.Q6J(\"disabled\",0===t.selectedWorks.length),e.xp6(5),e.Q6J(\"ngIf\",null==t.combineSuggestion||null==t.combineSuggestion.suggestions?null:t.combineSuggestion.suggestions.length)}}function Qc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"app-work-stack\",32,33),e.NdJ(\"checkboxChangeWorkStackOutput\",function(i){e.CHM(n);const r=e.oxw(3);return e.KtG(r.checkboxChangeWorkStackGroup(i))}),e.qZA()}if(2&o){const n=_.$implicit,t=e.oxw(3);e.Q6J(\"userRecord\",t.userRecord)(\"isPublicRecord\",t.isPublicRecord)(\"workStack\",n)(\"userInfo\",t.userInfo)(\"selectAll\",t.selectAll)}}function Jc(o,_){if(1&o&&(e.ynx(0),e.YNc(1,Bc,50,15,\"div\",8),e.YNc(2,Qc,2,5,\"app-work-stack\",9),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",!n.isPublicRecord),e.xp6(1),e.Q6J(\"ngForOf\",n.workGroup.groups)(\"ngForTrackBy\",n.trackByWorkGroup)}}function Xc(o,_){1&o&&(e.ynx(0),e.TgZ(1,\"div\",34)(2,\"p\",35),e.SDv(3,36),e.qZA(),e.TgZ(4,\"a\",37),e.SDv(5,38),e.qZA()(),e.BQk())}function Yc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"mat-paginator\",7),e.NdJ(\"page\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.pageEvent(i))}),e.qZA()}if(2&o){const n=e.oxw(2);e.Q6J(\"length\",n.paginationTotalAmountOfWorks)(\"pageSize\",n.paginationPageSize)(\"pageSizeOptions\",e.DdM(5,Ln))(\"pageIndex\",n.paginationIndex)(\"disabled\",n.paginationLoading)}}function qc(o,_){1&o&&e._UZ(0,\"mat-progress-bar\",6)}function zc(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"section\",1)(1,\"app-panels\",2),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.expandedContent.WORK=i)})(\"expandedContentChange\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.expandedContentChange.emit(i.expandedContent))})(\"sort\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.sortEvent(i))}),e.YNc(2,Wc,1,0,\"mat-progress-bar\",3),e.YNc(3,Fc,1,6,\"mat-paginator\",4),e.YNc(4,Jc,3,3,\"ng-container\",5),e.YNc(5,Xc,6,0,\"ng-container\",5),e.YNc(6,Yc,1,6,\"mat-paginator\",4),e.YNc(7,qc,1,0,\"mat-progress-bar\",3),e.qZA()()}if(2&o){const n=e.oxw();e.uIk(\"aria-label\",n.regionWorks),e.xp6(1),e.Q6J(\"userRecord\",n.userRecord)(\"title\",n.works)(\"currentAmount\",n.workGroup.groups.length)(\"total\",n.workGroup.totalGroups)(\"isPublicRecord\",n.isPublicRecord)(\"expandedContent\",n.expandedContent.WORK)(\"sortTypes\",n.sortTypes)(\"sortType\",\"date\")(\"addMenuOptions\",n.addMenuOptions)(\"type\",\"works\"),e.xp6(1),e.Q6J(\"ngIf\",n.paginationLoading),e.xp6(1),e.Q6J(\"ngIf\",n.workGroup.totalGroups>n.workGroup.groups.length||n.paginationPageSize!=n.defaultPageSize),e.xp6(1),e.Q6J(\"ngIf\",n.workGroup.groups.length>0&&!n.paginationLoading),e.xp6(1),e.Q6J(\"ngIf\",0===n.workGroup.groups.length),e.xp6(1),e.Q6J(\"ngIf\",n.workGroup.totalGroups>n.workGroup.groups.length||n.paginationPageSize!==n.defaultPageSize),e.xp6(1),e.Q6J(\"ngIf\",n.paginationLoading)}}let Hc=(()=>{var o;class _{constructor(t,i,r,a,s,l,c){this._dialog=t,this._platform=i,this._record=r,this._works=a,this._matPaginatorIntl=s,this._announce=l,this._togglz=c,this.showManageSimilarWorks=!1,this.defaultPageSize=I.L8,this.regionWorks=\"Works\",this.labelAddButton=\"Add Work\",this.labelSortButton=\"Sort Works\",this.labelSelectAll=\"Select all Works on this page\",this.paginationLength=0,this.paginationLoading=!0,this.expandedContentChange=new e.vpe,this.total=new e.vpe,this.userRecordContext={},this.addMenuOptions=[{label:\"Search & link\",action:I.RW.searchAndLink,modal:je.z,id:\"cy-add-work-search-link\"},{label:\"Add DOI\",action:I.RW.doi,modal:ln.S,type:I.mp.doi,id:\"cy-add-work-doi\"},{label:\"Add PubMed ID\",action:I.RW.pubMed,modal:ln.S,type:I.mp.pubMed,id:\"cy-add-work-pubmed\"},{label:\"Add BibTeX\",action:I.RW.bibText,modal:wn.Y4,id:\"cy-add-work-bibtext\"},{label:\"Add manually\",action:I.RW.addManually,modal:sn.L,id:\"cy-add-work-manually\"}],this.$destroy=new w.xQ,this.workStackGroupForm=new d.nJ({}),this.works=\"Works\",this.labelActionsButton=\"Choose an action to apply to selected works\",this.selectedWorks=[],this.sortTypes=[\"title\",\"start\",\"end\"]}ngOnInit(){this._togglz.getStateOf(\"SOURCE_SORTING\").pipe((0,Se.q)(1)).subscribe(t=>{t&&this.sortTypes.push(\"source\")}),this.$loading=this._works.$loading,this._record.getRecord({publicRecordId:this.isPublicRecord}).subscribe(t=>{var i,r;this.userRecord=t,(0,Le.isEmpty)(null==t?void 0:t.works)||(this.paginationLoading=!1,this.workGroup=t.works,this.paginationTotalAmountOfWorks=t.works.totalGroups,this.paginationIndex=t.works.pageIndex,this.paginationPageSize=t.works.pageSize,this.total.emit((null==(r=null==(i=t.works)?void 0:i.groups)?void 0:r.length)||0))}),this.isPublicRecord||this.getGroupingSuggestions(),this._platform.get().subscribe(t=>{this.platform=t})}getGroupingSuggestions(){this._works.getWorksGroupingSuggestions().subscribe(t=>{this.combineSuggestion=t})}trackByWorkGroup(t,i){return i.defaultPutCode}pageEvent(t){this.paginationLength=t.length,this.paginationLoading=!0,this.userRecordContext.offset=t.pageIndex*t.pageSize,this.userRecordContext.pageSize=t.pageSize,this.userRecordContext.publicRecordId=this.isPublicRecord,this._announce.liveAnnouncePagination(t,this.regionWorks),this.loadWorks()}sortEvent(t){this.paginationLoading=!0,this.userRecordContext.publicRecordId=this.isPublicRecord,this.userRecordContext.sort=t.type,this.userRecordContext.sortAsc=\"asc\"===t.direction,this.loadWorks()}loadWorks(){(this.workGroup.totalGroups>this.workGroup.groups.length||this.paginationPageSize!==this.defaultPageSize)&&(this.userRecordContext.forceReload=!0),this._works.changeUserRecordContext(this.userRecordContext).subscribe(()=>{this.paginationLoading=!1})}combine(){this.openModal(nl,this.selectedWorks)}delete(){this.openModal(Nn,this.selectedWorks)}export(){this.openModal(Dn,this.selectedWorks)}exportAllWorks(){this.openModal(Dn,void 0,!0)}visibility(){this.openModal(fl,this.selectedWorks)}checked(t){this.selectedWorks=[],this.appWorkStacks.forEach(i=>{i.panelsComponent.forEach(r=>{r.selected=t.checked,t.checked&&this.selectedWorks.push(r.putCode)})})}openModal(t,i,r){this.checked({checked:!1,source:void 0}),this.selectedWorks=[],this.selectAll=!1,this._platform.get().pipe((0,k.P)()).subscribe(a=>{const s=this._dialog.open(t,{width:\"850px\",maxWidth:a.tabletOrHandset?\"99%\":\"80vw\"});s.componentInstance.putCodes=i,s.componentInstance.type=\"works\",s.componentInstance.selectedAll=r,s.componentInstance.totalWorks=this.workGroup.totalGroups,s.componentInstance.workGroups=this.workGroup.groups})}checkboxChangeWorkStackGroup(t){this.selectedWorks.includes(t.putCode)?!1===t.checked&&(this.selectedWorks=this.selectedWorks.filter(i=>i!==t.putCode)):this.selectedWorks.push(t.putCode)}filteredWorks(){const t=[];return this.selectedWorks.forEach(i=>{this.workGroup.groups.forEach(r=>{r.works.forEach(a=>{a.putCode.value===i&&t.push(a)})})}),t}openManageSimilarWorksModal(){this._dialog.open(Ml,{width:\"850px\",maxWidth:this.platform.tabletOrHandset?\"99%\":\"80vw\",data:this.combineSuggestion}).afterClosed().subscribe()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(J.on),e.Y36(D.tu),e.Y36(H.B),e.Y36(z.Y),e.Y36(xn.ye),e.Y36(yn.w),e.Y36(re.b))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-stack-group\"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Uc,5),e.Gf(Zc,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.selectAllCheckbox=r),e.iGM(r=e.CRH())&&(i.appWorkStacks=r)}},inputs:{userInfo:\"userInfo\",isPublicRecord:\"isPublicRecord\",expandedContent:\"expandedContent\"},outputs:{expandedContentChange:\"expandedContentChange\",total:\"total\"},decls:1,vars:1,consts:function(){let n,t,i,r,a,s,l,c,u,O,f;return n=\"Select all\",t=\"Items currently selected\",i=\"Actions\",r=\"Combine works\",a=\"Export works\",s=\"Export all works\",l=\"Set visibility\",c=\"Delete works\",u=\"Manage similar works\",O=\"Add your research outputs such as publications, data sets, conference presentations and more.\",f=\"Learn more about adding works to your ORCID record\",[[\"id\",\"works\",\"role\",\"region\",4,\"ngIf\"],[\"id\",\"works\",\"role\",\"region\"],[\"id\",\"cy-works-panels\",1,\"row\",3,\"userRecord\",\"title\",\"currentAmount\",\"total\",\"isPublicRecord\",\"expandedContent\",\"sortTypes\",\"sortType\",\"addMenuOptions\",\"type\",\"expandedContentChange\",\"sort\"],[\"mode\",\"indeterminate\",4,\"ngIf\"],[3,\"length\",\"pageSize\",\"pageSizeOptions\",\"pageIndex\",\"disabled\",\"page\",4,\"ngIf\"],[4,\"ngIf\"],[\"mode\",\"indeterminate\"],[3,\"length\",\"pageSize\",\"pageSizeOptions\",\"pageIndex\",\"disabled\",\"page\"],[\"class\",\"row works-buttons orc-font-body-small\",4,\"ngIf\"],[3,\"userRecord\",\"isPublicRecord\",\"workStack\",\"userInfo\",\"selectAll\",\"checkboxChangeWorkStackOutput\",4,\"ngFor\",\"ngForOf\",\"ngForTrackBy\"],[1,\"row\",\"works-buttons\",\"orc-font-body-small\"],[1,\"select-all\"],[3,\"aria-label\",\"ngModel\",\"ngModelOptions\",\"change\",\"ngModelChange\"],n,[1,\"items-selected\"],t,[1,\"controls\"],[\"mat-button\",\"\",1,\"orc-font-body-small\",3,\"matMenuTriggerFor\"],[1,\"action\"],i,[1,\"large-material-icon\"],[\"menu\",\"matMenu\"],[\"mat-menu-item\",\"\",3,\"disabled\",\"click\"],r,a,[\"mat-menu-item\",\"\",3,\"click\"],s,l,c,[\"mat-raised-button\",\"\",\"color\",\"primary\",\"class\",\"text-align-center\",3,\"click\",4,\"ngIf\"],[\"mat-raised-button\",\"\",\"color\",\"primary\",1,\"text-align-center\",3,\"click\"],u,[3,\"userRecord\",\"isPublicRecord\",\"workStack\",\"userInfo\",\"selectAll\",\"checkboxChangeWorkStackOutput\"],[\"appWorkStacks\",\"\"],[1,\"orc-font-body-small\"],[1,\"empty\"],O,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006973133\",1,\"underline\"],f]},template:function(t,i){1&t&&e.YNc(0,zc,8,17,\"section\",0),2&t&&e.Q6J(\"ngIf\",(null==i.workGroup?null:i.workGroup.groups)&&!(i.isPublicRecord&&0===(null==i.workGroup||null==i.workGroup.groups?null:i.workGroup.groups.length)))},dependencies:[p.sg,p.O5,d.JJ,d.On,he,y.Hw,A.eB,Je.cl,me.eI,de.W0,de.tN,de.D8,oe.FC,$c],styles:[\"[_nghost-%COMP%]{width:100%}app-work-stack[_ngcontent-%COMP%]{margin-bottom:24px}app-work-stack[_ngcontent-%COMP%]:first-child{margin-top:24px}app-work-stack[_ngcontent-%COMP%]:last-child{margin-bottom:0}p.empty[_ngcontent-%COMP%]{margin-bottom:0}.works-buttons[_ngcontent-%COMP%]{margin:16px}.works-buttons[_ngcontent-%COMP%]   .select-all[_ngcontent-%COMP%]{margin-left:10px;margin-right:20px}.works-buttons[_ngcontent-%COMP%]   .items-selected[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.works-buttons[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;align-items:center}.works-buttons[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:200px;border:solid 1px;display:inline-block;text-align:start}.works-buttons[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;top:20%;right:5%}.columns-4   [_nghost-%COMP%]   .works-buttons[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{flex-direction:column}.columns-4   [_nghost-%COMP%]   .works-buttons[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-inline-start:8px;height:38px;margin-top:6px}  button.text-align-center{text-align:center!important;white-space:normal;width:auto!important;height:auto!important}button.mat-menu-item[_ngcontent-%COMP%]{max-width:350px;white-space:normal;height:auto!important}\",\".controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-color:#bdbdbd!important}\"]}),_})();const Vc=function(o){return{mobile:o}},jc=function(o){return{\"col l5 m6 s4\":o}};let ed=(()=>{var o;class _{constructor(t,i,r){this.router=t,this._titleService=i,this._platform=r,this.$destroy=new w.xQ,this.titleNotFound=\"404 - ORCID record not found\",i.setTitle(this.titleNotFound),r.get().pipe((0,x.R)(this.$destroy)).subscribe(a=>{this.platform=a})}ngOnInit(){}goto(t){this.router.navigate([t])}ngOnDestroy(){this._titleService.setTitle(\"ORCID\")}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(_e.F0),e.Y36(Tn.Dx),e.Y36(D.tu))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-not-found\"]],decls:30,vars:6,consts:function(){let n,t,i,r,a,s,l,c,u,O;return n=\"We\\\\u2019re really sorry, we can\\\\u2019t find the ORCID record you\\\\u2019re looking for.\",t=\"What happened?\",i=\"If you typed in the URL or ORCID iD by hand\",r=\"Please check that the ORCID iD - the 16-digit number at the end of the URL - is correct. A correctly-formatted ORCID URL looks like this: https://orcid.org/1234-5678-9101-1121\",a=\"If you followed a link to this record from another site or service\",s=\"Please report the broken link to the site or service you came from so they can fix it.\",l=\"If you have previously bookmarked this record and it has now stopped working\",c=\"Please get in touch with our support team via the Help button below. They can help you find the record you are looking for.\",u=\"What to do next\",O=\"Try using our advanced search to find researchers by their name or ORCID iD\",[[\"id\",\"main\"],[1,\"container\",3,\"ngClass\"],[1,\"row\",\"space-around\"],[3,\"ngClass\"],[\"src\",\"assets/vectors/orcid.logo.icon.svg\",\"alt\",\"orcid logo\"],[1,\"orc-font-heading-small\"],n,[1,\"orc-font-body-large\"],t,[1,\"orc-font-body-small\"],[1,\"if-you\"],i,r,a,s,l,c,u,[1,\"search\"],[1,\"underline\",\"orc-font-body-small\",3,\"click\"],O]},template:function(t,i){1&t&&(e.TgZ(0,\"main\",0)(1,\"div\",1)(2,\"div\",2)(3,\"div\",3),e._UZ(4,\"img\",4),e.TgZ(5,\"h2\",5),e.SDv(6,6),e.qZA(),e.TgZ(7,\"p\",7),e.SDv(8,8),e.qZA(),e.TgZ(9,\"div\",9)(10,\"div\",10)(11,\"b\"),e.SDv(12,11),e.qZA(),e.TgZ(13,\"p\"),e.SDv(14,12),e.qZA()(),e.TgZ(15,\"div\",10)(16,\"b\"),e.SDv(17,13),e.qZA(),e.TgZ(18,\"p\"),e.SDv(19,14),e.qZA()(),e.TgZ(20,\"div\",10)(21,\"b\"),e.SDv(22,15),e.qZA(),e.TgZ(23,\"p\"),e.SDv(24,16),e.qZA()()(),e.TgZ(25,\"p\",7),e.SDv(26,17),e.qZA(),e.TgZ(27,\"div\",18)(28,\"a\",19),e.NdJ(\"click\",function(){return i.goto(\"/orcid-search/search\")}),e.SDv(29,20),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J(\"ngClass\",e.VKq(2,Vc,!i.platform.columns12)),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(4,jc,!i.platform.columns12)))},dependencies:[p.mk,v.t],styles:[\".container[_ngcontent-%COMP%]{max-width:664px;padding:0!important}.container[_ngcontent-%COMP%], .mobile[_ngcontent-%COMP%]{padding:0 12px!important}img[_ngcontent-%COMP%]{display:block;height:64px;width:64px;margin:64px auto 33px}h2[_ngcontent-%COMP%]{margin-bottom:32px}.if-you[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:24px}.search[_ngcontent-%COMP%]{margin-top:16px}\"]}),_})();function nd(o,_){if(1&o&&e._UZ(0,\"app-side-bar\",10),2&o){const n=e.oxw(2);e.Q6J(\"isPublicRecord\",n.publicOrcid)(\"hideOrcidId\",!0)}}function td(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",23),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.switchPanelsState())}),e.SDv(1,24),e.qZA()}if(2&o){const n=e.oxw(4);e.uIk(\"aria-label\",n.expandAllActivitiesArialLabel)}}function od(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",23),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(4);return e.KtG(i.switchPanelsState())}),e.SDv(1,25),e.qZA()}if(2&o){const n=e.oxw(4);e.uIk(\"aria-label\",n.collapseAllActivitiesArialLabel)}}function id(o,_){if(1&o&&(e.TgZ(0,\"div\",18)(1,\"h2\",19),e.SDv(2,20),e.qZA(),e.TgZ(3,\"div\",21),e.YNc(4,td,2,1,\"button\",22),e.YNc(5,od,2,1,\"button\",22),e.qZA()()),2&o){const n=e.oxw(3);e.xp6(4),e.Q6J(\"ngIf\",!n.globalExpandState),e.xp6(1),e.Q6J(\"ngIf\",n.globalExpandState)}}function _d(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"section\",11),e.YNc(2,id,6,2,\"div\",12),e.TgZ(3,\"app-affiliations\",13),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContentUpdate(i))})(\"total\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.affiliationsCount(i))}),e.qZA(),e.TgZ(4,\"app-fundings\",14),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContentUpdate(i))})(\"total\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.affiliationsCount(i))}),e.qZA(),e.TgZ(5,\"app-research-resources\",15),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContentUpdate(i))})(\"total\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.affiliationsCount(i,\"RESEARCH_RESOURCE\"))}),e.qZA(),e.TgZ(6,\"app-work-stack-group\",16),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContentUpdate(i))})(\"total\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.affiliationsCount(i))}),e.qZA(),e.TgZ(7,\"app-peer-reviews\",17),e.NdJ(\"expandedContentChange\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.expandedContentUpdate(i))})(\"total\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.affiliationsCount(i))}),e.qZA()(),e.BQk()}if(2&o){const n=e.oxw(2);e.xp6(1),e.uIk(\"aria-label\",n.regionActivities),e.xp6(1),e.Q6J(\"ngIf\",!(n.publicOrcid&&0===n.affiliations)),e.xp6(1),e.Q6J(\"userInfo\",n.userInfo)(\"isPublicRecord\",n.publicOrcid)(\"expandedContent\",n.expandedContent),e.xp6(1),e.Q6J(\"userInfo\",n.userInfo)(\"isPublicRecord\",n.publicOrcid)(\"expandedContent\",n.expandedContent),e.xp6(1),e.Q6J(\"isPublicRecord\",n.publicOrcid)(\"expandedContent\",n.expandedContent),e.xp6(1),e.Q6J(\"userInfo\",n.userInfo)(\"isPublicRecord\",n.publicOrcid)(\"expandedContent\",n.expandedContent),e.xp6(1),e.Q6J(\"userInfo\",n.userInfo)(\"isPublicRecord\",n.publicOrcid)(\"expandedContent\",n.expandedContent)}}function rd(o,_){1&o&&(e.TgZ(0,\"div\",28)(1,\"mat-icon\"),e._uU(2,\"error\"),e.qZA(),e.ynx(3),e.SDv(4,29),e.BQk(),e.qZA())}const ad=function(o){return{\"last-modified\":o}};function sd(o,_){if(1&o&&(e.TgZ(0,\"div\",30)(1,\"i\")(2,\"span\"),e.SDv(3,31),e.qZA(),e._uU(4),e.ALo(5,\"date\"),e.qZA()()),2&o){const n=e.oxw(3);e.Q6J(\"ngClass\",e.VKq(6,ad,0===n.affiliations)),e.xp6(4),e.hij(\" \",e.Dn7(5,2,null==n.userRecord?null:n.userRecord.lastModifiedTime,\"medium\",\"UTC\"),\" UTC \")}}function ld(o,_){if(1&o&&(e.ynx(0),e.YNc(1,rd,5,0,\"div\",26),e.YNc(2,sd,6,8,\"div\",27),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",n.publicOrcid&&0===n.affiliations),e.xp6(1),e.Q6J(\"ngIf\",n.publicOrcid&&(null==n.userRecord?null:n.userRecord.lastModifiedTime))}}const cd=function(o){return{mobile:o}};function dd(o,_){if(1&o&&(e.ynx(0),e._UZ(1,\"app-top-bar-my-public-record-preview\",2),e.TgZ(2,\"div\",3)(3,\"div\",4),e._UZ(4,\"app-side-bar\",5),e.TgZ(5,\"div\",6)(6,\"app-main\"),e._UZ(7,\"app-top-bar\",7),e.YNc(8,nd,1,2,\"app-side-bar\",8),e.YNc(9,_d,8,16,\"ng-container\",1),e.YNc(10,ld,3,2,\"ng-container\",1),e._UZ(11,\"app-statistics\",9),e.qZA()()()(),e.BQk()),2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"isPublicRecord\",n.publicOrcid),e.xp6(3),e.Q6J(\"isPublicRecord\",n.publicOrcid)(\"orcidId\",n.platform.columns8||n.platform.columns4),e.xp6(3),e.Q6J(\"isPublicRecord\",n.publicOrcid)(\"loadingUserRecord\",n.loadingUserRecord),e.xp6(1),e.Q6J(\"ngIf\",n.platform.columns8||n.platform.columns4),e.xp6(1),e.Q6J(\"ngIf\",!n.recordWithIssues),e.xp6(1),e.Q6J(\"ngIf\",!(n.recordWithIssues||n.loadingUserRecord)),e.xp6(1),e.Q6J(\"ngClass\",e.VKq(9,cd,!n.platform.columns12))}}function pd(o,_){1&o&&e._UZ(0,\"app-not-found\")}const ud=[{path:\"\",component:(()=>{var o;class _{constructor(t,i,r,a,s,l,c,u,O,f,R,T,E){this._platform=i,this.route=r,this._record=a,this._openGraph=s,this._robotsMeta=l,this._helpHeroService=c,this._router=u,this._userSession=O,this.window=f,this._togglz=R,this._scriptService=T,this._canonocalUrlService=E,this.$destroy=new w.xQ,this.collapseAllActivitiesArialLabel=\"Collapse all activity sections\",this.expandAllActivitiesArialLabel=\"Expand all activity sections\",this.expandedContent={EMPLOYMENT:!0,EDUCATION_AND_QUALIFICATION:!0,INVITED_POSITION_AND_DISTINCTION:!0,MEMBERSHIP_AND_SERVICE:!0,FUNDING:!0,PEER_REVIEW:!0,RESEARCH_RESOURCE:!0,WORK:!0,PROFESSIONAL_ACTIVITIES:!0},this.expandedButton=!0,this.globalExpandState=!0,this.initMyOrcidParameter=!1,this.regionActivities=\"Activities\"}checkIfThisIsAPublicOrcid(){if(this.getRouteOrcidID())return this.publicOrcid=this.getRouteOrcidID()}getRouteOrcidID(){var t;if(null!=(t=this.route.parent)&&t.snapshot.url){const i=this.route.parent.snapshot.url[0];if(i&&i.toString()&&I.Rs.test(i.toString()))return i.toString()}}ngOnInit(){this.checkIfThisIsAPublicOrcid(),this.affiliations=0,this.publicOrcid&&this._canonocalUrlService.setCanonicalUrl(this.publicOrcid),this.route.fragment.pipe((0,Se.q)(1)).subscribe(t=>{t&&(this.fragment=t,this._router.navigate([],{fragment:\"\"}))}),this._platform.get().subscribe(t=>this.platform=t),this._record.getRecord({publicRecordId:this.publicOrcid||void 0,forceReload:!0,cleanCacheIfExist:!0}).pipe((0,x.R)(this.$destroy),(0,Ve.b)(t=>{var i,r,a;this.userInfo=null==t?void 0:t.userInfo,this.checkLoadingState(t),this.recordWithIssues=null==(i=null==t?void 0:t.userInfo)?void 0:i.RECORD_WITH_ISSUES,null!=t&&t.userInfo&&(this.readyForIndexing=\"true\"===(null==(r=null==t?void 0:t.userInfo)?void 0:r.READY_FOR_INDEXING),this.publicOrcid&&!this.readyForIndexing&&this._robotsMeta.disallowRobots()),this.userNotFound=null==(a=null==t?void 0:t.userInfo)?void 0:a.USER_NOT_FOUND,this.userRecord=t,!this.publicOrcid&&null!=t&&t.userInfo&&(this.setMyOrcidIdQueryParameter(),this.observeSessionUpdates()),this._openGraph.addOpenGraphData(t,{force:!0}),t.works&&t.fundings&&t.peerReviews&&t.researchResources&&t.affiliations&&t.externalIdentifier&&[\"works\",\"affiliations\",\"peer-reviews\",\"funding\",\"professional-activities\"].find(s=>s===this.fragment)&&setTimeout(()=>{document.querySelector(\"#\"+this.fragment).scrollIntoView(),this._router.navigate([],{fragment:this.fragment})}),t.externalIdentifier&&\"other-identifiers\"===this.fragment&&setTimeout(()=>{document.querySelector(\"#\"+this.fragment).scrollIntoView(),this._router.navigate([],{fragment:this.fragment})})}),(0,It.w)(()=>this._togglz.getTogglz().pipe((0,k.P)())),(0,Ve.b)(t=>{\"true\"===t.messages.ORCID_ANGULAR_HELP_HERO&&!this.publicOrcid&&!(this.recordWithIssues||this.userNotFound)&&this._helpHeroService.initializeHelpHero(this.userInfo,this.userRecord),\"true\"===t.messages.CRAZY_EGG&&this._scriptService.load({name:\"crazy-egg\",src:\"https://script.crazyegg.com/pages/scripts/0113/7579.js\"}).subscribe()})).subscribe()}observeSessionUpdates(){this._userSession.getUserSession().pipe((0,x.R)(this.$destroy)).subscribe(t=>{var i,r;((null==(i=null==t?void 0:t.userInfo)?void 0:i.REAL_USER_ORCID)!==this.userInfo.REAL_USER_ORCID||(null==(r=null==t?void 0:t.userInfo)?void 0:r.EFFECTIVE_USER_ORCID)!==this.userInfo.EFFECTIVE_USER_ORCID)&&this.window.location.reload()})}setMyOrcidIdQueryParameter(){var t;null!=(t=this.userInfo)&&t.EFFECTIVE_USER_ORCID&&!this.initMyOrcidParameter&&(this.initMyOrcidParameter=!0,this.platform.queryParameters.hasOwnProperty(\"justRegistered\")?this._router.navigate([\"/my-orcid\"],{queryParams:{orcid:this.userInfo.EFFECTIVE_USER_ORCID,justRegistered:\"true\"}}):this._router.navigate([\"/my-orcid\"],{queryParams:{...this.platform.queryParameters,orcid:this.userInfo.EFFECTIVE_USER_ORCID}}))}ngOnDestroy(){this.publicOrcid&&this._robotsMeta.restoreEnvironmentRobotsConfig(),this._openGraph.removeOpenGraphData(),this.$destroy.next(!0),this.$destroy.complete()}switchPanelsState(){this.globalExpandState=!this.globalExpandState,Object.keys(this.expandedContent).forEach(t=>{this.expandedContent[t]=this.globalExpandState})}expandedContentUpdate(t){this.globalExpandState=!Object.keys(t).filter(i=>\"RESEARCH_RESOURCE\"!==i||this.researchResourcePresent).map(i=>t[i]).some(i=>!i)}affiliationsCount(t,i){this.affiliations=this.affiliations+t,\"RESEARCH_RESOURCE\"===i&&(this.researchResourcePresent=!!t)}checkLoadingState(t){const i=Object.keys(t).filter(r=>\"preferences\"!==r&&\"lastModifiedTime\"!==r&&void 0===t[r]);this.loadingUserRecord=!!i.length}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(Rn.$),e.Y36(D.tu),e.Y36(_e.gz),e.Y36(H.B),e.Y36(yt),e.Y36(kt.Y),e.Y36(wt),e.Y36(_e.F0),e.Y36(j.KD),e.Y36(ie.m9),e.Y36(re.b),e.Y36($t),e.Y36(Zt))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-my-orcid\"]],decls:3,vars:2,consts:function(){let n,t,i,r,a;return n=\"Activities\",t=\"Expand all\",i=\"Collapse all\",r=\"No public information available.\",a=\"Record last modified\",[[\"id\",\"main\"],[4,\"ngIf\"],[3,\"isPublicRecord\"],[1,\"container\",\"no-padding\"],[1,\"row\"],[1,\"col\",\"l3\",\"m8\",\"s4\",3,\"isPublicRecord\",\"orcidId\"],[1,\"col\",\"l9\",\"m8\",\"s4\",\"content\"],[1,\"row\",3,\"isPublicRecord\",\"loadingUserRecord\"],[\"class\",\"col l3 m8 s4\",3,\"isPublicRecord\",\"hideOrcidId\",4,\"ngIf\"],[3,\"ngClass\"],[1,\"col\",\"l3\",\"m8\",\"s4\",3,\"isPublicRecord\",\"hideOrcidId\"],[\"id\",\"activities\",\"role\",\"region\"],[\"class\",\"activities\",4,\"ngIf\"],[\"id\",\"cy-affiliations\",3,\"userInfo\",\"isPublicRecord\",\"expandedContent\",\"expandedContentChange\",\"total\"],[\"id\",\"cy-fundings\",3,\"userInfo\",\"isPublicRecord\",\"expandedContent\",\"expandedContentChange\",\"total\"],[\"id\",\"cy-research-resources\",3,\"isPublicRecord\",\"expandedContent\",\"expandedContentChange\",\"total\"],[\"id\",\"cy-works\",3,\"userInfo\",\"isPublicRecord\",\"expandedContent\",\"expandedContentChange\",\"total\"],[\"id\",\"cy-peer-reviews\",3,\"userInfo\",\"isPublicRecord\",\"expandedContent\",\"expandedContentChange\",\"total\"],[1,\"activities\"],[1,\"activities-header\",\"orc-font-body\",\"col\"],n,[1,\"expand-buttons\"],[\"mat-button\",\"\",\"color\",\"primary\",\"type\",\"button\",3,\"click\",4,\"ngIf\"],[\"mat-button\",\"\",\"color\",\"primary\",\"type\",\"button\",3,\"click\"],t,i,[\"class\",\"no-public-info\",4,\"ngIf\"],[\"class\",\"orc-font-body-small\",3,\"ngClass\",4,\"ngIf\"],[1,\"no-public-info\"],r,[1,\"orc-font-body-small\",3,\"ngClass\"],a]},template:function(t,i){1&t&&(e.TgZ(0,\"main\",0),e.YNc(1,dd,12,11,\"ng-container\",1),e.YNc(2,pd,1,0,\"app-not-found\",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",!i.userNotFound),e.xp6(1),e.Q6J(\"ngIf\",i.userNotFound))},dependencies:[p.mk,p.O5,Wt.P,y.Hw,A.eB,Gt,Kt.L,Lo,$o,yr,ua,Ga,Xs,Hc,ed,p.uU],styles:[\"[_nghost-%COMP%]{width:100%}h2[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:20px}app-main[_ngcontent-%COMP%]{padding-bottom:180px!important;max-width:100%}app-side-bar[_ngcontent-%COMP%]{padding-bottom:40px!important}app-statistics[_ngcontent-%COMP%]{position:absolute;right:24px;bottom:148px;justify-content:flex-end}.content[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:32px;padding-inline-start:16px}.container[_ngcontent-%COMP%]{margin-bottom:-140px}.mobile[_ngcontent-%COMP%]{bottom:400px!important}.activities[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.no-public-info[_ngcontent-%COMP%]{display:flex;margin-top:20px;align-items:center}.no-public-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-inline-end:4px}.last-modified[_ngcontent-%COMP%]{margin-top:20px}\",\".no-public-info[_ngcontent-%COMP%]{color:#747476}\"]}),_})()}];let gd=(()=>{var o;class _{}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275mod=e.oAB({type:o}),o.\\\\u0275inj=e.cJS({imports:[_e.Bz.forChild(ud),_e.Bz]}),_})();function fd(o,_){if(1&o){const n=e.EpF();e.ynx(0),e._uU(1),e.TgZ(2,\"a\",4),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.toggle(i))}),e.SDv(3,5),e.qZA(),e.BQk()}if(2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\" \",n.description.substring(0,125)+\"...\",\" \")}}function Od(o,_){if(1&o){const n=e.EpF();e.ynx(0),e._uU(1),e._UZ(2,\"br\"),e.TgZ(3,\"a\",4),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.toggle(i))}),e.SDv(4,6),e.qZA(),e.BQk()}if(2&o){const n=e.oxw(2).$implicit;e.xp6(1),e.hij(\" \",n.description,\" \")}}function Cd(o,_){if(1&o&&(e.ynx(0),e.YNc(1,fd,4,1,\"ng-container\",3),e.YNc(2,Od,5,1,\"ng-container\",3),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J(\"ngIf\",!n.show),e.xp6(1),e.Q6J(\"ngIf\",n.show)}}function Rd(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",n.description,\" \")}}function Td(o,_){if(1&o&&(e.TgZ(0,\"div\")(1,\"h2\",1)(2,\"a\",2),e._uU(3),e.qZA()(),e.TgZ(4,\"p\",1),e.YNc(5,Cd,3,2,\"ng-container\",3),e.YNc(6,Rd,2,1,\"ng-container\",3),e.qZA()()),2&o){const n=_.$implicit,t=e.oxw();e.xp6(2),e.Q6J(\"href\",t.openImportWizardUrlFilter(n),e.LSH),e.xp6(1),e.hij(\" \",n.name,\" \"),e.xp6(2),e.Q6J(\"ngIf\",n.description.length>125),e.xp6(1),e.Q6J(\"ngIf\",n.description.length<125)}}let pn=(()=>{var o;class _{constructor(){}ngOnInit(){}openImportWizardUrlFilter(t){return\"RETIRED\"===t.status?t.clientWebsite:V.N.BASE_URL+\"oauth/authorize?client_id=\"+t.id+\"&response_type=code&scope=\"+t.scopes+\"&redirect_uri=\"+t.redirectUri}toggle(t){t.show=!t.show}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-search-link-wizard\"]],inputs:{recordImportWizards:\"recordImportWizards\"},decls:1,vars:1,consts:function(){let n,t;return n=\"Show more\",t=\"Show less\",[[4,\"ngFor\",\"ngForOf\"],[1,\"orc-font-body-small\"],[\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",3,\"href\"],[4,\"ngIf\"],[1,\"underline\",3,\"click\"],n,t]},template:function(t,i){1&t&&e.YNc(0,Td,7,4,\"div\",0),2&t&&e.Q6J(\"ngForOf\",i.recordImportWizards)},dependencies:[p.sg,p.O5,v.t]}),_})();var $n=g(53075),md=g(65166);class Un{static fundedByInvalidRelationship(){return _=>{var n,t;return\"funded-by\"===(null==(n=_.get(\"externalRelationship\"))?void 0:n.value)?[\"grant_number\",\"doi\",\"uri\",\"proposal-id\"].indexOf(null==(t=_.get(\"externalIdentifierType\"))?void 0:t.value)>=0?null:{funded_by_invalid:!0}:null}}static versionOfInvalidRelationship(_){return n=>{var t;if(\"version-of\"===(null==(t=n.get(\"externalRelationship\"))?void 0:t.value)){let i=!1;if(_.controls.forEach(r=>{var a;\"self\"===(null==(a=r.get(\"externalRelationship\"))?void 0:a.value)&&(i=!0)}),!i)return{version_of_invalid:!0}}return null}}}function Ed({value:o}){const _=null==o?void 0:o.citation,n=null==o?void 0:o.citationType;return _&&!n?{citationType:!0}:!_&&n?{citation:!0}:null}var Sd=g(2780),hd=g(47354);function Nd(o,_){1&o&&(e.TgZ(0,\"p\",112)(1,\"span\",10),e._uU(2,\"*\"),e.qZA(),e.ynx(3),e.SDv(4,113),e.BQk(),e.qZA())}function Md(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.ALo(2,\"recordWorkTypeLabel\"),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.value),e.xp6(1),e.hij(\" \",e.lcZ(2,2,n.value),\" \")}}function Pd(o,_){if(1&o&&(e.TgZ(0,\"mat-optgroup\",114),e.ALo(1,\"recordWorkCategoryLabel\"),e.YNc(2,Md,3,4,\"mat-option\",33),e.ALo(3,\"keyvalue\"),e.qZA()),2&o){const n=_.$implicit;e.s9C(\"label\",e.lcZ(1,2,n.category)),e.xp6(2),e.Q6J(\"ngForOf\",e.lcZ(3,4,n.types))}}function bd(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,116),e.qZA())}function Ad(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,117),e.qZA())}function Id(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,118),e.qZA())}function xd(o,_){1&o&&(e.TgZ(0,\"mat-icon\",119),e._uU(1,\"add_circle_outline\"),e.qZA())}function yd(o,_){1&o&&(e.TgZ(0,\"mat-icon\",120),e._uU(1,\"remove_circle_outline\"),e.qZA())}function kd(o,_){1&o&&(e.ynx(0),e.SDv(1,121),e.BQk())}function vd(o,_){1&o&&(e.ynx(0),e.SDv(1,122),e.BQk())}function Dd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,124),e.qZA())}function wd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,125),e.qZA())}function Ld(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.value),e.xp6(1),e.hij(\" \",n.key,\" \")}}function $d(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,126),e.qZA())}function Ud(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,127),e.qZA())}function Zd(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,128),e.qZA())}function Wd(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n),e.xp6(1),e.hij(\" \",n,\" \")}}function Fd(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.ALo(2,\"trailingZeros\"),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n),e.xp6(1),e.hij(\" \",e.lcZ(2,2,n),\" \")}}function Gd(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.ALo(2,\"trailingZeros\"),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n),e.xp6(1),e.hij(\" \",e.lcZ(2,2,n),\" \")}}function Kd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,129),e.qZA())}function Bd(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,130),e.qZA())}function Qd(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,131),e.qZA())}function Jd(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.key),e.xp6(1),e.hij(\" \",n.value,\" \")}}function Xd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,132),e.qZA())}function Yd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,133),e.qZA())}function qd(o,_){1&o&&(e.TgZ(0,\"mat-error\",123),e.SDv(1,134),e.qZA())}function zd(o,_){if(1&o){const n=e.EpF();e.ynx(0,137),e.TgZ(1,\"app-work-external-identifiers-edit\",138),e.NdJ(\"cancelEvent\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.cancelExternalIdEdit(i))}),e.qZA(),e.BQk()}if(2&o){const n=e.oxw().index,t=e.oxw(2);e.Q6J(\"formGroupName\",n),e.xp6(1),e.s9C(\"id\",\"cy-external-ids-edit\"+n),e.Q6J(\"externalIdForm\",t.workIdentifiersFormArray.controls[n])(\"workIdTypes\",t.workIdTypes)(\"index\",n)}}function Hd(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"app-work-external-identifiers-view-only\",139),e.NdJ(\"edit\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.workIdentifiersFormArrayDisplayState[i]=!0)})(\"delete\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.deleteWorkId(i))}),e.qZA(),e.BQk()}if(2&o){const n=e.oxw().index,t=e.oxw(2);e.xp6(1),e.Q6J(\"externalIdForm\",t.workIdentifiersFormArray.controls[n])(\"workIdentifier\",t.workIdentifiersFormArray.controls[n].value)}}function Vd(o,_){if(1&o&&(e.TgZ(0,\"div\",135),e.YNc(1,zd,2,5,\"ng-container\",136),e.YNc(2,Hd,2,2,\"ng-container\",14),e.qZA()),2&o){const n=_.index,t=e.oxw(2);e.xp6(1),e.Q6J(\"ngIf\",t.workIdentifiersFormArrayDisplayState[n]),e.xp6(1),e.Q6J(\"ngIf\",!t.workIdentifiersFormArrayDisplayState[n])}}function jd(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",15)(1,\"a\",140),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.addOtherWorkId())}),e.TgZ(2,\"mat-icon\",141),e._uU(3,\"add_circle_outline\"),e.qZA(),e.TgZ(4,\"span\",23),e.SDv(5,142),e.qZA()()()}}function ep(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",15)(1,\"a\",143),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.addOtherWorkId())}),e.TgZ(2,\"mat-icon\",141),e._uU(3,\"add_circle_outline\"),e.qZA(),e.TgZ(4,\"span\",23),e.SDv(5,144),e.qZA()()()}}function np(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.value),e.xp6(1),e.hij(\" \",n.key,\" \")}}function tp(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",115),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.value),e.xp6(1),e.hij(\" \",n.key,\" \")}}const le=function(o,_){return{\"orc-font-body\":o,\"orc-font-body-large\":_}},ce=function(o){return{error:o}};function op(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"form\",1)(1,\"section\",2)(2,\"div\",3)(3,\"h2\",4),e.SDv(4,5),e.qZA(),e.YNc(5,Nd,5,0,\"p\",6),e.qZA(),e._UZ(6,\"hr\"),e.TgZ(7,\"div\",7)(8,\"label\",8)(9,\"strong\"),e.SDv(10,9),e.qZA(),e.TgZ(11,\"span\",10),e._uU(12,\"*\"),e.qZA()(),e.TgZ(13,\"mat-form-field\",11)(14,\"mat-select\",12),e.NdJ(\"selectionChange\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.$workTypeUpdateEvent.next())}),e.YNc(15,Pd,4,6,\"mat-optgroup\",13),e.qZA(),e.YNc(16,bd,2,0,\"mat-error\",14),e.qZA()(),e.TgZ(17,\"div\")(18,\"div\",15)(19,\"label\",16)(20,\"strong\"),e.SDv(21,17),e.qZA(),e.TgZ(22,\"span\",10),e._uU(23,\"*\"),e.qZA()()(),e.TgZ(24,\"mat-form-field\",18),e._UZ(25,\"input\",19),e.YNc(26,Ad,2,0,\"mat-error\",14),e.YNc(27,Id,2,0,\"mat-error\",14),e.qZA()(),e.TgZ(28,\"div\",15)(29,\"a\",20),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.showTranslationTitle=!i.showTranslationTitle)}),e.YNc(30,xd,2,0,\"mat-icon\",21),e.YNc(31,yd,2,0,\"mat-icon\",22),e.TgZ(32,\"span\",23),e.YNc(33,kd,2,0,\"ng-container\",14),e.YNc(34,vd,2,0,\"ng-container\",14),e.qZA()()(),e.TgZ(35,\"div\",24)(36,\"div\")(37,\"div\",15)(38,\"label\",25)(39,\"strong\"),e.SDv(40,26),e.qZA()()(),e.TgZ(41,\"mat-form-field\",18),e._UZ(42,\"input\",27),e.qZA(),e.YNc(43,Dd,2,0,\"mat-error\",28),e.YNc(44,wd,2,0,\"mat-error\",28),e.qZA(),e.TgZ(45,\"div\")(46,\"div\",15)(47,\"label\",29)(48,\"strong\"),e.SDv(49,30),e.qZA()()(),e.TgZ(50,\"div\",31)(51,\"mat-form-field\",18)(52,\"mat-select\",32),e.YNc(53,Ld,2,2,\"mat-option\",33),e.ALo(54,\"keyvalue\"),e.qZA()(),e.YNc(55,$d,2,0,\"mat-error\",28),e.qZA()()(),e.TgZ(56,\"div\")(57,\"div\",15)(58,\"label\",34)(59,\"strong\"),e.SDv(60,35),e.qZA()()(),e.TgZ(61,\"mat-form-field\",18),e._UZ(62,\"input\",36),e.YNc(63,Ud,2,0,\"mat-error\",14),e.qZA()(),e.TgZ(64,\"div\")(65,\"div\",15)(66,\"label\",37)(67,\"strong\"),e._uU(68),e.ALo(69,\"recordWorkTitleNameLabel\"),e.qZA()()(),e.TgZ(70,\"mat-form-field\",18),e._UZ(71,\"input\",38),e.YNc(72,Zd,2,0,\"mat-error\",14),e.qZA()(),e.ynx(73,39),e.TgZ(74,\"div\",15)(75,\"label\",40)(76,\"strong\"),e.SDv(77,41),e.qZA()()(),e.TgZ(78,\"div\",42)(79,\"div\",43)(80,\"label\",44),e.SDv(81,45),e.qZA(),e.TgZ(82,\"mat-form-field\",46)(83,\"mat-select\",47)(84,\"mat-option\",48),e.SDv(85,49),e.qZA(),e.YNc(86,Wd,2,2,\"mat-option\",33),e.qZA()()(),e.TgZ(87,\"div\",43)(88,\"label\",50),e.SDv(89,51),e.qZA(),e.TgZ(90,\"mat-form-field\",52)(91,\"mat-select\",53)(92,\"mat-option\",54),e.SDv(93,55),e.qZA(),e.YNc(94,Fd,3,4,\"mat-option\",33),e.qZA()()(),e.TgZ(95,\"div\",43)(96,\"label\",56),e.SDv(97,57),e.qZA(),e.TgZ(98,\"mat-form-field\",58)(99,\"mat-select\",59)(100,\"mat-option\",60),e.SDv(101,61),e.qZA(),e.YNc(102,Gd,3,4,\"mat-option\",33),e.qZA()()(),e.YNc(103,Kd,2,0,\"mat-error\",28),e.qZA(),e.BQk(),e.TgZ(104,\"div\")(105,\"div\",15)(106,\"label\",62)(107,\"strong\"),e.SDv(108,63),e.qZA()()(),e.TgZ(109,\"mat-form-field\",64),e._UZ(110,\"input\",65),e.YNc(111,Bd,2,0,\"mat-error\",14),e.YNc(112,Qd,2,0,\"mat-error\",14),e.TgZ(113,\"mat-hint\"),e.SDv(114,66),e.qZA()()()(),e.TgZ(115,\"section\",67)(116,\"div\",68)(117,\"h2\",69),e.SDv(118,70),e.qZA()(),e._UZ(119,\"hr\"),e.TgZ(120,\"div\",71)(121,\"div\",15)(122,\"label\",72)(123,\"strong\"),e.SDv(124,73),e.qZA()()(),e.TgZ(125,\"div\",31)(126,\"mat-form-field\",18)(127,\"mat-select\",74),e.YNc(128,Jd,2,2,\"mat-option\",33),e.ALo(129,\"keyvalue\"),e.qZA()(),e.YNc(130,Xd,2,0,\"mat-error\",28),e.qZA(),e.TgZ(131,\"div\")(132,\"div\",15)(133,\"label\",75)(134,\"strong\"),e.SDv(135,76),e.qZA()()(),e.TgZ(136,\"mat-form-field\",18),e._UZ(137,\"textarea\",77),e.qZA(),e.YNc(138,Yd,2,0,\"mat-error\",28),e.qZA(),e.TgZ(139,\"div\")(140,\"div\",15)(141,\"label\",78)(142,\"strong\"),e.SDv(143,79),e.qZA()()(),e.TgZ(144,\"mat-form-field\",80)(145,\"textarea\",81),e._uU(146,\"          \"),e.qZA(),e.YNc(147,qd,2,0,\"mat-error\",28),e.qZA()()()(),e.TgZ(148,\"section\",82)(149,\"div\",83)(150,\"h2\",84),e.SDv(151,85),e.qZA()(),e._UZ(152,\"hr\"),e.TgZ(153,\"div\",86),e.YNc(154,Vd,3,2,\"div\",87),e.YNc(155,jd,6,0,\"div\",88),e.YNc(156,ep,6,0,\"div\",88),e.qZA()(),e.TgZ(157,\"section\",89)(158,\"div\",90)(159,\"h2\",91),e.SDv(160,92),e.qZA()(),e._UZ(161,\"hr\")(162,\"app-work-contributor-roles\",93)(163,\"app-work-contributors\",93),e.qZA(),e.TgZ(164,\"section\",94)(165,\"div\",95)(166,\"h2\",96),e.SDv(167,97),e.qZA()(),e._UZ(168,\"hr\"),e.TgZ(169,\"div\")(170,\"div\",98)(171,\"label\",99)(172,\"strong\"),e.SDv(173,100),e.qZA()()(),e.TgZ(174,\"div\",15)(175,\"mat-form-field\",18)(176,\"mat-select\",101),e.YNc(177,np,2,2,\"mat-option\",33),e.ALo(178,\"keyvalue\"),e.qZA()()()(),e.TgZ(179,\"div\")(180,\"div\",15)(181,\"label\",102)(182,\"strong\"),e.SDv(183,103),e.qZA()()(),e.TgZ(184,\"div\",15)(185,\"mat-form-field\",18)(186,\"mat-select\",104),e.YNc(187,tp,2,2,\"mat-option\",33),e.ALo(188,\"sortBy\"),e.qZA()()()()(),e.TgZ(189,\"section\",105)(190,\"div\",90)(191,\"h2\",106),e.SDv(192,107),e.qZA()(),e._UZ(193,\"hr\"),e.TgZ(194,\"div\")(195,\"p\",108),e._uU(196),e.TgZ(197,\"strong\"),e._uU(198),e.ALo(199,\"visibilityStringLabel\"),e.qZA(),e._uU(200,\". \"),e.qZA(),e.TgZ(201,\"div\",109)(202,\"div\",110),e._UZ(203,\"app-visibility-selector\",111),e.qZA()()()()()}if(2&o){const n=e.oxw();e.Q6J(\"formGroup\",n.workForm),e.xp6(3),e.Q6J(\"ngClass\",e.WLB(85,le,!n.platform.columns12,n.platform.columns12)),e.xp6(2),e.Q6J(\"ngIf\",n.platform.columns12),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(88,ce,n.workForm.get(\"workType\").hasError(\"required\")&&n.workForm.get(\"workType\").touched)),e.xp6(6),e.s9C(\"placeholder\",n.ngOrcidSelectWorkType),e.xp6(1),e.Q6J(\"ngForOf\",n.workTypeByCategory),e.xp6(1),e.Q6J(\"ngIf\",n.workForm.get(\"workType\").hasError(\"required\")),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(90,ce,n.workForm.hasError(\"required\",\"title\")&&n.workForm.get(\"title\").touched)),e.xp6(7),e.Q6J(\"ngIf\",n.workForm.get(\"title\").hasError(\"required\")),e.xp6(1),e.Q6J(\"ngIf\",null==n.workForm.get(\"title\").errors?null:n.workForm.get(\"title\").errors.maxlength),e.xp6(3),e.Q6J(\"ngIf\",!n.showTranslationTitle),e.xp6(1),e.Q6J(\"ngIf\",n.showTranslationTitle),e.xp6(2),e.Q6J(\"ngIf\",!n.showTranslationTitle),e.xp6(1),e.Q6J(\"ngIf\",n.showTranslationTitle),e.xp6(1),e.Q6J(\"hidden\",!n.showTranslationTitle),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(92,ce,n.workForm.hasError(\"invalidTranslatedTitleContent\",\"translatedTitleGroup\"))),e.xp6(5),e.Q6J(\"ngIf\",n.workForm.hasError(\"invalidTranslatedTitleContent\",\"translatedTitleGroup\")),e.xp6(1),e.Q6J(\"ngIf\",null==n.workForm.get(\"translatedTitleGroup.translatedTitleContent\").errors?null:n.workForm.get(\"translatedTitleGroup.translatedTitleContent\").errors.maxlength),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(94,ce,n.workForm.hasError(\"invalidTranslatedTitleLanguage\",\"translatedTitleGroup\"))),e.xp6(5),e.s9C(\"placeholder\",n.ngOrcidSelectLanguage),e.xp6(1),e.Q6J(\"ngForOf\",e.lcZ(54,71,n.languageMap)),e.xp6(2),e.Q6J(\"ngIf\",n.workForm.hasError(\"invalidTranslatedTitleLanguage\",\"translatedTitleGroup\")),e.xp6(8),e.Q6J(\"ngIf\",null==n.workForm.get(\"subtitle\").errors?null:n.workForm.get(\"subtitle\").errors.maxlength),e.xp6(5),e.Oqu(e.lcZ(69,73,n.dynamicTitle)),e.xp6(4),e.Q6J(\"ngIf\",null==n.workForm.get(\"journalTitle\").errors?null:n.workForm.get(\"journalTitle\").errors.maxlength),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(96,ce,n.workForm.hasError(\"date\",\"startDateGroup\"))),e.xp6(8),e.s9C(\"placeholder\",n.ngOrcidYear),e.Q6J(\"aria-label\",n.ngOrcidYear),e.xp6(3),e.Q6J(\"ngForOf\",n.yearOptions),e.xp6(5),e.s9C(\"aria-label\",n.ngOrcidMonth),e.s9C(\"placeholder\",n.ngOrcidMonth),e.xp6(3),e.Q6J(\"ngForOf\",n.monthOptions),e.xp6(5),e.s9C(\"aria-label\",n.ngOrcidDay),e.s9C(\"placeholder\",n.ngOrcidDay),e.xp6(3),e.Q6J(\"ngForOf\",n.dayOptions),e.xp6(1),e.Q6J(\"ngIf\",null==n.workForm.get(\"publicationDate\").errors?null:n.workForm.get(\"publicationDate\").errors.date),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(98,ce,n.workForm.hasError(\"pattern\",\"url\")&&n.workForm.get(\"url\").touched)),e.xp6(5),e.Q6J(\"ngIf\",n.workForm.get(\"url\").hasError(\"pattern\")),e.xp6(1),e.Q6J(\"ngIf\",null==n.workForm.get(\"url\").errors?null:n.workForm.get(\"url\").errors.maxlength),e.xp6(4),e.Q6J(\"ngClass\",e.WLB(100,le,!n.platform.columns12,n.platform.columns12)),e.xp6(1),e.Q6J(\"ngClass\",e.WLB(103,le,!n.platform.columns12,n.platform.columns12)),e.xp6(5),e.Q6J(\"ngClass\",e.VKq(106,ce,n.workForm.hasError(\"citationType\",\"citationGroup\"))),e.xp6(5),e.s9C(\"placeholder\",n.ngOrcidSelectACitationType),e.xp6(1),e.Q6J(\"ngForOf\",e.lcZ(129,75,n.citationTypes)),e.xp6(2),e.Q6J(\"ngIf\",n.workForm.hasError(\"citationType\",\"citationGroup\")),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(108,ce,n.workForm.hasError(\"citation\",\"citationGroup\"))),e.xp6(5),e.Q6J(\"ngIf\",n.workForm.hasError(\"citation\",\"citationGroup\")),e.xp6(9),e.Q6J(\"ngIf\",null==n.workForm.get(\"citationGroup.shortDescription\").errors?null:n.workForm.get(\"citationGroup.shortDescription\").errors.maxlength),e.xp6(2),e.Q6J(\"ngClass\",e.WLB(110,le,!n.platform.columns12,n.platform.columns12)),e.xp6(1),e.Q6J(\"ngClass\",e.WLB(113,le,!n.platform.columns12,n.platform.columns12)),e.xp6(4),e.Q6J(\"ngForOf\",n.workIdentifiersFormArray.controls),e.xp6(1),e.Q6J(\"ngIf\",n.workIdentifiersFormArray.length),e.xp6(1),e.Q6J(\"ngIf\",!n.workIdentifiersFormArray.length),e.xp6(3),e.Q6J(\"ngClass\",e.WLB(116,le,!n.platform.columns12,n.platform.columns12)),e.xp6(3),e.Q6J(\"contributors\",null==n.work?null:n.work.contributorsGroupedByOrcid)(\"userRecord\",n.userRecord)(\"recordHolderAsContributor\",(null==n.work||null==n.work.putCode?null:n.work.putCode.value)||n.externalIdentifier),e.xp6(1),e.Q6J(\"contributors\",null==n.work?null:n.work.contributorsGroupedByOrcid)(\"userRecord\",n.userRecord)(\"recordHolderAsContributor\",(null==n.work||null==n.work.putCode?null:n.work.putCode.value)||n.externalIdentifier),e.xp6(3),e.Q6J(\"ngClass\",e.WLB(119,le,!n.platform.columns12,n.platform.columns12)),e.xp6(10),e.s9C(\"placeholder\",n.ngOrcidSelectLanguage),e.Q6J(\"aria-label\",n.languageLabelAriaLabel),e.xp6(1),e.Q6J(\"ngForOf\",e.lcZ(178,77,n.languageMap)),e.xp6(9),e.s9C(\"placeholder\",n.ngOrcidSelectACountryOrLocation),e.uIk(\"aria-label\",n.selectCountryLocationLabel),e.xp6(1),e.Q6J(\"ngForOf\",e.Dn7(188,79,n.countryCodes,\"asc\",\"key\")),e.xp6(4),e.Q6J(\"ngClass\",e.WLB(122,le,!n.platform.columns12,n.platform.columns12)),e.xp6(5),e.hij(\" \",n.ngOrcidDefaultVisibilityLabel,\" \"),e.xp6(2),e.Oqu(e.lcZ(199,83,n.defaultVisibility)),e.xp6(5),e.Q6J(\"itemTitle\",n.ariaLabelWork)}}let Ge=(()=>{var o;class _{constructor(t,i,r,a,s,l,c,u,O){this._fb=t,this._platform=i,this._workService=r,this._dialogRef=a,this._recordCountryService=s,this._snackBar=l,this._record=c,this._window=u,this.data=O,this.ngOrcidYear=\"Year\",this.ngOrcidMonth=\"Month\",this.ngOrcidDay=\"Day\",this.languageLabelAriaLabel=\"Select the language used in this form\",this.selectCountryLocationLabel=\"Select a country or location of publication\",this.ariaLabelWork=\"Work\",this.$workTypeUpdateEvent=new w.xQ,this.loading=!0,this.showTranslationTitle=!1,this.languageMap=m.Wy,this.yearOptions=Array(110).fill(0).map((f,R)=>R+(new Date).getFullYear()-108).reverse(),this.yearsEndDate=Array(120).fill(0).map((f,R)=>R+(new Date).getFullYear()-108).reverse(),this.monthOptions=Array(12).fill(0).map((f,R)=>R+1),this.dayOptions=Array(31).fill(0).map((f,R)=>R+1),this.citationTypes=m.Pe,this.dynamicTitle=m.MI.journalTitle,this.workIdentifiersFormArray=new d.vC([]),this.workIdentifiersFormArrayDisplayState=[],this.ngOrcidSelectWorkType=\"Select a work type\",this.ngOrcidSelectLanguage=\"Select a language\",this.ngOrcidSelectACitationType=\"Select a citation type\",this.ngOrcidSelectACountryOrLocation=\"Select a country or location\",this.ngOrcidDefaultVisibilityLabel=\"Control who can see this information by setting the visibility. Your default visibility is\",this.workTypeByCategory=[{category:m.Ns.publication,types:m.Jp},{category:m.Ns.conference,types:m.Uq},{category:m.Ns.intellectual_property,types:m.CH},{category:m.Ns.other_output,types:m.o$}]}ngOnInit(){this._recordCountryService.getCountryCodes().pipe((0,k.P)()).subscribe(t=>{this.countryCodes=t}),this._platform.get().subscribe(t=>{this.platform=t}),this.loadWorkForm(this.work),this._record.getPreferences().subscribe(t=>{this.defaultVisibility=t.default_visibility}),this.observeFormChanges(),this._workService.loadWorkIdTypes().subscribe(t=>{this.workIdTypes=t})}observeFormChanges(){this.workForm.get(\"workType\").valueChanges.pipe((0,$n.O)(this.workForm.value.workType)).subscribe(t=>{this.dynamicTitle=t?m.JT[t]:m.MI.journalTitle})}loadWorkForm(t){var i,r,a,s,l,c,u,O,f,R,T,E,C,N,M,L,W,F,G;this.workForm=this._fb.group({workType:[(null==(i=null==t?void 0:t.workType)?void 0:i.value)||\"\",[d.kI.required]],title:[(null==(r=null==t?void 0:t.title)?void 0:r.value)||\"\",[d.kI.required,d.kI.maxLength(I.$m)]],translatedTitleGroup:this._fb.group({translatedTitleContent:[(null==(a=null==t?void 0:t.translatedTitle)?void 0:a.content)||\"\",[d.kI.maxLength(I.$m)]],translatedTitleLanguage:[(null==(s=null==t?void 0:t.translatedTitle)?void 0:s.languageCode)||\"\",[]]},{validator:Sd.B}),subtitle:[(null==(l=null==t?void 0:t.subtitle)?void 0:l.value)||\"\",[d.kI.maxLength(I.$m)]],journalTitle:[(null==(c=null==t?void 0:t.journalTitle)?void 0:c.value)||\"\",[d.kI.maxLength(I.$m)]],publicationDate:this._fb.group({publicationDay:[Number(null==(u=null==t?void 0:t.publicationDate)?void 0:u.day)||\"\",[]],publicationMonth:[Number(null==(O=null==t?void 0:t.publicationDate)?void 0:O.month)||\"\",[]],publicationYear:[Number(null==(f=null==t?void 0:t.publicationDate)?void 0:f.year)||\"\",[]]},{validator:(0,md.sm)(\"publication\")}),url:[(null==(R=null==t?void 0:t.url)?void 0:R.value)||\"\",[d.kI.pattern(I.Oe),d.kI.maxLength(I.gW)]],citationGroup:this._fb.group({citationType:[(null==(E=null==(T=null==t?void 0:t.citation)?void 0:T.citationType)?void 0:E.value)||\"\",[]],citation:[(null==(N=null==(C=null==t?void 0:t.citation)?void 0:C.citation)?void 0:N.value)||\"\",[]],shortDescription:[(null==(M=null==t?void 0:t.shortDescription)?void 0:M.value)||\"\",[d.kI.maxLength(I.lb)]]},{validator:Ed}),workIdentifiers:new d.vC([]),languageCode:[(null==(L=null==t?void 0:t.languageCode)?void 0:L.value)||\"\",[]],countryCode:[(null==(W=null==t?void 0:t.countryCode)?void 0:W.value)||\"\",[]],visibility:[(null==(F=null==t?void 0:t.visibility)?void 0:F.visibility)||(null==(G=null==t?void 0:t.visibility)?void 0:G.visibility),[]]}),this.workIdentifiersFormArray=this.workForm.controls.workIdentifiers,null==t||t.workExternalIdentifiers.forEach(B=>{this.addOtherWorkId(B)})}externalIdentifierTypeAsyncValidator(t,i){return r=>this._workService.validateWorkIdTypes(i,r.value).pipe((0,we.U)(a=>{var s,l,c;return(null==(l=null==(s=t.controls.externalIdentifierUrl)?void 0:s.value)?void 0:l.length)>0&&t.controls.externalIdentifierUrl.value!==t.controls.externalIdentifierUrlWasBackendGenerated.value||t.controls.externalIdentifierId.value===t.controls.externalIdentifierIdStored.value||(a.generatedUrl&&a.generatedUrl!==t.controls.externalIdentifierUrl.value?(t.controls.externalIdentifierUrl.setValue(decodeURI(a.generatedUrl)),t.controls.externalIdentifierUrlWasBackendGenerated.setValue(decodeURI(a.generatedUrl))):(!a.validFormat||a.attemptedResolution&&!a.resolved)&&(null!=(c=this.work)&&c.putCode||t.controls.externalIdentifierUrl.setValue(\"\"))),a.attemptedResolution&&!a.resolved?{unResolved:!0}:a.validFormat?void 0:{validFormat:!0}}))}checkWorkIdentifiersChanges(t,i){const r=this.workIdentifiersFormArray.controls[t];(0,hd.T)(this.$workTypeUpdateEvent,r.controls.externalIdentifierType.valueChanges).pipe((0,$n.O)(r.controls.externalIdentifierType.value),(0,we.U)(a=>r.controls.externalIdentifierType.value)).subscribe(a=>{this.manageWorkIdentifierTypeUpdates(a,r)}),r.controls.externalIdentifierId.valueChanges.subscribe(a=>{this.manageWorkIdentifierIdUpdates(a,r)}),r.controls.externalRelationship.valueChanges.subscribe(()=>{this.manageWorkIdentyfiersRelationshipUpdates(i,r)}),r.controls.externalIdentifierUrl.valueChanges.subscribe(a=>{this.manageWorkIdentifierUrlUpdates(r,a)})}manageWorkIdentifierTypeUpdates(t,i){if(\"\"!==t){i.controls.externalIdentifierId.addValidators(d.kI.required),i.controls.externalIdentifierId.setAsyncValidators(this.externalIdentifierTypeAsyncValidator(i,t)),i.controls.externalIdentifierId.updateValueAndValidity();const r=this.getOrcidRecommendedRelationShip(t);r&&i.controls.externalRelationship.setValue(r)}else i.controls.externalIdentifierUrl.value||(i.controls.externalIdentifierId.removeValidators(d.kI.required),i.controls.externalIdentifierId.clearAsyncValidators(),i.controls.externalIdentifierId.updateValueAndValidity())}manageWorkIdentifierIdUpdates(t,i){t?(i.controls.externalIdentifierType.addValidators(d.kI.required),i.controls.externalIdentifierType.updateValueAndValidity({emitEvent:!1})):i.controls.externalIdentifierUrl.value||(i.controls.externalIdentifierType.removeValidators(d.kI.required),i.controls.externalIdentifierType.updateValueAndValidity({emitEvent:!1}))}manageWorkIdentyfiersRelationshipUpdates(t,i){t.controls.forEach(r=>{Object.is(r.controls.externalRelationship,i.controls.externalRelationship)||r.controls.externalRelationship.updateValueAndValidity({emitEvent:!1})})}manageWorkIdentifierUrlUpdates(t,i){i?(t.controls.externalIdentifierType.addValidators(d.kI.required),t.controls.externalIdentifierType.updateValueAndValidity(),t.controls.externalIdentifierId.addValidators(d.kI.required),t.controls.externalIdentifierId.updateValueAndValidity()):!t.controls.externalIdentifierType.value&&!t.controls.externalIdentifierId.value&&(t.controls.externalIdentifierType.removeValidators(d.kI.required),t.controls.externalIdentifierType.updateValueAndValidity(),t.controls.externalIdentifierId.removeValidators(d.kI.required),t.controls.externalIdentifierId.updateValueAndValidity())}addOtherWorkId(t){var r,a,s,l,c,u,O,f;this.workIdentifiersFormArrayDisplayState.push(!t);const i=this._fb.group({externalIdentifierType:[(null==(r=null==t?void 0:t.externalIdentifierType)?void 0:r.value)||\"\",[]],externalIdentifierId:[(null==(a=null==t?void 0:t.externalIdentifierId)?void 0:a.value)||\"\",[]],externalIdentifierUrl:[(null==(s=null==t?void 0:t.normalizedUrl)?void 0:s.value)||(null==(l=null==t?void 0:t.url)?void 0:l.value)||\"\",[d.kI.pattern(I.Oe)]],externalIdentifierIdStored:[(null==(c=null==t?void 0:t.externalIdentifierId)?void 0:c.value)||\"\"],externalIdentifierUrlWasBackendGenerated:[(null==(u=null==t?void 0:t.normalizedUrl)?void 0:u.value)||(null==(O=null==t?void 0:t.url)?void 0:O.value)||\"\"],externalRelationship:[(null==(f=null==t?void 0:t.relationship)?void 0:f.value)||m.uJ.self,[]]});i.setValidators([Un.fundedByInvalidRelationship(),Un.versionOfInvalidRelationship(this.workIdentifiersFormArray)]),this.workIdentifiersFormArray.push(i),this.checkWorkIdentifiersChanges(this.workIdentifiersFormArray.controls.length-1,this.workIdentifiersFormArray)}deleteWorkId(t){this.workIdentifiersFormArrayDisplayState.splice(t,1),this.workIdentifiersFormArray.removeAt(t)}saveEvent(){var r,a;this.workForm.markAllAsTouched();const t=(0,I.jO)(this.workForm),i=this.formHasOnlyAllowError(t);if(this.workForm.valid||i){const s={visibility:{visibility:this.workForm.value.visibility},publicationDate:{month:this.workForm.value.publicationDate.publicationMonth,day:this.workForm.value.publicationDate.publicationDay,year:this.workForm.value.publicationDate.publicationYear},shortDescription:{value:this.workForm.get(\"citationGroup.shortDescription\").value},url:{value:this.workForm.value.url},journalTitle:{value:this.workForm.value.journalTitle},languageCode:{value:this.workForm.value.languageCode?this.workForm.value.languageCode:null},citation:{citation:{value:this.workForm.get(\"citationGroup.citation\").value},citationType:{value:this.workForm.get(\"citationGroup.citationType\").value}},countryCode:{value:this.workForm.value.countryCode},workExternalIdentifiers:this.workIdentifiersFormArray.value.map(l=>({externalIdentifierId:{value:l.externalIdentifierId},externalIdentifierType:{value:l.externalIdentifierType},url:{value:l.externalIdentifierUrl},relationship:{value:l.externalRelationship}})),title:{value:this.workForm.value.title},subtitle:{value:this.workForm.value.subtitle},translatedTitle:{content:this.workForm.get(\"translatedTitleGroup.translatedTitleContent\").value,languageCode:this.workForm.get(\"translatedTitleGroup.translatedTitleLanguage\").value,errors:[]},workType:{value:this.workForm.value.workType},contributorsGroupedByOrcid:this.getContributors()};null!=(r=this.work)&&r.putCode&&(s.putCode=this.work.putCode),null!=(a=this.work)&&a.source&&(s.source=this.work.source),this._workService.save(s).subscribe(l=>{var c;(null==(c=null==l?void 0:l.errors)?void 0:c.length)>0?(this.loading=!1,this._snackBar.showValidationError(null==l?void 0:l.errors[0],\"Please review and fix the issue\")):this.closeEvent()})}else this._snackBar.showValidationError()}formHasOnlyAllowError(t){var i;return!(null===t||1!==Object.keys(t).length||null==(i=t.workIdentifiers)||!i.length)&&t.workIdentifiers.every(r=>!r||r&&1===Object.keys(r).length&&r.externalIdentifierId&&1===Object.keys(r.externalIdentifierId).length&&r.externalIdentifierId.unResolved)}cancelExternalIdEdit(t){!this.workIdentifiersFormArray.controls[t]||this.workIdentifiersFormArray.controls[t].value.externalIdentifierType||this.workIdentifiersFormArray.controls[t].value.externalIdentifierId?this.workIdentifiersFormArrayDisplayState[t]=!1:this.deleteWorkId(t)}getOrcidRecommendedRelationShip(t){let i=null;const r=this.workForm.get(\"workType\").value;return t&&r&&(\"isbn\"===t&&r===m.Jp.bookChapter?i=m.uJ[\"part-of\"]:\"isbn\"===t&&r===m.Jp.book?i=m.uJ.self:(\"issn\"===t||\"isbn\"===t&&[m.Jp.dictionaryEntry,m.Uq.conferencePaper,m.Jp.encyclopediaEntry].indexOf(r)>=0)&&(i=m.uJ[\"part-of\"])),(\"grant_number\"===t||\"proposal-id\"===t)&&(i=m.uJ[\"funded-by\"]),i}getContributors(){const t=this.workForm.get(\"contributors\");return null==t?void 0:t.controls.map(i=>{var l,c,u,O,f,R,T;const r={creditName:{content:null==(l=i.get(\"creditName\"))?void 0:l.value},contributorOrcid:{uri:null==(c=i.get([\"contributorOrcid\",\"uri\"]))?void 0:c.value,path:null==(u=i.get([\"contributorOrcid\",\"path\"]))?void 0:u.value}};let a=null;a=(null==(O=i.get([\"contributorOrcid\",\"path\"]))?void 0:O.value)===(null==(R=null==(f=this.userRecord)?void 0:f.userInfo)?void 0:R.EFFECTIVE_USER_ORCID)?this.workForm.get(\"roles\"):i.get(\"roles\");const s=null==(T=null==a?void 0:a.controls)?void 0:T.filter(E=>{var C,N,M,L;return(null==(C=null==E?void 0:E.value)?void 0:C.role)&&null!==this._workService.getContributionRoleByKey(null==(N=null==E?void 0:E.value)?void 0:N.role)&&\"no specified role\"!==(null==(L=this._workService.getContributionRoleByKey(null==(M=null==E?void 0:E.value)?void 0:M.role))?void 0:L.key)}).map(E=>{var M,L;const C=null==(M=null==E?void 0:E.value)?void 0:M.role;return(null==(L=this._workService.getContributionRoleByKey(C))?void 0:L.value)||C});return(null==s?void 0:s.length)>0&&(r.rolesAndSequences=[...s.map(E=>({contributorRole:E}))]),r})}closeEvent(){this._dialogRef.close()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(d.QS),e.Y36(D.tu),e.Y36(z.Y),e.Y36(J.hV),e.Y36(Pn.r),e.Y36(on.o),e.Y36(H.B),e.Y36(ie.m9),e.Y36(J.eJ))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-form\"]],inputs:{work:\"work\",userRecord:\"userRecord\",externalIdentifier:\"externalIdentifier\"},decls:1,vars:1,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E,C,N,M,L,W,F,G,B,b,be,Ae,Ie,xe,ye,ke,ve,De,P,zn,Hn,Vn,jn,et,nt,tt,ot,it,_t,rt,at;return n=\"Work details\",t=\"Work type\",i=\"Work title\",r=\"Work translated title\",a=\"Language of this title\",s=\"Work subtitle\",l=\"Publication date\",c=\"Year\",u=\"Year\",O=\"Month\",f=\"Month\",R=\"Day\",T=\"Day\",E=\"Link\",C=\"A link to more information about the work. Links should be in the full URL format e.g. http://www.website.com/page.html\",N=\"Citation\",M=\"Citation type\",L=\"Citation\",W=\"Citation description\",F=\"Work identifiers\",G=\"Contributors\",B=\"Other information\",b=\"Language used in this form\",be=\"Country/Location of publication\",Ae=\"Visibility\",Ie=\"Required information\",xe=\"Select a work type\",ye=\"Set a work title\",ke=\"Must be less than 1000 characters\",ve=\"Show translated title\",De=\"Hide translated title\",P=\"Please enter a translated title\",zn=\"Must be less than 1000 characters\",Hn=\"Please select a language\",Vn=\"Must be less than 1000 characters\",jn=\"Must be less than 1000 characters\",et=\"Invalid date\",nt=\"Invalid url\",tt=\"Must be less than 2000 characters\",ot=\"Select a citation type\",it=\"Select a citation\",_t=\"Must be less than 5000 characters\",rt=\"Add another identifier\",at=\"Add an identifier\",[[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[\"id\",\"work-detail\"],[1,\"title\",\"row\"],[\"id\",\"workDetailsLabel\",1,\"orc-font-body\",3,\"ngClass\"],n,[\"class\",\"required-information mat-caption\",4,\"ngIf\"],[\"id\",\"cy-work-types-div\"],[\"id\",\"work-type-label\",\"for\",\"cy-work-types\",1,\"row\",\"mat-caption\",3,\"ngClass\"],t,[1,\"required\"],[\"appearance\",\"outline\",\"id\",\"cy-work-types-form-field\",1,\"mat-form-field-min\",\"input-container\"],[\"id\",\"cy-work-types\",\"aria-labelledby\",\"work-type-label\",\"formControlName\",\"workType\",3,\"placeholder\",\"selectionChange\"],[3,\"label\",4,\"ngFor\",\"ngForOf\"],[4,\"ngIf\"],[1,\"row\"],[\"id\",\"work-title-label\",\"for\",\"title-input\",1,\"mat-caption\",3,\"ngClass\"],i,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"input-container\"],[\"id\",\"title-input\",\"matInput\",\"\",\"formControlName\",\"title\"],[\"id\",\"cy-translated-title-toggle-link\",1,\"col\",\"add-more\",\"no-gutters\",3,\"click\"],[\"class\",\"large-material-icon\",\"id\",\"cy-add-translated-title-icon\",4,\"ngIf\"],[\"class\",\"large-material-icon\",\"id\",\"cy-hide-translated-title-icon\",4,\"ngIf\"],[1,\"mat-body-1\"],[\"formGroupName\",\"translatedTitleGroup\",\"id\",\"cy-translation-title-group\",3,\"hidden\"],[\"id\",\"work-translate-title-label\",\"for\",\"given-names-input\",1,\"mat-caption\",3,\"ngClass\"],r,[\"aria-labelledby\",\"work-translate-title-label\",\"id\",\"cy-translated-title-content\",\"matInput\",\"\",\"formControlName\",\"translatedTitleContent\"],[\"class\",\"mat-caption\",4,\"ngIf\"],[\"for\",\"language-of-title-input\",\"id\",\"work-translate-language-label\",1,\"mat-caption\",3,\"ngClass\"],a,[1,\"select-error\"],[\"aria-labelledby\",\"work-translate-language-label\",\"id\",\"language-of-title-input\",\"formControlName\",\"translatedTitleLanguage\",3,\"placeholder\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[\"for\",\"work-subtitle-input\",\"id\",\"work-subtitle-label\",1,\"mat-caption\"],s,[\"id\",\"work-subtitle-input\",\"matInput\",\"\",\"formControlName\",\"subtitle\",\"aria-labelledby\",\"work-subtitle-label\"],[\"for\",\"cy-journal-title\",\"id\",\"journal-title-label\",1,\"mat-caption\"],[\"matInput\",\"\",\"formControlName\",\"journalTitle\",\"id\",\"cy-journal-title\",\"aria-labelledby\",\"journal-title-label\"],[\"formGroupName\",\"publicationDate\",\"id\",\"cy-publication-date-group\"],[\"id\",\"publication-date-label\",1,\"mat-caption\",3,\"ngClass\"],l,[\"id\",\"publication-date-group\",\"role\",\"group\",\"aria-labelledby\",\"publication-date-label\",1,\"input-container\",\"date\"],[1,\"col\",\"l4\",\"date\"],[\"for\",\"cy-start-date-year-sel\",1,\"sr-only\"],c,[\"appearance\",\"outline\",1,\"mat-form-field-min\"],[\"formControlName\",\"publicationYear\",\"id\",\"cy-start-date-year-sel\",3,\"aria-label\",\"placeholder\"],[\"id\",\"publication-year-label\",3,\"value\"],u,[\"for\",\"cy-start-date-month-sel\",1,\"sr-only\"],O,[\"id\",\"start-date-month-input\",\"appearance\",\"outline\",1,\"mat-form-field-min\"],[\"formControlName\",\"publicationMonth\",\"id\",\"cy-start-date-month-sel\",3,\"aria-label\",\"placeholder\"],[\"id\",\"publication-month-label\",3,\"value\"],f,[\"for\",\"cy-start-date-day-sel\",1,\"sr-only\"],R,[\"id\",\"start-date-day-input\",\"appearance\",\"outline\",1,\"mat-form-field-min\"],[\"formControlName\",\"publicationDay\",\"id\",\"cy-start-date-day-sel\",3,\"aria-label\",\"placeholder\"],[\"id\",\"publication-day-label\",3,\"value\"],T,[\"id\",\"linkLabel\",\"for\",\"url-input\",1,\"mat-caption\",3,\"ngClass\"],E,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"two-line-hint\",\"input-container\"],[\"aria-labelledby\",\"linkLabel\",\"id\",\"url-input\",\"matInput\",\"\",\"formControlName\",\"url\"],C,[\"id\",\"work-citation\"],[\"id\",\"citation\",1,\"title\",3,\"ngClass\"],[\"id\",\"citationLabel\",1,\"orc-font-body\",3,\"ngClass\"],N,[\"formGroupName\",\"citationGroup\",\"id\",\"cy-citation-group\"],[\"for\",\"cy-citation-type\",\"id\",\"citationType\",1,\"mat-caption\",\"title\",3,\"ngClass\"],M,[\"aria-labelledby\",\"citationType\",\"formControlName\",\"citationType\",\"id\",\"cy-citation-type\",3,\"placeholder\"],[\"for\",\"citation-input\",\"id\",\"citation-label\",1,\"mat-caption\",3,\"ngClass\"],L,[\"aria-labelledby\",\"citation-label\",\"id\",\"citation-input\",\"matInput\",\"\",\"formControlName\",\"citation\",\"cdkTextareaAutosize\",\"\",\"cdkAutosizeMinRows\",\"5\",\"cdkAutosizeMaxRows\",\"7\"],[\"for\",\"description-input\",\"id\",\"description-label\",1,\"mat-caption\"],W,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"biography\",\"input-container\"],[\"aria-labelledby\",\"description-label\",\"matInput\",\"\",\"formControlName\",\"shortDescription\",\"cdkTextareaAutosize\",\"\",\"cdkAutosizeMinRows\",\"5\",\"cdkAutosizeMaxRows\",\"7\",1,\"cy-description-input\"],[\"id\",\"work-ids\"],[\"id\",\"work-identifiers\",1,\"title\",3,\"ngClass\"],[\"id\",\"work-id-label\",1,\"orc-font-body\",3,\"ngClass\"],F,[\"formArrayName\",\"workIdentifiers\"],[\"class\",\"externalIdBox\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"row\",4,\"ngIf\"],[\"id\",\"work-contributors\"],[1,\"title\"],[\"id\",\"contributors-label\",3,\"ngClass\"],G,[3,\"contributors\",\"userRecord\",\"recordHolderAsContributor\"],[\"id\",\"work-other-info\"],[\"id\",\"otherInformation\",1,\"title\"],[\"id\",\"other-info-label\",3,\"ngClass\"],B,[1,\"row\",\"title\"],[\"for\",\"language-input\",\"id\",\"language-label\",1,\"mat-caption\"],b,[\"id\",\"language-input\",\"formControlName\",\"languageCode\",3,\"placeholder\",\"aria-label\"],[\"for\",\"country-input\",\"id\",\"country-location-label\",1,\"mat-caption\"],be,[\"id\",\"country-input\",\"formControlName\",\"countryCode\",3,\"placeholder\"],[\"id\",\"work-visibility\"],[\"id\",\"visibilityLabel\",3,\"ngClass\"],Ae,[1,\"orc-font-body-small\"],[1,\"row\",\"visibility\"],[1,\"col\",\"no-wrap\",\"actions-wrapper\",\"no-gutters\"],[\"formControlName\",\"visibility\",3,\"itemTitle\"],[1,\"required-information\",\"mat-caption\"],Ie,[3,\"label\"],[3,\"value\"],xe,ye,ke,[\"id\",\"cy-add-translated-title-icon\",1,\"large-material-icon\"],[\"id\",\"cy-hide-translated-title-icon\",1,\"large-material-icon\"],ve,De,[1,\"mat-caption\"],P,zn,Hn,Vn,jn,et,nt,tt,ot,it,_t,[1,\"externalIdBox\"],[3,\"formGroupName\",4,\"ngIf\"],[3,\"formGroupName\"],[1,\"input-container\",3,\"externalIdForm\",\"workIdTypes\",\"index\",\"id\",\"cancelEvent\"],[3,\"externalIdForm\",\"workIdentifier\",\"edit\",\"delete\"],[\"id\",\"cy-add-another-work-external-id\",1,\"col\",\"add-more\",\"no-gutters\",3,\"click\"],[1,\"large-material-icon\"],rt,[\"id\",\"cy-add-an-work-external-id\",1,\"col\",\"add-more\",\"no-gutters\",3,\"click\"],at]},template:function(t,i){1&t&&e.YNc(0,op,204,125,\"form\",0),2&t&&e.Q6J(\"ngIf\",i.workForm)},styles:[\"mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]{width:100%}.title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}label[_ngcontent-%COMP%]{display:block;padding-bottom:8px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.side-bar[_ngcontent-%COMP%]{text-decoration:underline}.date-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:nowrap}.date-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:120px;margin-left:4px}.align-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.required-information[_ngcontent-%COMP%]{margin-left:auto!important;margin-top:10px!important}.required-information[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:3px!important}.date[_ngcontent-%COMP%]{padding-bottom:1.475em;padding-left:0}.date[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.add-more[_ngcontent-%COMP%]{margin-bottom:27px;padding-inline-start:0}.add-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}.add-more[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto;padding-inline-start:6px}.input-container[_ngcontent-%COMP%]{max-width:402px}.externalIdBox[_ngcontent-%COMP%]{padding-bottom:16px;margin-bottom:16px}.select-error[_ngcontent-%COMP%]{padding-bottom:1.475em}.select-error[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0!important}.select-error[_ngcontent-%COMP%]   mat-error[_ngcontent-%COMP%]{padding:0 1em;margin-top:.2em}\",\"input[_ngcontent-%COMP%]{border:solid 1px #e3e3e3}[_ngcontent-%COMP%]::placeholder{color:#707070}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#707070}.error[_ngcontent-%COMP%], .required[_ngcontent-%COMP%]{color:#d32f2f}input.mat-input-element[_ngcontent-%COMP%]{border:transparent;font-size:14px!important}textarea.mat-input-element[_ngcontent-%COMP%], .mat-select[_ngcontent-%COMP%]{font-size:14px!important}.externalIdBox[_ngcontent-%COMP%]{border-bottom:dashed #eeeeee 1px}\"]}),_})();var ee=g(24678);let Zn=(()=>{var o;class _{transform(t){return m.xR[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordWorkRelationshipLabel\",type:o,pure:!0}),_})(),ip=(()=>{var o;class _{transform(t){return m.Zx[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordWorkRelationshipHintLabel\",type:o,pure:!0}),_})();const _p=[\"externalIdentifierType\"];function rp(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",27),e._uU(1),e.qZA()),2&o){const n=_.$implicit;e.Q6J(\"value\",n.name),e.xp6(1),e.hij(\" \",n.description,\" \")}}function ap(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,28),e.qZA())}function sp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.ynx(1),e.SDv(2,29),e.BQk(),e.qZA())}function lp(o,_){if(1&o&&(e.TgZ(0,\"mat-icon\",30),e._uU(1,\"warning\"),e.qZA()),2&o){const n=e.oxw(2);e.Q6J(\"matTooltip\",n.unResolvedTooltip)}}function cp(o,_){1&o&&(e.TgZ(0,\"mat-hint\"),e.ynx(1),e.SDv(2,31),e.BQk(),e.qZA())}function dp(o,_){1&o&&(e.TgZ(0,\"mat-hint\"),e.ynx(1),e.SDv(2,32),e.BQk(),e.qZA())}function pp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,33),e.qZA())}function up(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,34),e.qZA())}function gp(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"mat-radio-button\",35),e.ALo(2,\"recordWorkRelationshipLabel\"),e._uU(3),e.ALo(4,\"recordWorkRelationshipLabel\"),e.qZA(),e.TgZ(5,\"mat-hint\",36),e._uU(6),e.ALo(7,\"recordWorkRelationshipHintLabel\"),e.qZA(),e.BQk()),2&o){const n=_.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J(\"value\",n)(\"aria-label\",t.setLabel+\" \"+t.externalIdForm.get(\"externalIdentifierType\").value+\" \"+t.asLabel+\" \"+e.lcZ(2,4,n)),e.xp6(2),e.hij(\"\",e.lcZ(4,6,n),\" \"),e.xp6(3),e.hij(\"\",e.lcZ(7,8,n),\" \")}}function fp(o,_){1&o&&(e.TgZ(0,\"mat-error\",37),e.SDv(1,38),e.qZA())}function Op(o,_){1&o&&(e.TgZ(0,\"mat-error\",37),e.SDv(1,39),e.qZA())}const Ke=function(o){return{error:o}};function Cp(o,_){if(1&o){const n=e.EpF();e.ynx(0,5),e.TgZ(1,\"div\")(2,\"div\",6)(3,\"strong\",7)(4,\"label\",8),e.SDv(5,9),e.qZA()()(),e.TgZ(6,\"div\",6)(7,\"mat-form-field\",10)(8,\"mat-select\",11,12),e.NdJ(\"selectionChange\",function(i){e.CHM(n);const r=e.oxw();return e.KtG(r.updateExternal(i))}),e.YNc(10,rp,2,2,\"mat-option\",13),e.qZA(),e.TgZ(11,\"mat-hint\"),e.SDv(12,14),e.qZA(),e.YNc(13,ap,2,0,\"mat-error\",15),e.qZA()()(),e.TgZ(14,\"div\")(15,\"div\",6)(16,\"label\",7)(17,\"strong\",8),e.SDv(18,16),e.qZA()()(),e.TgZ(19,\"mat-form-field\",17),e._UZ(20,\"input\",18),e.YNc(21,sp,3,0,\"mat-error\",15),e.YNc(22,lp,2,1,\"mat-icon\",19),e.YNc(23,cp,3,0,\"mat-hint\",15),e.YNc(24,dp,3,0,\"mat-hint\",15),e.YNc(25,pp,2,0,\"mat-error\",15),e.qZA()(),e.TgZ(26,\"div\")(27,\"div\",6)(28,\"label\",7)(29,\"strong\",8),e.SDv(30,20),e.qZA()()(),e.TgZ(31,\"mat-form-field\",17),e._UZ(32,\"input\",21),e.TgZ(33,\"mat-hint\"),e.SDv(34,22),e.qZA(),e.YNc(35,up,2,0,\"mat-error\",15),e.qZA()(),e.TgZ(36,\"div\")(37,\"div\",6)(38,\"strong\",7)(39,\"label\",8),e.SDv(40,23),e.qZA()()(),e.TgZ(41,\"mat-radio-group\",24),e.YNc(42,gp,8,10,\"ng-container\",25),e.qZA(),e.YNc(43,fp,2,0,\"mat-error\",26),e.YNc(44,Op,2,0,\"mat-error\",26),e.qZA(),e.BQk()}if(2&o){const n=e.oxw();e.Q6J(\"formGroup\",n.externalIdForm),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(26,Ke,n.externalIdForm.get(\"externalIdentifierType\").hasError(\"required\")&&n.externalIdForm.get(\"externalIdentifierType\").touched)),e.xp6(1),e.s9C(\"id\",\"id-type-\"+n.index+n.externalIdForm),e.xp6(4),e.s9C(\"placeholder\",n.ngOrcidSelectIdentifierType),e.Q6J(\"aria-labelledby\",\"id-type-\"+n.index),e.xp6(2),e.Q6J(\"ngForOf\",n.workIdTypes),e.xp6(3),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierType\").hasError(\"required\")&&n.externalIdForm.get(\"externalIdentifierType\").touched),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(28,Ke,n.externalIdForm.get(\"externalIdentifierId\").hasError(\"required\")&&n.externalIdForm.get(\"externalIdentifierId\").touched)),e.xp6(1),e.s9C(\"id\",\"id-external-id-\"+n.index),e.xp6(3),e.Q6J(\"errorStateMatcher\",n.workExternalIdErrorMatcher),e.uIk(\"aria-labelledby\",\"id-external-id-\"+n.index),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierId\").hasError(\"validFormat\")&&n.externalIdForm.get(\"externalIdentifierId\").touched),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierId\").hasError(\"unResolved\")),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierId\").hasError(\"unResolved\")),e.xp6(1),e.Q6J(\"ngIf\",!n.externalIdForm.get(\"externalIdentifierId\").hasError(\"unResolved\")),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierId\").hasError(\"required\")&&n.externalIdForm.get(\"externalIdentifierId\").touched),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(30,Ke,n.externalIdForm.get(\"externalIdentifierUrl\").hasError(\"pattern\")&&n.externalIdForm.get(\"externalIdentifierUrl\").touched)),e.xp6(1),e.s9C(\"id\",\"id-url-\"+n.index),e.xp6(3),e.uIk(\"aria-labelledby\",\"id-url-\"+n.index),e.xp6(3),e.Q6J(\"ngIf\",n.externalIdForm.get(\"externalIdentifierUrl\").hasError(\"pattern\")),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(32,Ke,n.externalIdForm.hasError(\"required\",\"externalRelationship\")&&n.externalIdForm.get(\"externalRelationship\").touched)),e.xp6(1),e.s9C(\"id\",\"id-relationship-\"+n.index),e.xp6(2),e.Q6J(\"id\",\"external-relationship-input-\"+n.index),e.xp6(1),e.Q6J(\"ngForOf\",n.workRelationships),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.hasError(\"funded_by_invalid\")),e.xp6(1),e.Q6J(\"ngIf\",n.externalIdForm.hasError(\"version_of_invalid\"))}}let Wn=(()=>{var o;class _{constructor(t){this.changeDedectionRef=t,this.setLabel=\"Set relationship of\",this.asLabel=\"as\",this.cancelEvent=new e.vpe,this.updateExternalEvent=new e.vpe,this.workExternalIdErrorMatcher=new Rp,this.cancelAddingExternalIdAriaLabel=\"Cancel adding an identifier\",this.unResolvedTooltip=\"We couldn\\'t find a resource that matches the identifier you entered. Please check the value or enter a valid link to the resource.\",this.workRelationships=Object.keys(m.uJ),this.ngOrcidSelectIdentifierType=\"Select an identifier type\"}ngOnInit(){var t;this.backupValue=null==(t=this.externalIdForm)?void 0:t.value}updateExternal(t){this.updateExternalEvent.emit(t.value)}ngAfterViewInit(){var t;null==(t=this.externalIdentifierTypeRef)||t.focus(),this.changeDedectionRef.detectChanges()}cancel(){this.externalIdForm.setValue(this.backupValue),this.cancelEvent.emit()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-external-identifiers-edit\"]],viewQuery:function(t,i){if(1&t&&e.Gf(_p,5),2&t){let r;e.iGM(r=e.CRH())&&(i.externalIdentifierTypeRef=r.first)}},inputs:{externalIdForm:\"externalIdForm\",index:\"index\",workIdTypes:\"workIdTypes\"},outputs:{cancelEvent:\"cancelEvent\",updateExternalEvent:\"updateExternalEvent\"},decls:8,vars:3,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E,C,N;return n=\"Identifier\",t=\"Cancel\",i=\"Identifier type\",r=\"The type of identifier associated with the work, such as an ISBN, DOI or PMID.\",a=\"Identifier value\",s=\"Identifier URL\",l=\"The URL that the identifier resolves to, for example https://doi.org/10.23640/07243.c.4232246\",c=\"Relationship\",u=\"Please select an identifier type\",O=\"Invalid id for the selected identifier type\",f=\"We couldn\\'t find a resource that matches the identifier you entered. Please check the value or enter a valid link to the resource.\",R=\"The identifier associated with the work. The format will depend on the type of identifier selected.\",T=\"Please enter an external ID\",E=\"Invalid url\",C=\"Only identifier types \\\\\"grant number\\\\\", \\\\\"doi\\\\\", \\\\\"uri\\\\\" or \\\\\"proposal id\\\\\" are allowed when using \\\\\"funded-by\\\\\" identifiers\",N=\"At least one \\\\\"self\\\\\" identifier is required when using \\\\\"version-of\\\\\" identifiers\",[[1,\"top-bar\"],n,[3,\"click\"],t,[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[1,\"row\"],[1,\"mat-caption\",3,\"ngClass\"],[3,\"id\"],i,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"input-container\",\"two-line-hint\"],[\"formControlName\",\"externalIdentifierType\",3,\"aria-labelledby\",\"placeholder\",\"selectionChange\"],[\"externalIdentifierType\",\"\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],r,[4,\"ngIf\"],a,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"three-line-hint\",\"input-container\"],[\"autocomplete\",\"off\",\"matInput\",\"\",\"formControlName\",\"externalIdentifierId\",3,\"errorStateMatcher\"],[\"matSuffix\",\"\",3,\"matTooltip\",4,\"ngIf\"],s,[\"matInput\",\"\",\"formControlName\",\"externalIdentifierUrl\"],l,c,[\"appearance\",\"outline\",\"formControlName\",\"externalRelationship\",1,\"mat-form-field-min\",3,\"id\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"mat-caption error-out-input-context fundingIdErrors\",4,\"ngIf\"],[3,\"value\"],u,O,[\"matSuffix\",\"\",3,\"matTooltip\"],f,R,T,E,[3,\"value\",\"aria-label\"],[1,\"mat-caption\"],[1,\"mat-caption\",\"error-out-input-context\",\"fundingIdErrors\"],C,N]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0)(1,\"strong\"),e.ynx(2),e.SDv(3,1),e.BQk(),e._uU(4),e.qZA(),e.TgZ(5,\"a\",2),e.NdJ(\"click\",function(){return i.cancel()}),e.SDv(6,3),e.qZA()(),e.YNc(7,Cp,45,34,\"ng-container\",4)),2&t&&(e.xp6(4),e.hij(\" (\",i.index+1,\")\"),e.xp6(1),e.uIk(\"aria-label\",i.cancelAddingExternalIdAriaLabel),e.xp6(2),e.Q6J(\"ngIf\",i.externalIdForm))},dependencies:[p.mk,p.sg,p.O5,d.Fj,d.JJ,d.JL,d.sg,d.u,v.t,y.Hw,h.nI,h.v_,h.pH,h.nX,q.k0,ne.x8,ee.CK,Ye.Kd,Ee.OY,Ee.vy,Zn,ip],styles:[\".title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}label.mat-caption[_ngcontent-%COMP%]{margin-bottom:8px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.side-bar[_ngcontent-%COMP%]{text-decoration:underline}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}.input-container[_ngcontent-%COMP%]{max-width:402px}.fundingIdErrors[_ngcontent-%COMP%]{padding-top:5px}\",\".error[_ngcontent-%COMP%]{color:#d32f2f}\"]}),_})();class Rp{isErrorState(_){return(_.hasError(\"required\")||_.hasError(\"validFormat\"))&&_.touched}}let Fn=(()=>{var o;class _{transform(t){return Me.xV[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordFundingRelationshipLabel\",type:o,pure:!0}),_})(),Tp=(()=>{var o;class _{transform(t){return Me.TN[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordFundingRelationshipHintLabel\",type:o,pure:!0}),_})();const mp=[\"grantNumber\"];function Ep(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,19),e.qZA())}function Sp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,20),e.qZA())}function hp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,21),e.qZA())}function Np(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,22),e.qZA())}function Mp(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"mat-radio-button\",23),e._uU(2),e.ALo(3,\"recordFundingRelationshipLabel\"),e.qZA(),e.TgZ(4,\"mat-hint\",24),e._uU(5),e.ALo(6,\"recordFundingRelationshipHintLabel\"),e.qZA(),e.BQk()),2&o){const n=_.$implicit;e.xp6(1),e.Q6J(\"value\",n),e.xp6(1),e.hij(\"\",e.lcZ(3,3,n),\" \"),e.xp6(3),e.hij(\"\",e.lcZ(6,5,n),\" \")}}const un=function(o){return{error:o}};let Pp=(()=>{var o;class _{constructor(t){this.changeDedectionRef=t,this.cancelEvent=new e.vpe,this.workRelationships=Object.keys(m.uJ),this.fundingRelationships=Object.keys(Me.gL)}ngOnInit(){var t;this.backupValue=null==(t=this.grantForm)?void 0:t.value}ngAfterViewInit(){this.grantNumberRef.nativeElement.focus(),this.changeDedectionRef.detectChanges()}cancel(){this.grantForm.setValue(this.backupValue),this.cancelEvent.emit()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-funding-external-identifiers-edit\"]],viewQuery:function(t,i){if(1&t&&e.Gf(mp,5),2&t){let r;e.iGM(r=e.CRH())&&(i.grantNumberRef=r.first)}},inputs:{grantForm:\"grantForm\",index:\"index\"},outputs:{cancelEvent:\"cancelEvent\"},decls:36,vars:20,consts:function(){let n,t,i,r,a,s,l,c,u,O;return n=\"Identifier\",t=\"Cancel\",i=\"Grant number\",r=\"Grant link\",a=\"A link to more information about the funding award\",s=\"Relationship\",l=\"Grant number is required\",c=\"Must be less than 2084 characters\",u=\"Invalid URL\",O=\"Must be less than 2000 characters\",[[1,\"top-bar\"],n,[3,\"click\"],t,[3,\"formGroup\"],[1,\"row\"],[1,\"mat-caption\",3,\"ngClass\"],i,[\"appearance\",\"outline\",1,\"mat-form-field-min\",\"input-container\"],[\"matInput\",\"\",\"formControlName\",\"grantNumber\",3,\"id\"],[\"grantNumber\",\"\"],[4,\"ngIf\"],r,[\"matInput\",\"\",\"formControlName\",\"grantUrl\",3,\"id\"],a,[1,\"row\",\"relationship\"],s,[\"aria-label\",\"Select an option\",\"formControlName\",\"fundingRelationship\",1,\"mat-form-field-min\"],[4,\"ngFor\",\"ngForOf\"],l,c,u,O,[3,\"value\"],[1,\"mat-caption\"]]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0)(1,\"strong\"),e.ynx(2),e.SDv(3,1),e.BQk(),e._uU(4),e.qZA(),e.TgZ(5,\"a\",2),e.NdJ(\"click\",function(){return i.cancel()}),e.SDv(6,3),e.qZA()(),e.ynx(7,4),e.TgZ(8,\"div\")(9,\"div\",5)(10,\"label\",6)(11,\"strong\"),e.SDv(12,7),e.qZA()()(),e.TgZ(13,\"mat-form-field\",8),e._UZ(14,\"input\",9,10),e.YNc(16,Ep,2,0,\"mat-error\",11),e.YNc(17,Sp,2,0,\"mat-error\",11),e.qZA()(),e.TgZ(18,\"div\",5)(19,\"label\",6)(20,\"strong\"),e.SDv(21,12),e.qZA()()(),e.TgZ(22,\"mat-form-field\",8),e._UZ(23,\"input\",13),e.TgZ(24,\"mat-hint\"),e.SDv(25,14),e.qZA(),e.YNc(26,hp,2,0,\"mat-error\",11),e.YNc(27,Np,2,0,\"mat-error\",11),e.qZA(),e.TgZ(28,\"div\")(29,\"div\",15)(30,\"label\",6)(31,\"strong\"),e.SDv(32,16),e.qZA()()(),e.TgZ(33,\"div\",5)(34,\"mat-radio-group\",17),e.YNc(35,Mp,7,7,\"ng-container\",18),e.qZA()()(),e.BQk()),2&t&&(e.xp6(4),e.hij(\" (\",i.index+1,\") \"),e.xp6(3),e.Q6J(\"formGroup\",i.grantForm),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(14,un,(null==i.grantForm?null:i.grantForm.hasError(\"required\",\"grantNumber\"))&&(null==i.grantForm?null:i.grantForm.get(\"grantNumber\").touched))),e.uIk(\"for\",\"grant-number-input-\"+i.index),e.xp6(4),e.Q6J(\"id\",\"grant-number-input-\"+i.index),e.xp6(2),e.Q6J(\"ngIf\",null==i.grantForm||null==i.grantForm.get(\"grantNumber\").errors?null:i.grantForm.get(\"grantNumber\").errors.required),e.xp6(1),e.Q6J(\"ngIf\",null==i.grantForm||null==i.grantForm.get(\"grantNumber\").errors?null:i.grantForm.get(\"grantNumber\").errors.maxlength),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(16,un,(null==i.grantForm?null:i.grantForm.hasError(\"pattern\",\"grantUrl\"))&&(null==i.grantForm?null:i.grantForm.get(\"grantUrl\").touched))),e.uIk(\"for\",\"grant-url-input-\"+i.index),e.xp6(4),e.Q6J(\"id\",\"grant-url-input-\"+i.index),e.xp6(3),e.Q6J(\"ngIf\",null==i.grantForm?null:i.grantForm.get(\"grantUrl\").hasError(\"pattern\")),e.xp6(1),e.Q6J(\"ngIf\",null==i.grantForm?null:i.grantForm.get(\"grantUrl\").hasError(\"maxlength\")),e.xp6(3),e.Q6J(\"ngClass\",e.VKq(18,un,(null==i.grantForm?null:i.grantForm.hasError(\"required\",\"fundingRelationship\"))&&(null==i.grantForm?null:i.grantForm.get(\"fundingRelationship\").touched))),e.xp6(5),e.Q6J(\"ngForOf\",i.fundingRelationships))},dependencies:[p.mk,p.sg,p.O5,d.Fj,d.JJ,d.JL,d.sg,d.u,v.t,h.nI,h.v_,h.pH,q.k0,Ee.OY,Ee.vy,Fn,Tp],styles:[\".title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:6px 0}label.mat-caption[_ngcontent-%COMP%]{margin-bottom:8px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.side-bar[_ngcontent-%COMP%]{text-decoration:underline}mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}.input-container[_ngcontent-%COMP%]{max-width:402px}\",\".error[_ngcontent-%COMP%]{color:#d32f2f}\"]}),_})();function bp(o,_){if(1&o&&e._UZ(0,\"app-panel-data-line\",7),2&o){const n=e.oxw();e.Q6J(\"title\",n.grantNumberLabel)(\"content\",n.grant.grantNumber)}}function Ap(o,_){if(1&o&&e._UZ(0,\"app-panel-data-line\",8),2&o){const n=e.oxw();e.Q6J(\"title\",n.grantUrlLabel)(\"content\",n.grant.grantUrl)(\"url\",n.grant.grantUrl)}}function Ip(o,_){if(1&o&&(e._UZ(0,\"app-panel-data-line\",7),e.ALo(1,\"recordFundingRelationshipLabel\")),2&o){const n=e.oxw();e.Q6J(\"title\",n.fundingRelationshipLabel)(\"content\",e.lcZ(1,2,n.grant.fundingRelationship))}}let xp=(()=>{var o;class _{constructor(){this.grantNumberLabel=\"Grant number:\",this.grantUrlLabel=\"Grant URL:\",this.fundingRelationshipLabel=\"Relationship:\",this.edit=new e.vpe,this.delete=new e.vpe}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-funding-external-identifiers-view-only\"]],inputs:{grant:\"grant\"},outputs:{edit:\"edit\",delete:\"delete\"},decls:9,vars:3,consts:function(){let n,t;return n=\"Edit\",t=\"Delete\",[[1,\"externalIds\"],[3,\"title\",\"content\",4,\"ngIf\"],[3,\"title\",\"content\",\"url\",4,\"ngIf\"],[1,\"controls\"],[3,\"click\"],n,t,[3,\"title\",\"content\"],[3,\"title\",\"content\",\"url\"]]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0),e.YNc(1,bp,1,2,\"app-panel-data-line\",1),e.YNc(2,Ap,1,3,\"app-panel-data-line\",2),e.YNc(3,Ip,2,4,\"app-panel-data-line\",1),e.qZA(),e.TgZ(4,\"div\",3)(5,\"a\",4),e.NdJ(\"click\",function(){return i.edit.emit()}),e.SDv(6,5),e.qZA(),e.TgZ(7,\"a\",4),e.NdJ(\"click\",function(){return i.delete.emit()}),e.SDv(8,6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",null==i.grant?null:i.grant.grantNumber),e.xp6(1),e.Q6J(\"ngIf\",null==i.grant?null:i.grant.grantUrl),e.xp6(1),e.Q6J(\"ngIf\",null==i.grant?null:i.grant.fundingRelationship))},dependencies:[p.O5,v.t,qe,Fn],styles:[\"[_nghost-%COMP%]{display:flex}.externalIds[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-inline-start:16px}\"]}),_})();function yp(o,_){if(1&o&&e._UZ(0,\"app-panel-data-line\",9),2&o){const n=e.oxw();e.Q6J(\"title\",n.typeLabel)(\"content\",n.workIdentifier.externalIdentifierType)}}function kp(o,_){if(1&o&&e._UZ(0,\"app-panel-data-line\",9),2&o){const n=e.oxw();e.Q6J(\"title\",n.valueLabel)(\"content\",n.workIdentifier.externalIdentifierId)}}function vp(o,_){if(1&o&&e._UZ(0,\"app-panel-data-line\",10),2&o){const n=e.oxw();e.Q6J(\"title\",n.urlLabel)(\"content\",n.workIdentifier.externalIdentifierUrl)(\"url\",n.workIdentifier.externalIdentifierUrl)}}function Dp(o,_){if(1&o&&(e._UZ(0,\"app-panel-data-line\",9),e.ALo(1,\"recordWorkRelationshipLabel\")),2&o){const n=e.oxw();e.Q6J(\"title\",n.relationshipLabel)(\"content\",e.lcZ(1,2,n.workIdentifier.externalRelationship))}}function wp(o,_){1&o&&(e.TgZ(0,\"mat-error\",11),e.ynx(1),e.SDv(2,12),e.BQk(),e.qZA())}function Lp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,13),e.qZA())}let Gn=(()=>{var o;class _{constructor(){this.typeLabel=\"Type:\",this.valueLabel=\"Value:\",this.urlLabel=\"URL:\",this.relationshipLabel=\"Relationship:\",this.edit=new e.vpe,this.delete=new e.vpe}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-external-identifiers-view-only\"]],inputs:{workIdentifier:\"workIdentifier\",externalIdForm:\"externalIdForm\"},outputs:{edit:\"edit\",delete:\"delete\"},decls:12,vars:6,consts:function(){let n,t,i,r;return n=\"Edit\",t=\"Delete\",i=\"Invalid id for the selected identifier type\",r=\"Invalid url\",[[1,\"externalIds\"],[3,\"title\",\"content\",4,\"ngIf\"],[3,\"title\",\"content\",\"url\",4,\"ngIf\"],[\"class\",\"mat-caption\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"controls\"],[3,\"click\"],n,t,[3,\"title\",\"content\"],[3,\"title\",\"content\",\"url\"],[1,\"mat-caption\"],i,r]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0),e.YNc(1,yp,1,2,\"app-panel-data-line\",1),e.YNc(2,kp,1,2,\"app-panel-data-line\",1),e.YNc(3,vp,1,3,\"app-panel-data-line\",2),e.YNc(4,Dp,2,4,\"app-panel-data-line\",1),e.YNc(5,wp,3,0,\"mat-error\",3),e.YNc(6,Lp,2,0,\"mat-error\",4),e.qZA(),e.TgZ(7,\"div\",5)(8,\"a\",6),e.NdJ(\"click\",function(){return i.edit.emit()}),e.SDv(9,7),e.qZA(),e.TgZ(10,\"a\",6),e.NdJ(\"click\",function(){return i.delete.emit()}),e.SDv(11,8),e.qZA()()),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",null==i.workIdentifier?null:i.workIdentifier.externalIdentifierType),e.xp6(1),e.Q6J(\"ngIf\",null==i.workIdentifier?null:i.workIdentifier.externalIdentifierId),e.xp6(1),e.Q6J(\"ngIf\",null==i.workIdentifier?null:i.workIdentifier.externalIdentifierUrl),e.xp6(1),e.Q6J(\"ngIf\",null==i.workIdentifier?null:i.workIdentifier.externalRelationship),e.xp6(1),e.Q6J(\"ngIf\",null==i.externalIdForm?null:i.externalIdForm.get(\"externalIdentifierId\").hasError(\"validFormat\")),e.xp6(1),e.Q6J(\"ngIf\",null==i.externalIdForm?null:i.externalIdForm.get(\"externalIdentifierUrl\").hasError(\"pattern\")))},dependencies:[p.O5,v.t,qe,h.nI,Zn],styles:[\"[_nghost-%COMP%]{display:flex}.externalIds[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-inline-start:16px}\"]}),_})();var Pe=g(56263),$p=g(50989),Up=g(9966);function Kn(o,_){return n=>{if(n.value){const t=n.parent,i=null==t?void 0:t.parent;if(i instanceof d.vC)for(const r of i.controls)if(r!==t&&(r.get(o).hasError(\"unique\")&&setTimeout(()=>r.get(o).updateValueAndValidity(),0),r.value[o]===n.value))return _===n.value?null:{unique:!0}}return null}}let Bn=(()=>{var o;class _{transform(t,i){const r=i.parent;if(r instanceof d.vC)for(const a of r.controls)if(a.value.role===t&&a.disabled)return!0;return!1}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"disableRole\",type:o,pure:!0}),_})(),Zp=(()=>{var o;class _{transform(t){return(m.tM.find(i=>i.key===t)||m.YM.find(i=>i.key===t)).translation}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"roleTranslation\",type:o,pure:!0}),_})();const Wp=[\"roleSelect\"];function Fp(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"titlecase\"),e.ALo(3,\"roleTranslation\"),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.hij(\" \",e.lcZ(2,1,e.lcZ(3,3,n.get(\"role\").value)),\" \")}}function Gp(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",24),e.ALo(1,\"disableRole\"),e._uU(2),e.ALo(3,\"titlecase\"),e.qZA()),2&o){const n=_.$implicit,t=e.oxw(2).$implicit;e.Q6J(\"value\",n.key)(\"disabled\",e.xi3(1,3,n.key,t)),e.xp6(2),e.hij(\" \",e.lcZ(3,6,n.translation),\" \")}}function Kp(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,25),e.qZA())}const Bp=function(o){return{\"no-hint\":o}};function Qp(o,_){if(1&o&&(e.TgZ(0,\"mat-form-field\",20)(1,\"mat-select\",21,22),e.YNc(3,Gp,4,8,\"mat-option\",23),e.qZA(),e.YNc(4,Kp,2,0,\"mat-error\",15),e.qZA()),2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.Q6J(\"ngClass\",e.VKq(5,Bp,n.get(\"role\").errors)),e.xp6(1),e.s9C(\"aria-label\",t.ngOrcidSelectRole),e.s9C(\"placeholder\",t.ngOrcidSelectRole),e.xp6(2),e.Q6J(\"ngForOf\",t.contributionRoles),e.xp6(1),e.Q6J(\"ngIf\",null==n.get(\"role\").errors?null:n.get(\"role\").errors.unique)}}function Jp(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",26),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.deleteRole(i))}),e.ALo(1,\"titlecase\"),e.ALo(2,\"roleTranslation\"),e.TgZ(3,\"mat-icon\",27),e._uU(4,\"delete \"),e.qZA()()}if(2&o){const n=e.oxw().$implicit,t=e.oxw(2);e.uIk(\"aria-label\",t.deleteLabel+\" \"+e.lcZ(1,1,e.lcZ(2,3,n.get(\"role\").value)))}}function Xp(o,_){1&o&&e._UZ(0,\"hr\",28)}function Yp(o,_){if(1&o&&(e.ynx(0,12),e.TgZ(1,\"div\",13)(2,\"div\",14),e.YNc(3,Fp,4,5,\"ng-container\",15),e.YNc(4,Qp,5,7,\"mat-form-field\",16),e.qZA(),e.TgZ(5,\"div\",17),e.YNc(6,Jp,5,5,\"button\",18),e.qZA()(),e.YNc(7,Xp,1,0,\"hr\",19),e.BQk()),2&o){const n=_.$implicit,t=_.index;e.Q6J(\"formGroupName\",t),e.xp6(3),e.Q6J(\"ngIf\",n.disabled),e.xp6(1),e.Q6J(\"ngIf\",!n.disabled),e.xp6(2),e.Q6J(\"ngIf\",n.disabled||!n.disabled&&0!==t),e.xp6(1),e.Q6J(\"ngIf\",n.disabled)}}function qp(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",1)(1,\"div\",2)(2,\"label\",3)(3,\"h3\",4),e.SDv(4,5),e.qZA()()(),e.ynx(5,6),e.YNc(6,Yp,8,5,\"ng-container\",7),e.BQk(),e.TgZ(7,\"div\",8)(8,\"a\",9),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addRole())}),e.TgZ(9,\"span\",10),e.SDv(10,11),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(6),e.Q6J(\"ngForOf\",null==n.roles?null:n.roles.controls)}}let Qn=(()=>{var o;class _{set contributors(t){this._contributors=t}get contributors(){return this._contributors}constructor(t,i,r,a){this.changeDetectorRef=t,this.formBuilder=i,this.parentForm=r,this.workService=a,this.deleteLabel=\"Delete\",this.contributionRoles=m.tM,this.ngOrcidSelectRole=\"Please select a role\"}get roles(){return this.parentForm.control.controls.roles}ngOnInit(){this.initializeFormArray()}addRole(){this.roles.push(this.getRoleForm(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)),this.changeDetectorRef.detectChanges(),this.inputs.last.focus()}deleteRole(t){this.roles.removeAt(t),0===t&&0===this.roles.length&&this.addRole()}initializeFormArray(){var t;if(this.parentForm.control.setControl(\"roles\",new d.vC([])),this.recordHolder=this.getRecordHolderContribution(),!this.recordHolderAsContributor||this.recordHolder)if(this.contributors){const i=null==(t=this.recordHolder)?void 0:t.rolesAndSequences;if((null==i?void 0:i.length)>0){const r=i.filter(a=>a.contributorRole).map(a=>a.contributorRole);(null==r?void 0:r.length)>0?r.forEach(a=>{const s=this.workService.getContributionRoleByKey(a);this.addRoleFormGroup(a&&s?s.key:a,!0)}):this.addRoleFormGroup(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)}else this.addRoleFormGroup(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)}else this.addRoleFormGroup(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)}addRoleFormGroup(t,i){this.roles.push(this.getRoleForm(t,i))}getRoleForm(t,i){return this.formBuilder.group({role:[{value:t?t.toLowerCase():\"\",disabled:i},[Kn(\"role\",\"no specified role\")]]})}getRecordHolderContribution(){var t;return null==(t=this.contributors)?void 0:t.find(i=>{var r,a,s;return(null==(r=null==i?void 0:i.contributorOrcid)?void 0:r.path)===(null==(s=null==(a=this.userRecord)?void 0:a.userInfo)?void 0:s.EFFECTIVE_USER_ORCID)})}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(d.QS),e.Y36(d.sg),e.Y36(z.Y))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-contributor-roles\"]],viewQuery:function(t,i){if(1&t&&e.Gf(Wp,5),2&t){let r;e.iGM(r=e.CRH())&&(i.inputs=r)}},inputs:{userRecord:\"userRecord\",recordHolderAsContributor:\"recordHolderAsContributor\",contributors:\"contributors\"},features:[e._Bn([],[{provide:d.gN,useExisting:d.sg}])],decls:1,vars:1,consts:function(){let n,t,i;return n=\"Your contributions to this work\",t=\"Add another role\",i=\"Role cannot be duplicated\",[[\"class\",\"container no-padding\",4,\"ngIf\"],[1,\"container\",\"no-padding\"],[1,\"row\",\"title\"],[\"for\",\"cy-role\",1,\"orc-font-body\"],[\"id\",\"your-contributors-label\",1,\"orc-font-body\"],n,[\"formArrayName\",\"roles\"],[3,\"formGroupName\",4,\"ngFor\",\"ngForOf\"],[1,\"row\"],[\"id\",\"cy-add-another-role-contributors\",1,\"underline\",3,\"click\"],[1,\"mat-body-1\"],t,[3,\"formGroupName\"],[1,\"row\",\"role\"],[1,\"col\",\"l9\",\"m8\",\"s4\",\"no-gutters\",\"orc-font-body-small\"],[4,\"ngIf\"],[\"appearance\",\"outline\",\"class\",\"mat-form-field-min\",3,\"ngClass\",4,\"ngIf\"],[1,\"col\",\"l3\",\"delete-button\"],[\"mat-icon-button\",\"\",3,\"click\",4,\"ngIf\"],[\"class\",\"dashed-line\",4,\"ngIf\"],[\"appearance\",\"outline\",1,\"mat-form-field-min\",3,\"ngClass\"],[\"formControlName\",\"role\",3,\"aria-label\",\"placeholder\"],[\"roleSelect\",\"\"],[3,\"value\",\"disabled\",4,\"ngFor\",\"ngForOf\"],[3,\"value\",\"disabled\"],i,[\"mat-icon-button\",\"\",3,\"click\"],[1,\"material-icons-outlined\",\"extra-large-material-icon\"],[1,\"dashed-line\"]]},template:function(t,i){1&t&&e.YNc(0,qp,11,1,\"div\",0),2&t&&e.Q6J(\"ngIf\",(null==i.roles||null==i.roles.controls?null:i.roles.controls.length)>0)},dependencies:[p.mk,p.sg,p.O5,d.JJ,d.JL,d.u,d.x0,d.CE,v.t,y.Hw,A.eB,h.nI,h.v_,ne.x8,ee.CK,p.rS,Bn,Zp],styles:[\".container[_ngcontent-%COMP%]{width:100%;margin-bottom:32px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:32px}.container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{margin-bottom:4px}.container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1em!important}.container[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0}\"]}),_})(),zp=(()=>{var o;class _{transform(t){var i;return null==(i=null==t?void 0:t.map(r=>{var s;return(null==(s=this.getContributionRoleByKey(r.role))?void 0:s.translation)||r.role}))?void 0:i.join(\", \")}getContributionRoleByKey(t){return m.tM.find(i=>i.key===t)||m.YM.find(i=>i.key===t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"contributorRoles\",type:o,pure:!0}),_})();const Hp=[\"roleSelect\"],Vp=[\"contributorNames\"],jp=function(o){return{\"no-contributors\":o}};function eu(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",3)(1,\"a\",4),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addRecordHolderAsContributor())}),e.TgZ(2,\"mat-icon\",5),e._uU(3,\"add_circle_outline\"),e.qZA(),e.TgZ(4,\"span\",6),e.SDv(5,7),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(1),e.Q6J(\"ngClass\",e.VKq(1,jp,0===(null==n.contributorsFormArray||null==n.contributorsFormArray.controls?null:n.contributorsFormArray.controls.length)))}}function nu(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(2);e.xp6(1),e.hij(\" (\",(null==n.contributorsFormArray||null==n.contributorsFormArray.controls?null:n.contributorsFormArray.controls.length)||(null==n.contributors?null:n.contributors.length),\") \")}}function tu(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(),t=n.$implicit,i=n.last;e.xp6(1),e.hij(\" \",(null==t||null==t.creditName?null:t.creditName.content)+(i?\"\":\"; \"),\" \")}}function ou(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"a\",22),e._uU(2),e.qZA(),e._uU(3),e.BQk()),2&o){const n=e.oxw(2),t=n.$implicit,i=n.last;e.xp6(1),e.s9C(\"href\",null==t||null==t.contributorOrcid?null:t.contributorOrcid.uri,e.LSH),e.xp6(1),e.Oqu(null==t||null==t.contributorOrcid?null:t.contributorOrcid.path),e.xp6(1),e.hij(\"\",i?\"\":\"; \",\" \")}}function iu(o,_){if(1&o&&(e.ynx(0),e.YNc(1,ou,4,3,\"ng-container\",2),e.BQk()),2&o){const n=e.oxw().$implicit;e.xp6(1),e.Q6J(\"ngIf\",null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri)}}function _u(o,_){if(1&o&&(e.ynx(0),e.YNc(1,tu,2,1,\"ng-container\",2),e.YNc(2,iu,2,1,\"ng-container\",2),e.BQk()),2&o){const n=_.$implicit,t=e.oxw(3);e.xp6(1),e.Q6J(\"ngIf\",(null==n?null:n.creditName)&&(null==n||null==n.creditName?null:n.creditName.content)!==t.privateName),e.xp6(1),e.Q6J(\"ngIf\",(!(null!=n&&n.creditName)||(null==n||null==n.creditName?null:n.creditName.content)===t.privateName)&&(null==n||null==n.contributorOrcid?null:n.contributorOrcid.uri))}}function ru(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",11),e.YNc(2,_u,3,2,\"ng-container\",12),e.ALo(3,\"slice\"),e.TgZ(4,\"span\"),e.SDv(5,13),e.qZA()(),e.TgZ(6,\"div\",14)(7,\"div\",15)(8,\"mat-icon\",5),e._uU(9,\"info\"),e.qZA()(),e.TgZ(10,\"div\",16)(11,\"h2\",17),e.SDv(12,18),e.qZA(),e.TgZ(13,\"p\"),e.SDv(14,19),e.qZA(),e.TgZ(15,\"a\",20),e.SDv(16,21),e.qZA()()(),e.BQk()),2&o){const n=e.oxw(2);e.xp6(2),e.Q6J(\"ngForOf\",e.Dn7(3,1,n.contributors,0,n.maxNumberOfContributorsSummary))}}function au(o,_){1&o&&e._UZ(0,\"div\",35)}function su(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"img\",39),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(2).$implicit,r=e.oxw(3);let a;return e.KtG(r.goto(null==(a=i.get([\"contributorOrcid\",\"uri\"]))?null:a.value))}),e.qZA()}}function lu(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const n=e.oxw(5);e.xp6(1),e.hij(\"(\",n.roles,\")\")}}function cu(o,_){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,\"contributorRoles\"),e.BQk()),2&o){const n=e.oxw(2).$implicit;let t;e.xp6(1),e.hij(\"(\",e.lcZ(2,1,null==(t=n.get(\"roles\"))?null:t.value),\")\")}}function du(o,_){if(1&o&&(e.TgZ(0,\"span\",40),e._uU(1),e.qZA()),2&o){const n=e.oxw(5);e.xp6(1),e.Oqu(n.affiliation)}}const Oe=function(){return[\"contributorOrcid\",\"path\"]},pu=function(o,_){return{\"record-holder\":o,\"not-record-holder\":_}};function uu(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",31),e.YNc(2,su,1,0,\"img\",36),e.qZA(),e.TgZ(3,\"p\")(4,\"span\",37),e._uU(5),e.YNc(6,lu,2,1,\"ng-container\",2),e.YNc(7,cu,3,3,\"ng-container\",2),e.qZA(),e.YNc(8,du,2,1,\"span\",38),e.qZA(),e.BQk()),2&o){const n=e.oxw().$implicit,t=e.oxw(3);let i,r,a,s,l,c;e.xp6(2),e.Q6J(\"ngIf\",null==(i=n.get(e.DdM(6,Oe)))?null:i.value),e.xp6(2),e.Q6J(\"ngClass\",e.WLB(9,pu,(null==(r=n.get(e.DdM(7,Oe)))?null:r.value)===t.id,(null==(r=n.get(e.DdM(8,Oe)))?null:r.value)!==t.id)),e.xp6(1),e.hij(\"\",null==(a=n.get(\"creditName\"))?null:a.value,\" \"),e.xp6(1),e.Q6J(\"ngIf\",t.roles&&(null==(s=n.get(e.DdM(12,Oe)))?null:s.value)===t.id),e.xp6(1),e.Q6J(\"ngIf\",(null==(l=n.get(e.DdM(13,Oe)))?null:l.value)!==t.id&&(null==(l=n.get(\"roles\"))||null==l.value?null:l.value.length)>0),e.xp6(1),e.Q6J(\"ngIf\",t.affiliation&&(null==(c=n.get(e.DdM(14,Oe)))?null:c.value)===t.id)}}function gu(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,53),e.qZA())}function fu(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,54),e.qZA())}function Ou(o,_){if(1&o&&(e.TgZ(0,\"mat-option\",61),e.ALo(1,\"disableRole\"),e._uU(2),e.ALo(3,\"titlecase\"),e.qZA()),2&o){const n=_.$implicit,t=e.oxw().$implicit;e.Q6J(\"value\",n.key)(\"disabled\",e.xi3(1,3,n.key,t)),e.xp6(2),e.hij(\" \",e.lcZ(3,6,n.translation),\" \")}}function Cu(o,_){1&o&&(e.TgZ(0,\"mat-error\"),e.SDv(1,62),e.qZA())}function Ru(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"button\",47),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(2).$implicit,a=e.oxw(3);return e.KtG(a.deleteRole(r,i))}),e.TgZ(1,\"mat-icon\",48),e._uU(2,\"delete \"),e.qZA()()}if(2&o){const n=e.oxw(),t=n.index,i=n.$implicit,r=e.oxw(5);e.Q6J(\"id\",\"cy-remove-role-\"+t),e.uIk(\"aria-label\",r.deleteLabel+\" \"+i.value)}}const Jn=function(o){return{\"no-hint\":o}},Tu=function(o){return[o]};function mu(o,_){if(1&o&&(e.TgZ(0,\"div\",55)(1,\"div\",56)(2,\"mat-form-field\",43)(3,\"mat-select\",57,58),e.YNc(5,Ou,4,8,\"mat-option\",59),e.qZA(),e.YNc(6,Cu,2,0,\"mat-error\",2),e.qZA()(),e.TgZ(7,\"div\",46),e.YNc(8,Ru,3,2,\"button\",60),e.qZA()()),2&o){const n=_.$implicit,t=_.index,i=e.oxw(2).index,r=e.oxw(3);e.Q6J(\"formGroupName\",t),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(8,Jn,!n.get(\"role\").errors)),e.xp6(1),e.s9C(\"placeholder\",r.ngOrcidSelectRole),e.Q6J(\"aria-label\",r.ngOrcidSelectRoleAriaLabel)(\"ngClass\",e.VKq(10,Tu,\"contributor-role-\"+i)),e.xp6(2),e.Q6J(\"ngForOf\",r.contributionRoles),e.xp6(1),e.Q6J(\"ngIf\",null==n.get(\"role\").errors?null:n.get(\"role\").errors.unique),e.xp6(2),e.Q6J(\"ngIf\",0!==t)}}function Eu(o,_){if(1&o){const n=e.EpF();e.ynx(0),e.TgZ(1,\"div\",41)(2,\"div\",42)(3,\"mat-form-field\",43),e._UZ(4,\"input\",44,45),e.YNc(6,gu,2,0,\"mat-error\",2),e.YNc(7,fu,2,0,\"mat-error\",2),e.qZA()(),e.TgZ(8,\"div\",46)(9,\"button\",47),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(3);return e.KtG(r.deleteContributor(i))}),e.TgZ(10,\"mat-icon\",48),e._uU(11,\"delete \"),e.qZA()()(),e.ynx(12,49),e.YNc(13,mu,9,12,\"div\",50),e.BQk(),e.TgZ(14,\"div\",3)(15,\"a\",51),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw(),r=i.$implicit,a=i.index,s=e.oxw(3);return e.KtG(s.addAnotherRole(r,a))}),e.TgZ(16,\"span\",6),e.SDv(17,52),e.qZA()()()(),e.BQk()}if(2&o){const n=e.oxw(),t=n.$implicit,i=n.index,r=e.oxw(3);let a,s;e.xp6(3),e.Q6J(\"ngClass\",e.VKq(7,Jn,!(t.get(\"creditName\").touched&&null!=(a=t.get(\"creditName\"))&&a.errors))),e.xp6(1),e.s9C(\"placeholder\",r.ngOrcidContributorName),e.xp6(2),e.Q6J(\"ngIf\",t.get(\"creditName\").hasError(\"required\")),e.xp6(1),e.Q6J(\"ngIf\",null==t.get(\"creditName\").errors?null:t.get(\"creditName\").errors.maxlength),e.xp6(2),e.Q6J(\"id\",\"cy-delete-button-\"+i),e.uIk(\"aria-label\",r.deleteLabel+\" \"+(null==(s=t.get(\"creditName\"))?null:s.value)),e.xp6(4),e.Q6J(\"ngForOf\",r.rolesFormArray(t))}}function Su(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",46)(1,\"button\",47),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw().index,r=e.oxw(3);return e.KtG(r.deleteContributor(i))}),e.TgZ(2,\"mat-icon\",48),e._uU(3,\"delete \"),e.qZA()()()}if(2&o){const n=e.oxw(),t=n.index,i=n.$implicit,r=e.oxw(3);let a;e.xp6(1),e.Q6J(\"id\",\"cy-delete-button-\"+t),e.uIk(\"aria-label\",r.deleteLabel+\" \"+(null==(a=i.get(\"creditName\"))?null:a.value))}}function hu(o,_){1&o&&e._UZ(0,\"hr\",63)}const Nu=function(o){return{direction:o}},Mu=function(o){return{\"no-wrap\":o}};function Pu(o,_){if(1&o&&(e.TgZ(0,\"div\",27),e.YNc(1,au,1,0,\"div\",28),e.TgZ(2,\"div\",29)(3,\"div\",30)(4,\"div\",31),e._UZ(5,\"img\",32),e.qZA(),e.YNc(6,uu,9,15,\"ng-container\",2),e.YNc(7,Eu,18,9,\"ng-container\",2),e.qZA(),e.YNc(8,Su,4,2,\"div\",33),e.qZA(),e.YNc(9,hu,1,0,\"hr\",34),e.qZA()),2&o){const n=_.$implicit,t=_.index,i=e.oxw(3);e.Q6J(\"ngStyle\",e.VKq(8,Nu,i.screenDirection))(\"formGroupName\",t),e.uIk(\"id\",\"draggable-\"+t),e.xp6(2),e.Q6J(\"ngClass\",e.VKq(10,Mu,!i.isMobile)),e.xp6(4),e.Q6J(\"ngIf\",n.get(\"creditName\").disabled),e.xp6(1),e.Q6J(\"ngIf\",!n.get(\"creditName\").disabled),e.xp6(1),e.Q6J(\"ngIf\",n.get(\"creditName\").disabled),e.xp6(1),e.Q6J(\"ngIf\",t!==i.contributorsFormArray.length-1)}}function bu(o,_){1&o&&(e.TgZ(0,\"div\",14)(1,\"div\",15)(2,\"mat-icon\",5),e._uU(3,\"info\"),e.qZA()(),e.TgZ(4,\"div\",16)(5,\"h2\",17),e.SDv(6,64),e.qZA(),e.TgZ(7,\"p\"),e.SDv(8,65),e.qZA(),e.TgZ(9,\"a\",20),e.SDv(10,66),e.qZA()()())}function Au(o,_){if(1&o){const n=e.EpF();e.ynx(0)(1,23),e.TgZ(2,\"div\",24),e.NdJ(\"cdkDropListDropped\",function(i){e.CHM(n);const r=e.oxw(2);return e.KtG(r.drop(i))}),e.YNc(3,Pu,10,12,\"div\",25),e.qZA(),e.YNc(4,bu,11,0,\"div\",26),e.BQk()()}if(2&o){const n=e.oxw(2);e.xp6(3),e.Q6J(\"ngForOf\",null==n.contributorsFormArray?null:n.contributorsFormArray.controls),e.xp6(1),e.Q6J(\"ngIf\",(null==n.contributorsFormArray?null:n.contributorsFormArray.length)>n.maxNumberOfContributors)}}function Iu(o,_){if(1&o&&(e.ynx(0),e.TgZ(1,\"div\",8)(2,\"label\",9)(3,\"h3\",9),e.ynx(4),e.SDv(5,10),e.BQk(),e.YNc(6,nu,2,1,\"ng-container\",2),e.qZA()()(),e.YNc(7,ru,17,5,\"ng-container\",2),e.YNc(8,Au,5,2,\"ng-container\",2),e.BQk()),2&o){const n=e.oxw();e.xp6(6),e.Q6J(\"ngIf\",(null==n.contributors?null:n.contributors.length)<=n.maxNumberOfContributors+1),e.xp6(1),e.Q6J(\"ngIf\",n.togglzAddOtherContributors&&(null==n.contributors?null:n.contributors.length)>n.maxNumberOfContributors+1),e.xp6(1),e.Q6J(\"ngIf\",!(n.togglzAddOtherContributors&&(null==n.contributors?null:n.contributors.length)>n.maxNumberOfContributors+1))}}function xu(o,_){1&o&&(e.ynx(0),e.SDv(1,68),e.BQk())}function yu(o,_){1&o&&(e.ynx(0),e.SDv(1,69),e.BQk())}function ku(o,_){if(1&o){const n=e.EpF();e.TgZ(0,\"div\",3)(1,\"a\",67),e.NdJ(\"click\",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.addAnotherContributor((null==i.contributorsFormArray?null:i.contributorsFormArray.length)>i.maxNumberOfContributors))}),e.TgZ(2,\"mat-icon\",5),e._uU(3,\"add_circle_outline\"),e.qZA(),e.TgZ(4,\"span\",6),e.YNc(5,xu,2,0,\"ng-container\",2),e.YNc(6,yu,2,0,\"ng-container\",2),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(1),e.ekj(\"disabled\",(null==n.contributorsFormArray?null:n.contributorsFormArray.length)>n.maxNumberOfContributors),e.xp6(4),e.Q6J(\"ngIf\",(null==n.contributorsFormArray?null:n.contributorsFormArray.length)>0),e.xp6(1),e.Q6J(\"ngIf\",0===(null==n.contributorsFormArray?null:n.contributorsFormArray.length))}}let Xn=(()=>{var o;class _{constructor(t,i,r,a,s,l,c,u){this.window=i,this._changeDetectorRef=r,this.formBuilder=a,this.parentForm=s,this.platform=l,this.workService=c,this.affiliationService=u,this.deleteLabel=\"Delete\",this.$destroy=new w.xQ,this.screenDirection=\"ltr\",this.maxNumberOfContributors=49,this.maxNumberOfContributorsSummary=10,this.privateName=\"Name is private\",this.contributionRoles=m.tM,this.ngOrcidSelectRole=\"Please select a role\",this.ngOrcidSelectRoleAriaLabel=\"Select your contributor to this work\",this.ngOrcidContributorName=\"Contributor name\",t.getStateOf(\"ADD_OTHER_WORK_CONTRIBUTORS\").subscribe(O=>this.togglzAddOtherContributors=O)}get contributorsFormArray(){return this.parentForm.control.controls.contributors}get rolesRecordHolderFormArray(){return this.parentForm.control.controls.roles}ngOnInit(){var t,i,r,a,s;this.id=null==(i=null==(t=this.userRecord)?void 0:t.userInfo)?void 0:i.EFFECTIVE_USER_ORCID,this.platform.get().pipe((0,x.R)(this.$destroy)).subscribe(l=>{this.isMobile=l.columns4||l.columns8,this.screenDirection=l.screenDirection}),(null==(a=null==(r=this.userRecord)?void 0:r.affiliations)?void 0:a.length)>0?this.getEmploymentsFromAffiliations(null==(s=this.userRecord)?void 0:s.affiliations):this.affiliationService.getEmployments().pipe((0,Ve.b)(l=>{this.getEmployments(l)})).subscribe(),this.initializeFormArray()}addAnotherContributor(t){t||this.contributorsFormArray.push(this.getContributorForm()),this._changeDetectorRef.detectChanges(),this.contributorNamesInputs.last.nativeElement.focus()}addRecordHolderAsContributor(){this.roles=\"\",this.parentForm.control.setControl(\"roles\",new d.vC([this.getRoleForm(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)])),this.contributorsFormArray.push(this.getRecordHolder()),this.rolesValuesChange()}rolesFormArray(t){return t.get(\"roles\").controls}addAnotherRole(t,i){if(t.get(\"roles\").push(this.getRoleForm(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)),this._changeDetectorRef.detectChanges(),i){const r=this.inputs.toArray().filter(a=>!!a.element.nativeElement.classList.contains(\"contributor-role-\"+i)&&a);r[r.length-1].element.nativeElement.focus()}}deleteContributor(t){var i;(null==(i=this.contributorsFormArray.at(t).get([\"contributorOrcid\",\"path\"]))?void 0:i.value)===this.id&&this.parentForm.control.setControl(\"roles\",new d.vC([])),this.contributorsFormArray.removeAt(t)}deleteRole(t,i){t.get(\"roles\").removeAt(i),0===i&&0===this.roles.length&&this.addAnotherRole(t)}drop(t){(0,Z.bA)(this.contributorsFormArray.controls,t.previousIndex,t.currentIndex)}initializeFormArray(){var i,r;this.recordHolderContribution=this.getRecordHolderContribution(),this.parentForm.control.setControl(\"contributors\",new d.vC([]));const t=this.parentForm.control.get(\"contributors\");this.togglzAddOtherContributors&&(null==(i=this.contributors)?void 0:i.length)>0?(!this.recordHolderContribution&&!this.recordHolderAsContributor&&this.addRecordHolderAsContributor(),this.contributors.forEach(a=>{var s,l,c,u,O;t.push(this.getContributorForm(null==(s=null==a?void 0:a.creditName)?void 0:s.content,null!=(l=null==a?void 0:a.contributorOrcid)&&l.path?null==(c=null==a?void 0:a.contributorOrcid)?void 0:c.path:null,null!=(u=null==a?void 0:a.contributorOrcid)&&u.uri?null==(O=null==a?void 0:a.contributorOrcid)?void 0:O.uri:null,a.rolesAndSequences.map(f=>f.contributorRole),!0))})):this.recordHolderAsContributor||this.addRecordHolderAsContributor(),this.roles=null==(r=this.getDisabledRoles())?void 0:r.join(\", \"),this.rolesValuesChange(),this._changeDetectorRef.detectChanges()}rolesValuesChange(){var t;null==(t=this.rolesRecordHolderFormArray)||t.valueChanges.subscribe(()=>{this.roles=[...this.getDisabledRoles(),...this.getEnabledRoles()].join(\", \")})}getContributorForm(t,i,r,a,s){const l=this.formBuilder.group({creditName:[{value:t||\"\",disabled:s},[d.kI.required,d.kI.maxLength(I.tF)]],contributorOrcid:this.formBuilder.group({path:[i||null],uri:[r||(i?`https:${V.N.BASE_URL}${i}`:null)]}),roles:new d.vC([])}),c=l.controls.roles;return(null==a?void 0:a.length)>0?a.forEach(u=>{var O;if(u){const f=null==(O=this.workService.getContributionRoleByKey(u))?void 0:O.key;c.push(this.getRoleForm(f||u,s))}}):s||c.push(this.getRoleForm(this.workService.getContributionRoleByKey(\"no specified role\").key,!1)),l}getRoleForm(t,i){return this.formBuilder.group({role:[{value:t?t.toLowerCase():\"\",disabled:i},[Kn(\"role\",\"no specified role\")]]})}getDisabledRoles(){var t;return null==(t=this.rolesRecordHolderFormArray)?void 0:t.controls.filter(i=>i.disabled).map(i=>{var s,l;const r=null==(s=null==i?void 0:i.value)?void 0:s.role;return(null==(l=this.workService.getContributionRoleByKey(r))?void 0:l.translation)||r.charAt(0).toUpperCase()+r.slice(1)})}getEnabledRoles(){var t;return null==(t=this.rolesRecordHolderFormArray)?void 0:t.controls.filter(i=>{var r;return!i.disabled&&(null==(r=null==i?void 0:i.value)?void 0:r.role)}).map(i=>{var r;return this.workService.getContributionRoleByKey(null==(r=null==i?void 0:i.value)?void 0:r.role).translation})}getCreditNameFromUserRecord(){var a,s,l,c,u,O,f,R,T;const t=null==(l=null==(s=null==(a=this.userRecord)?void 0:a.names)?void 0:s.creditName)?void 0:l.value,i=null==(O=null==(u=null==(c=this.userRecord)?void 0:c.names)?void 0:u.givenNames)?void 0:O.value,r=null==(T=null==(R=null==(f=this.userRecord)?void 0:f.names)?void 0:R.familyName)?void 0:T.value;return t||(r?`${i} ${r}`:i)}getEmployments(t){var i;this.affiliation=null==(i=t.employmentGroups)?void 0:i.map(r=>{var a;return null==(a=r.activities.filter(s=>{var l;return!(null!=(l=null==s?void 0:s.endDate)&&l.year)}).map(s=>{var l;return null==(l=s.organization)?void 0:l.name}))?void 0:a.join(\", \")}).filter(r=>r.length>0).join(\", \")}getEmploymentsFromAffiliations(t){this.affiliation=null==t?void 0:t.map(i=>{var r;return null==(r=i.affiliationGroup.filter(a=>{var s,l,c,u;return!(null!=(l=null==(s=a.defaultAffiliation)?void 0:s.endDate)&&l.year)&&\"employment\"===(null==(u=null==(c=a.defaultAffiliation)?void 0:c.affiliationType)?void 0:u.value)}).map(a=>{var s,l;return null==(l=null==(s=a.defaultAffiliation)?void 0:s.affiliationName)?void 0:l.value}))?void 0:r.join(\", \")}).filter(i=>i.length>0).join(\", \")}getRecordHolderContribution(){var t;return null==(t=this.contributors)?void 0:t.find(i=>{var r,a;return(null==(r=null==i?void 0:i.contributorOrcid)?void 0:r.path)&&(null==(a=null==i?void 0:i.contributorOrcid)?void 0:a.path)===this.id})}getRecordHolder(){var a,s,l,c,u,O,f,R,T,E;const t=null!=(s=null==(a=this.recordHolderContribution)?void 0:a.contributorOrcid)&&s.path?null==(c=null==(l=this.recordHolderContribution)?void 0:l.contributorOrcid)?void 0:c.path:this.id,i=this.recordHolderContribution?null==(O=null==(u=this.recordHolderContribution)?void 0:u.creditName)?void 0:O.content:this.getCreditNameFromUserRecord(),r=null!=(R=null==(f=this.recordHolderContribution)?void 0:f.contributorOrcid)&&R.uri?null==(E=null==(T=this.recordHolderContribution)?void 0:T.contributorOrcid)?void 0:E.uri:`https:${V.N.BASE_URL}${t}`;return this.recordHolderContribution||(this.recordHolderContribution={contributorOrcid:{path:this.id,uri:r},creditName:{content:i}}),this.getContributorForm(i,t,r,[],!0)}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.unsubscribe()}goto(t){this.window.open(t)}}return(o=_).\\\\u0275fac=function(t){return new(t||o)(e.Y36(re.b),e.Y36(ie.m9),e.Y36(e.sBO),e.Y36(d.QS),e.Y36(d.sg),e.Y36(D.tu),e.Y36(z.Y),e.Y36(Ze.l))},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-work-contributors\"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Hp,5,e.s_b),e.Gf(Vp,5)),2&t){let r;e.iGM(r=e.CRH())&&(i.inputs=r),e.iGM(r=e.CRH())&&(i.contributorNamesInputs=r)}},inputs:{contributors:\"contributors\",userRecord:\"userRecord\",recordHolderAsContributor:\"recordHolderAsContributor\"},features:[e._Bn([],[{provide:d.gN,useExisting:d.sg}])],decls:4,vars:3,consts:function(){let n,t,i,r,a,s,l,c,u,O,f,R,T,E,C;return n=\"Add yourself as contributor\",t=\"Contributors to this work\",i=\"et al.\",r=\"This work has a large number of contributors\",a=\"You cannot edit the list of contributors on a work with more than 50 named participants.\",s=\"Find out more about managing contributors in ORCID\",l=\"Add another role\",c=\"Contributor name is required\",u=\"Must be less than 100 characters\",O=\"Role cannot be duplicated\",f=\"You cannot add any more contributors to this work\",R=\"ORCID supports a maximum of 50 contributors when adding them manually.\",T=\"Find out more about managing contributors in ORCID\",E=\"Add another contributor\",C=\"Add other contributor\",[[1,\"container\",\"no-padding\"],[\"class\",\"row\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"row\"],[\"id\",\"cy-add-record-holder-contributor\",1,\"col\",\"add-record-holder\",\"no-gutters\",3,\"ngClass\",\"click\"],[1,\"large-material-icon\"],[1,\"mat-body-1\"],n,[1,\"row\",\"title\"],[1,\"orc-font-body\"],t,[1,\"contributors-summary\",\"orc-font-body-small\"],[4,\"ngFor\",\"ngForOf\"],i,[1,\"notice-panel\",\"orc-font-body-small\"],[1,\"col\",\"no-gutters\",\"info\"],[1,\"col\",\"l11\",\"m6\",\"s3\"],[1,\"orc-font-body-small\"],r,a,[\"rel\",\"noopener noreferrer\",\"target\",\"_blank\",\"href\",\"https://support.orcid.org/hc/en-us/articles/360006971353-Metadata-in-the-Works-section\",1,\"underline\"],s,[\"target\",\"_blank\",\"rel\",\"noreferrer noopener\",1,\"underline\",3,\"href\"],[\"formArrayName\",\"contributors\"],[\"cdkDropList\",\"\",1,\"row\",\"contributors-list\",3,\"cdkDropListDropped\"],[\"cdkDrag\",\"\",\"class\",\"row contributors-box\",3,\"ngStyle\",\"formGroupName\",4,\"ngFor\",\"ngForOf\"],[\"class\",\"notice-panel orc-font-body-small\",4,\"ngIf\"],[\"cdkDrag\",\"\",1,\"row\",\"contributors-box\",3,\"ngStyle\",\"formGroupName\"],[\"class\",\"row drag-placeholder\",4,\"cdkDragPlaceholder\"],[1,\"row\",3,\"ngClass\"],[1,\"col\",\"l12\",\"m8\",\"s4\",\"middle\",\"no-wrap\",\"no-gutters\",\"contributor-wrapper\"],[1,\"icons-wrapper\"],[\"cdkDragHandle\",\"\",\"src\",\"assets/vectors/draggable.svg\",\"alt\",\"drag handle\",1,\"drag-icon\"],[\"class\",\"col l3 delete-button\",4,\"ngIf\"],[\"class\",\"dashed-line\",4,\"ngIf\"],[1,\"row\",\"drag-placeholder\"],[\"class\",\"orcid-logo\",\"src\",\"assets/vectors/orcid.logo.icon.svg\",\"alt\",\"orcid logo\",3,\"click\",4,\"ngIf\"],[1,\"credit-name-and-roles\",\"orc-font-body-small\",3,\"ngClass\"],[\"class\",\"affiliation orc-font-small-print\",4,\"ngIf\"],[\"src\",\"assets/vectors/orcid.logo.icon.svg\",\"alt\",\"orcid logo\",1,\"orcid-logo\",3,\"click\"],[1,\"affiliation\",\"orc-font-small-print\"],[1,\"row\",\"contributor\"],[1,\"col\",\"l9\",\"no-gutters\"],[\"appearance\",\"outline\",1,\"mat-form-field-min\",3,\"ngClass\"],[\"matInput\",\"\",\"formControlName\",\"creditName\",3,\"placeholder\"],[\"contributorNames\",\"\"],[1,\"col\",\"l3\",\"delete-button\"],[\"mat-icon-button\",\"\",3,\"id\",\"click\"],[1,\"material-icons-outlined\",\"extra-large-material-icon\"],[\"formArrayName\",\"roles\"],[\"class\",\"row roles-box\",3,\"formGroupName\",4,\"ngFor\",\"ngForOf\"],[1,\"underline\",\"cy-add-another-role\",3,\"click\"],l,c,u,[1,\"row\",\"roles-box\",3,\"formGroupName\"],[1,\"col\",\"l9\",\"no-gutters\",\"orc-font-body-small\"],[\"formControlName\",\"role\",3,\"aria-label\",\"ngClass\",\"placeholder\"],[\"roleSelect\",\"\"],[3,\"value\",\"disabled\",4,\"ngFor\",\"ngForOf\"],[\"mat-icon-button\",\"\",3,\"id\",\"click\",4,\"ngIf\"],[3,\"value\",\"disabled\"],O,[1,\"dashed-line\"],f,R,T,[1,\"col\",\"add-more\",\"no-gutters\",\"cy-add-another-contributor\",3,\"click\"],E,C]},template:function(t,i){1&t&&(e.TgZ(0,\"div\",0),e.YNc(1,eu,6,3,\"div\",1),e.YNc(2,Iu,9,3,\"ng-container\",2),e.YNc(3,ku,7,4,\"div\",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J(\"ngIf\",0===(null==i.rolesRecordHolderFormArray||null==i.rolesRecordHolderFormArray.controls?null:i.rolesRecordHolderFormArray.controls.length)),e.xp6(1),e.Q6J(\"ngIf\",(null==i.contributorsFormArray||null==i.contributorsFormArray.controls?null:i.contributorsFormArray.controls.length)>0),e.xp6(1),e.Q6J(\"ngIf\",!(i.togglzAddOtherContributors&&(null==i.contributors?null:i.contributors.length)>i.maxNumberOfContributors+1)))},dependencies:[p.mk,p.sg,p.O5,p.PC,d.Fj,d.JJ,d.JL,d.u,d.x0,d.CE,v.t,y.Hw,A.eB,h.nI,h.v_,q.k0,ne.x8,ee.CK,Z.Wj,Z.Zt,Z.Bh,Z.Hk,p.OU,p.rS,Bn,zp],styles:[\".container[_ngcontent-%COMP%]{width:100%;margin-bottom:32px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:28px}.contributor-wrapper[_ngcontent-%COMP%]{margin:5px 0}.contributor-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-block-start:.5em;margin-block-end:.5em;margin-inline-start:0;margin-inline-end:0}.contributor-wrapper[_ngcontent-%COMP%]   .icons-wrapper[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:space-around}.contributor-wrapper[_ngcontent-%COMP%]   .icons-wrapper[_ngcontent-%COMP%]   img.drag-icon[_ngcontent-%COMP%]{height:32px;margin:4px 0;cursor:move;margin-inline-start:5px;margin-inline-end:7px}.contributor-wrapper[_ngcontent-%COMP%]   .icons-wrapper[_ngcontent-%COMP%]   img.orcid-logo[_ngcontent-%COMP%]{width:32px;margin-inline-start:8px;margin-inline-end:8px;cursor:pointer}.contributor-wrapper[_ngcontent-%COMP%]   .contributor[_ngcontent-%COMP%]{margin-bottom:12px}.contributor-wrapper[_ngcontent-%COMP%]   .credit-name-and-roles[_ngcontent-%COMP%]{display:flex;flex-direction:column}.contributor-wrapper[_ngcontent-%COMP%]   .record-holder[_ngcontent-%COMP%]{font-style:italic}.contributor-wrapper[_ngcontent-%COMP%]   .not-record-holder[_ngcontent-%COMP%]{padding:0 8px}.contributor-wrapper[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.contributor-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:4px}.notice-panel[_ngcontent-%COMP%]{padding:16px;margin-top:16px;margin-bottom:16px;border:solid 2px;border-radius:4px;display:flex}.notice-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px}.notice-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.notice-panel[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding-right:8px}.delete-button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:0}.add-more[_ngcontent-%COMP%]{margin-top:27px;padding-inline-start:0}.add-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}.add-more[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto;padding-inline-start:6px}.add-record-holder[_ngcontent-%COMP%]{margin-bottom:27px;padding-inline-start:0}.add-record-holder[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}.add-record-holder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto;padding-inline-start:6px}.no-contributors[_ngcontent-%COMP%]{margin-bottom:0}  .columns-4-or-8 .contributors-wrapper{margin:16px 0}\",\".drag-placeholder[_ngcontent-%COMP%]{min-height:60px;background-color:#f5f9e8;border:dashed 1px #a6ce39;transition:transform .25s cubic-bezier(0,0,0,1)}.contributors-box[_ngcontent-%COMP%]{min-height:60px;background-color:#fff}.contributors-box.cdk-drag-preview[_ngcontent-%COMP%]{border:2px solid #a6ce39}.contributors-wrapper[_ngcontent-%COMP%]   .affiliation[_ngcontent-%COMP%]{color:#0009}.notice-panel[_ngcontent-%COMP%]{border-color:#ff9c00!important}.notice-panel[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9c00!important}\"]}),_})();var vu=g(18382),Du=g(41671),wu=g(67213);const Lu=[[[\"\",\"id\",\"side-bar-title\"]],[[\"\",\"id\",\"side-bar-url-1\"]],[[\"\",\"id\",\"side-bar-url-2\"]],[[\"\",\"id\",\"side-bar-url-3\"]],[[\"\",\"id\",\"side-bar-url-4\"]],[[\"\",\"id\",\"side-bar-url-5\"]]],$u=[\"#side-bar-title\",\"#side-bar-url-1\",\"#side-bar-url-2\",\"#side-bar-url-3\",\"#side-bar-url-4\",\"#side-bar-url-5\"];let Ce=(()=>{var o;class _{constructor(){}ngOnInit(){}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275cmp=e.Xpm({type:o,selectors:[[\"app-modal-side-bar\"]],ngContentSelectors:$u,decls:26,vars:0,consts:[[1,\"container\",\"orc-font-body-small\"],[1,\"side-bar-url\"],[1,\"divider\"]],template:function(t,i){1&t&&(e.F$t(Lu),e.TgZ(0,\"nav\",0)(1,\"ul\")(2,\"li\")(3,\"span\",1),e.Hsn(4),e.qZA(),e._UZ(5,\"mat-divider\",2),e.qZA(),e.TgZ(6,\"li\")(7,\"span\",1),e.Hsn(8,1),e.qZA(),e._UZ(9,\"mat-divider\",2),e.qZA(),e.TgZ(10,\"li\")(11,\"span\",1),e.Hsn(12,2),e.qZA(),e._UZ(13,\"mat-divider\",2),e.qZA(),e.TgZ(14,\"li\")(15,\"span\",1),e.Hsn(16,3),e.qZA(),e._UZ(17,\"mat-divider\",2),e.qZA(),e.TgZ(18,\"li\")(19,\"span\",1),e.Hsn(20,4),e.qZA(),e._UZ(21,\"mat-divider\",2),e.qZA(),e.TgZ(22,\"li\")(23,\"span\",1),e.Hsn(24,5),e.qZA(),e._UZ(25,\"mat-divider\",2),e.qZA()()())},dependencies:[Q.d],styles:[\"[_nghost-%COMP%]{width:100%;padding-inline-end:16px;padding-top:16px}ul[_ngcontent-%COMP%]{padding-left:0;list-style-type:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .divider[_ngcontent-%COMP%]{margin:14px 0}.title[_ngcontent-%COMP%]{cursor:pointer}.side-bar-url[_ngcontent-%COMP%]:empty + .divider[_ngcontent-%COMP%]{display:none}\"]}),_})(),Be=(()=>{var o;class _{transform(t){return t&&Number(t)<10?\"0\"+t.toString():t.toString()}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"trailingZeros\",type:o,pure:!0}),_})();var Qe=g(27087);let Yn=(()=>{var o;class _{transform(t,...i){return m.ip[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordWorkCategoryLabel\",type:o,pure:!0}),_})(),qn=(()=>{var o;class _{transform(t){return m.YH[t]}}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275pipe=e.Yjl({name:\"recordWorkTitleNameLabel\",type:o,pure:!0}),_})(),Uu=(()=>{var o;class _{}return(o=_).\\\\u0275fac=function(t){return new(t||o)},o.\\\\u0275mod=e.oAB({type:o}),o.\\\\u0275inj=e.cJS({providers:[$e.n],imports:[p.ez,d.u5,d.UX,gd,dt.$,ct.Q,y.Ps,A.yu,lt.z,h.wp,q.x4,ne.uw,vu.I,Z._t,fn.m,y.Ps,A.yu,Q.t,st.q,me.jc,ut.x,Te.IF,de.jT,pt.E,Je.gf,fn.m,te.D8,Ee.Xo,oe.Zh,Pe.Ky,$p.A,Up.m,Du.Q]}),_})();e.B6R(Cn.Q,[p.mk,p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0,wu.V,v.t,y.Hw,A.eB,$.z,U.R,Y.Y,Ce,h.nI,h.v_,h.pH,q.k0,ue.B,Z.Wj,Z.Zt,Z.Bh,Z.Hk],[ge]),e.B6R(On.D,[p.mk,d._Y,d.Fj,d.JJ,d.JL,d.nD,d.sg,d.u,v.t,A.eB,$.z,U.R,Y.Y,Ce,h.v_,h.pH,Pe.IC,q.k0,ue.B],[ge]),e.B6R(He.G,[$.z,U.R,pn],[]),e.B6R(Xe.X,[p.mk,p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.F,d.sg,d.u,d.x0,v.t,y.Hw,A.eB,$.z,U.R,Y.Y,Ce,h.nI,h.v_,h.pH,h.nX,q.k0,ne.x8,ee.CK,ue.B,te.VN,te.QJ],[p.Ov,Mn.V,Be,ge,Qe.W]),e.B6R(ze.e,[p.mk,p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,v.t,y.Hw,A.eB,$.z,U.R,Y.Y,Ce,h.nI,h.v_,h.pH,h.nX,Pe.IC,q.k0,ne.x8,ee.CK,ue.B,te.VN,te.QJ,Pp,xp],[p.Ov,p.Nd,An,Be,ge,Qe.W]),e.B6R(je.z,[p.sg,$.z,U.R,h.v_,ne.x8,ee.CK,pn],[]),e.B6R(Sn.D,[$.z,U.R,pn],[]),e.B6R(wn.Y4,[p.sg,p.O5,d.JJ,d.JL,d.On,d.sg,d.u,d.x0,A.eB,$.z,U.R,Y.Y,h.nI,Q.d,oe.FC,fe],[X.r]),e.B6R(ln.S,[p.mk,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,v.t,A.eB,$.z,U.R,Y.Y,Ce,h.nI,h.v_,q.k0,Ge],[]),e.B6R(Ge,[p.mk,p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,v.t,y.Hw,h.nI,h.v_,h.pH,Pe.IC,q.k0,ne.x8,ee.CK,ee.NA,ue.B,Wn,Gn,Qn,Xn],[p.Nd,Yn,dn,qn,Be,ge,Qe.W]),e.B6R(Ge,[p.mk,p.sg,p.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,d.x0,d.CE,v.t,y.Hw,h.nI,h.v_,h.pH,Pe.IC,q.k0,ne.x8,ee.CK,ee.NA,ue.B,Wn,Gn,Qn,Xn],[p.Nd,Yn,dn,qn,Be,ge,Qe.W]),e.B6R(sn.L,[p.O5,v.t,A.eB,$.z,U.R,Y.Y,Ce,Ge],[])},79951:function(gn){gn.exports=function(){\"use strict\";var g,Re=[\"startTour\",\"advanceTour\",\"cancelTour\",\"identify\",\"anonymous\",\"update\",\"on\",\"off\",\"openChecklist\",\"closeChecklist\",\"startChecklist\",\"setOptions\",\"showBeacon\",\"hideBeacon\"];function Z(p){if(\"string\"!=typeof p||\"\"===p)throw new Error(\"Invalid HelpHero App ID: \".concat(p));if(null!=g&&g!==p)throw new Error(\\'HelpHero does not support initializing multiple Apps on the same page. Trying to initialize with App ID \"\\'.concat(p,\\'\" which is different from previously used App ID \"\\').concat(g,\\'\"\\'));var d=window;if(null!=d.HelpHero)return d.HelpHero;var te=[],A=function(){te.push(arguments)};d.HelpHero=A,A.q=te,Re.forEach(function(oe){A[oe]=function(){for(var Q=[],h=0;h<arguments.length;h++)Q[h]=arguments[h];return d.HelpHero.apply(null,[oe].concat(Q))}}),g=p;var Te=document.createElement(\"script\");return Te.src=\"https://app.helphero.co/embed/\".concat(p),Te.async=!0,document.body.appendChild(Te),A}return Z.default=Z,Z}()}}]);', 'comment': ''}, 'redirectURL': '', 'headersSize': 433, 'bodySize': 84342, 'comment': ''}, 'cache': {}, 'timings': {'comment': '', 'send': 0, 'dns': -1, 'connect': -1, 'wait': 119, 'receive': 16, 'blocked': -1, 'ssl': -1}, 'serverIPAddress': '104.20.228.70', 'comment': '', 'time': 135}"